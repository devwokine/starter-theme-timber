!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t,n){return(e-t)/(n-t)}function t(e,t,n){return e<t?t:e>n?n:e}function n(){Barba.BaseView.extend({namespace:"page-home",onEnter:function(){console.log("Init Home")},onLeaveCompleted:function(){}}).init()}function o(){Barba.BaseView.extend({namespace:"page",onEnter:function(){console.log("Init Page")},onLeaveCompleted:function(){}}).init()}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)});"function"==typeof Symbol&&Symbol.iterator,function(){function e(e){this.value=e}function t(t){function n(i,r){try{var a=t[i](r),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(e,t){return new Promise(function(o,a){var s={key:e,arg:t,resolve:o,reject:a,next:null};r?r=r.next=s:(i=r=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(){function t(e,n){var i;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!t.notNeeded(e)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,s=0,c=r.length;s<c;s++)a[r[s]]=function(e,t){return function(){return e.apply(t,arguments)}}(a[r[s]],a);o&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),o):i.call(e,t,n,o)}),"function"==typeof e.onclick&&(i=e.onclick,e.addEventListener("click",function(e){i(e)},!1),e.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,o=navigator.userAgent.indexOf("Android")>0&&!n,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},t.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!o;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},t.prototype.sendClick=function(e,t){var n,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},t.prototype.determineEventType=function(e){return o&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},t.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},t.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if((o=window.getSelection()).rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},t.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},t.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(e){var t,n,s,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(l=e.changedTouches[0],(u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=u.tagName.toLowerCase())){if(t=this.findControl(u)){if(this.focus(u),o)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-n>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||r||!(c=u.fastClickScrollParent)||c.fastClickLastScrollTop===c.scrollTop)||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},t.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},t.prototype.destroy=function(){var e=this.layer;o&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(e){var t,n,i;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!o)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&i[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction)},t.attach=function(e,n){return new t(e,n)},e.exports?(e.exports=t.attach,e.exports.FastClick=t):window.FastClick=t}()}),s=function(){function e(t){i(this,e),console.log("initHeader"),this.DOM={},this.DOM.el=t,this.DOM.body=document.body,this.DOM.brand=this.DOM.el.querySelector(".brand"),this.DOM.toggle=this.DOM.el.querySelector(".toggle__menu"),this.DOM.menuContainer=this.DOM.el.querySelector("nav"),this.menuOpen=!1,this.init()}return r(e,[{key:"init",value:function(){var e=this,t=new TimelineMax({paused:!0});this.DOM.toggle.addEventListener("click",function(n){n.preventDefault(),e.DOM.body.classList.toggle("showMenu"),e.DOM.body.classList.contains("showMenu")?(e.menuOpen=!0,e.DOM.body.style.overflow="hidden",e.DOM.menuContainer.style.visibility="visible",t.totalDuration(2).restart()):(e.menuOpen=!1,t.totalDuration(1).reverse(),e.DOM.body.style.overflow="auto",e.DOM.menuContainer.style.visibility="hidden")}),this.DOM.menuContainer.querySelectorAll(".nav__link").forEach(function(t){t.addEventListener("click",function(t){null!=e.DOM.menuContainer.querySelector(".active")&&e.DOM.menuContainer.querySelector(".active").classList.remove("active"),t.currentTarget.parentNode.classList.add("active")})}),this.DOM.brand.addEventListener("click",function(t){null!=e.DOM.menuContainer.querySelector(".active")&&e.DOM.menuContainer.querySelector(".active").classList.remove("active")})}}]),e}();new(function(){function c(){i(this,c),this.sy=0,this.devMode=!0,this.DOM={},this.DOM.body=document.body,this.DOM.footer=document.querySelector("footer"),this.DOM.barbaWrapper=document.querySelector("#barba-wrapper"),window.scrollTo(0,0),console.log("%cCreated by Wokine, with ❤","color: #000; padding: 5px 0px 1px; border-bottom:2px solid #71d1c2;"),console.log("%chttp://wokine.com","color:#ccc"),this.init(),this.addEvents(),this.intro()}return r(c,[{key:"init",value:function(){var e=this;this.devMode&&(console.log("DEVMODE BIATCH"),console.log(window.Sniff)),a(this.DOM.body),this.DOM.body.scrollTop=document.documentElement.scrollTop=0,history.scrollRestoration="manual";new s(document.querySelector("body > header"));Barba.Dispatcher.on("newPageReady",function(t,n,o){window.Sniff.features.mobile||(e.initPrllx(o),e.initInView(o))}),Barba.Dispatcher.on("linkClicked",function(e,t){}),Barba.Dispatcher.on("initStateChange",function(){"function"==typeof ga&&ga("send","pageview",location.pathname)});var t=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.transitionOut()]).then(this.transitionIn.bind(this))},transitionOut:function(){var e=Barba.Utils.deferred(),t=this.oldContainer,n=new TimelineMax({paused:!0,onComplete:function(){window.scrollTo(0,0),e.resolve()}});return n.to(t,.8,{opacity:0,ease:Power3.easeOut},0),n.play(),e.promise},transitionIn:function(){var e=this;this.oldContainer.style.display="none",this.newContainer.style.visibility="visible";var t=new TimelineMax({paused:!0,onComplete:function(){e.done()}});t.from(this.newContainer,1.2,{opacity:0,ease:Power3.easeOut},0),t.play()}});Barba.Pjax.getTransition=function(){return t},n(),o(),Barba.Pjax.start()}},{key:"addEvents",value:function(){var e=this;window.addEventListener("scroll",function(t){e.sy=window.pageYOffset||document.documentElement.scrollTop})}},{key:"initPrllx",value:function(n){var o=[],i=n.querySelectorAll("*[data-prllx]");i.forEach(function(e){var t=new TimelineMax({paused:!0});TweenMax.set(e,{y:-1*e.getAttribute("data-prllx")}),t.to(e,1,{y:e.getAttribute("data-prllx"),overwrite:"all",ease:Power0.easeNone}),o.push(t)});TweenMax.ticker.addEventListener("tick",function(){var n=this;i.forEach(function(i,r){var a=i.getBoundingClientRect().top+n.sy-window.innerHeight,s=t(e(sy,a,i.getBoundingClientRect().top+n.sy+i.offsetHeight),0,1);o[r].progress(s)})},this,!0,1)}},{key:"initInView",value:function(e){var t=e.querySelectorAll(".fadeInView");t&&(t.forEach(function(e){e.fadeInTL=new TimelineMax({paused:!0}),e.fadeInTL.from(e,1,{y:80,opacity:0,ease:Power3.easeOut},0)}),inView("main .fadeInView").on("enter",function(e){e.done||e.fadeInTL.duration(animationDuration).play()}).on("exit",function(e){e.done=!0}));var n=e.querySelectorAll(".lettersInView");n&&(n.forEach(function(e){e.splitLetters=new SplitText(e,{type:"chars"}),e.lettersInTL=new TimelineMax({paused:!0}),e.lettersInTL.staggerFrom(e.splitLetters.chars,1,{y:20,opacity:0,ease:Power3.easeOut},.015,0)}),inView("main .lettersInView").on("enter",function(e){e.done||e.lettersInTL.duration(animationDuration).play()}).on("exit",function(e){e.done=!0,e.innerHTML=e.splitLetters._originals}));var o=e.querySelectorAll(".linesInView");o&&(o.forEach(function(e){e.splitLines=new SplitText(e,{type:"lines"}),e.linesInTL=new TimelineMax({paused:!0}),e.linesInTL.staggerFrom(e.splitLines.lines,1,{y:20,opacity:0,ease:Power3.easeOut},.05,.2)}),inView("main .linesInView").on("enter",function(e){e.done||e.linesInTL.duration(1.5*animationDuration).play()}).on("exit",function(e){e.done=!0,e.innerHTML=e.splitLines._originals})),inView.offset({top:-120,left:-50,right:-50,bottom:0})}},{key:"intro",value:function(){var e=this,t=new TimelineMax({paused:!0,onStart:function(){e.DOM.body.classList.remove("is-loading")}});t.from(this.DOM.body,1.2,{opacity:0,ease:Power3.easeOut},.3),t.play()}}]),c}())});
//# sourceMappingURL=app.min.js.map
