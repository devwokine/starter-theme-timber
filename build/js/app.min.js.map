{"version":3,"file":"app.min.js","sources":["assets/js/utils.js","assets/js/pages/home.js","assets/js/pages/page.js","../node_modules/nodelist-foreach-polyfill/index.js","../node_modules/fastclick/lib/fastclick.js","assets/js/modules/header.js","assets/js/app.js"],"sourcesContent":["export function onLoadedMetadata(e) {\n\n  const video = $(e.target);\n  let aspectRatio = video.data('aspectRatio');\n  if (aspectRatio == undefined) {\n      aspectRatio = video.width() / video.height();\n      video.data('aspectRatio', aspectRatio);\n  }\n  resizeVideo(video);\n\n}\n\nexport function resizeVideo(video) {\n\n  let newWidth;\n  let newHeight;\n  let videoRatio = video.data('aspectRatio');\n  if (videoRatio == undefined) videoRatio = 1.7777777;\n  let parentWidth  = video.parent().width();\n  let parentHeight = video.parent().height();\n  let parentRatio = parentWidth / parentHeight;\n\n  if (parentRatio > videoRatio && !video.hasClass('bgWidth')) {\n    video.removeClass(\"bgHeight\");\n    video.addClass(\"bgWidth\");\n  }\n  if (parentRatio <= videoRatio && !video.hasClass('bgHeight')) {\n    video.removeClass(\"bgWidth\");\n    video.addClass(\"bgHeight\");\n  }\n\n}\n\nexport function delay(ms){\n    var ctr, rej, p = new Promise(function (resolve, reject) {\n        ctr = setTimeout(resolve, ms);\n        rej = reject;\n    });\n    p.cancel = function(){ clearTimeout(ctr); rej(Error(\"Cancelled\"))};\n    return p;\n}\n\nexport function randomInt(min,max) {\n    return Math.floor(Math.random()*(max-min+1)+min);\n}\n\nexport function normalize(value, min, max) {\n  return (value - min) / (max - min);\n}\n\nexport function clamp(value, min, max) {\n  return value < min ? min : (value > max ? max : value);\n}\n\nexport function simulateClick(elem) {\n\n    var evt = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n    });\n\n    var canceled = !elem.dispatchEvent(evt);\n\n};\n\nexport function mouseMovefn(e) {\n\n  let xMouse = e.pageX - e.currentTarget.getBoundingClientRect().left - ( e.currentTarget.offsetWidth / 2 );\n  let yMouse = e.pageY - window.pageYOffset - e.currentTarget.getBoundingClientRect().top - ( e.currentTarget.offsetHeight / 2 );\n  const mouseElements = e.currentTarget.querySelectorAll('*[data-mouse-parallax]');\n  mouseElements.forEach(elem => {\n    var factor = elem.getAttribute('data-mouse-parallax');\n    let xFinal = xMouse * factor;\n    let yFinal = yMouse * factor;\n    TweenMax.to(elem, 1.2, {x:xFinal, y:yFinal});\n  });\n\n}\n","export function initHome() {\n\n\tvar Home = Barba.BaseView.extend({\n\n\t\tnamespace: 'page-home',\n\n\t\tonEnter: function() {\n\n\t\t\t//console.log('Init Home');\n\n\t\t},\n\n\t\tonLeaveCompleted: function() {\n\n\n\n\t\t}\n\n\t})\n\n\tHome.init();\n\n}\n","export function initPage() {\n\n\tvar Page = Barba.BaseView.extend({\n\n\t\tnamespace: 'page',\n\n\t\tonEnter: function() {\n\n\t\t\t//console.log('Init Page');\n\n\t\t},\n\n\t\tonLeaveCompleted: function() {\n\n\n\n\t\t}\n\n\t})\n\n\tPage.init();\n\n}\n","if (window.NodeList && !NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = function (callback, thisArg) {\r\n        thisArg = thisArg || window;\r\n        for (var i = 0; i < this.length; i++) {\r\n            callback.call(thisArg, this[i], i, this);\r\n        }\r\n    };\r\n}\r\n",";(function () {\n\t'use strict';\n\n\t/**\n\t * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.\n\t *\n\t * @codingstandard ftlabs-jsv2\n\t * @copyright The Financial Times Limited [All Rights Reserved]\n\t * @license MIT License (see LICENSE.txt)\n\t */\n\n\t/*jslint browser:true, node:true*/\n\t/*global define, Event, Node*/\n\n\n\t/**\n\t * Instantiate fast-clicking listeners on the specified layer.\n\t *\n\t * @constructor\n\t * @param {Element} layer The layer to listen on\n\t * @param {Object} [options={}] The options to override the defaults\n\t */\n\tfunction FastClick(layer, options) {\n\t\tvar oldOnClick;\n\n\t\toptions = options || {};\n\n\t\t/**\n\t\t * Whether a click is currently being tracked.\n\t\t *\n\t\t * @type boolean\n\t\t */\n\t\tthis.trackingClick = false;\n\n\n\t\t/**\n\t\t * Timestamp for when click tracking started.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.trackingClickStart = 0;\n\n\n\t\t/**\n\t\t * The element being tracked for a click.\n\t\t *\n\t\t * @type EventTarget\n\t\t */\n\t\tthis.targetElement = null;\n\n\n\t\t/**\n\t\t * X-coordinate of touch start event.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchStartX = 0;\n\n\n\t\t/**\n\t\t * Y-coordinate of touch start event.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchStartY = 0;\n\n\n\t\t/**\n\t\t * ID of the last touch, retrieved from Touch.identifier.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.lastTouchIdentifier = 0;\n\n\n\t\t/**\n\t\t * Touchmove boundary, beyond which a click will be cancelled.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchBoundary = options.touchBoundary || 10;\n\n\n\t\t/**\n\t\t * The FastClick layer.\n\t\t *\n\t\t * @type Element\n\t\t */\n\t\tthis.layer = layer;\n\n\t\t/**\n\t\t * The minimum time between tap(touchstart and touchend) events\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.tapDelay = options.tapDelay || 200;\n\n\t\t/**\n\t\t * The maximum time for a tap\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.tapTimeout = options.tapTimeout || 700;\n\n\t\tif (FastClick.notNeeded(layer)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Some old versions of Android don't have Function.prototype.bind\n\t\tfunction bind(method, context) {\n\t\t\treturn function() { return method.apply(context, arguments); };\n\t\t}\n\n\n\t\tvar methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];\n\t\tvar context = this;\n\t\tfor (var i = 0, l = methods.length; i < l; i++) {\n\t\t\tcontext[methods[i]] = bind(context[methods[i]], context);\n\t\t}\n\n\t\t// Set up event handlers as required\n\t\tif (deviceIsAndroid) {\n\t\t\tlayer.addEventListener('mouseover', this.onMouse, true);\n\t\t\tlayer.addEventListener('mousedown', this.onMouse, true);\n\t\t\tlayer.addEventListener('mouseup', this.onMouse, true);\n\t\t}\n\n\t\tlayer.addEventListener('click', this.onClick, true);\n\t\tlayer.addEventListener('touchstart', this.onTouchStart, false);\n\t\tlayer.addEventListener('touchmove', this.onTouchMove, false);\n\t\tlayer.addEventListener('touchend', this.onTouchEnd, false);\n\t\tlayer.addEventListener('touchcancel', this.onTouchCancel, false);\n\n\t\t// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n\t\t// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick\n\t\t// layer when they are cancelled.\n\t\tif (!Event.prototype.stopImmediatePropagation) {\n\t\t\tlayer.removeEventListener = function(type, callback, capture) {\n\t\t\t\tvar rmv = Node.prototype.removeEventListener;\n\t\t\t\tif (type === 'click') {\n\t\t\t\t\trmv.call(layer, type, callback.hijacked || callback, capture);\n\t\t\t\t} else {\n\t\t\t\t\trmv.call(layer, type, callback, capture);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlayer.addEventListener = function(type, callback, capture) {\n\t\t\t\tvar adv = Node.prototype.addEventListener;\n\t\t\t\tif (type === 'click') {\n\t\t\t\t\tadv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {\n\t\t\t\t\t\tif (!event.propagationStopped) {\n\t\t\t\t\t\t\tcallback(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}), capture);\n\t\t\t\t} else {\n\t\t\t\t\tadv.call(layer, type, callback, capture);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// If a handler is already declared in the element's onclick attribute, it will be fired before\n\t\t// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and\n\t\t// adding it as listener.\n\t\tif (typeof layer.onclick === 'function') {\n\n\t\t\t// Android browser on at least 3.2 requires a new reference to the function in layer.onclick\n\t\t\t// - the old one won't work if passed to addEventListener directly.\n\t\t\toldOnClick = layer.onclick;\n\t\t\tlayer.addEventListener('click', function(event) {\n\t\t\t\toldOnClick(event);\n\t\t\t}, false);\n\t\t\tlayer.onclick = null;\n\t\t}\n\t}\n\n\t/**\n\t* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.\n\t*\n\t* @type boolean\n\t*/\n\tvar deviceIsWindowsPhone = navigator.userAgent.indexOf(\"Windows Phone\") >= 0;\n\n\t/**\n\t * Android requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;\n\n\n\t/**\n\t * iOS requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;\n\n\n\t/**\n\t * iOS 4 requires an exception for select elements.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOS4 = deviceIsIOS && (/OS 4_\\d(_\\d)?/).test(navigator.userAgent);\n\n\n\t/**\n\t * iOS 6.0-7.* requires the target element to be manually derived\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOSWithBadTarget = deviceIsIOS && (/OS [6-7]_\\d/).test(navigator.userAgent);\n\n\t/**\n\t * BlackBerry requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;\n\n\t/**\n\t * Determine whether a given element requires a native click.\n\t *\n\t * @param {EventTarget|Element} target Target DOM element\n\t * @returns {boolean} Returns true if the element needs a native click\n\t */\n\tFastClick.prototype.needsClick = function(target) {\n\t\tswitch (target.nodeName.toLowerCase()) {\n\n\t\t// Don't send a synthetic click to disabled inputs (issue #62)\n\t\tcase 'button':\n\t\tcase 'select':\n\t\tcase 'textarea':\n\t\t\tif (target.disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'input':\n\n\t\t\t// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)\n\t\t\tif ((deviceIsIOS && target.type === 'file') || target.disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'label':\n\t\tcase 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames\n\t\tcase 'video':\n\t\t\treturn true;\n\t\t}\n\n\t\treturn (/\\bneedsclick\\b/).test(target.className);\n\t};\n\n\n\t/**\n\t * Determine whether a given element requires a call to focus to simulate click into element.\n\t *\n\t * @param {EventTarget|Element} target Target DOM element\n\t * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.\n\t */\n\tFastClick.prototype.needsFocus = function(target) {\n\t\tswitch (target.nodeName.toLowerCase()) {\n\t\tcase 'textarea':\n\t\t\treturn true;\n\t\tcase 'select':\n\t\t\treturn !deviceIsAndroid;\n\t\tcase 'input':\n\t\t\tswitch (target.type) {\n\t\t\tcase 'button':\n\t\t\tcase 'checkbox':\n\t\t\tcase 'file':\n\t\t\tcase 'image':\n\t\t\tcase 'radio':\n\t\t\tcase 'submit':\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// No point in attempting to focus disabled inputs\n\t\t\treturn !target.disabled && !target.readOnly;\n\t\tdefault:\n\t\t\treturn (/\\bneedsfocus\\b/).test(target.className);\n\t\t}\n\t};\n\n\n\t/**\n\t * Send a click event to the specified element.\n\t *\n\t * @param {EventTarget|Element} targetElement\n\t * @param {Event} event\n\t */\n\tFastClick.prototype.sendClick = function(targetElement, event) {\n\t\tvar clickEvent, touch;\n\n\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)\n\t\tif (document.activeElement && document.activeElement !== targetElement) {\n\t\t\tdocument.activeElement.blur();\n\t\t}\n\n\t\ttouch = event.changedTouches[0];\n\n\t\t// Synthesise a click event, with an extra attribute so it can be tracked\n\t\tclickEvent = document.createEvent('MouseEvents');\n\t\tclickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n\t\tclickEvent.forwardedTouchEvent = true;\n\t\ttargetElement.dispatchEvent(clickEvent);\n\t};\n\n\tFastClick.prototype.determineEventType = function(targetElement) {\n\n\t\t//Issue #159: Android Chrome Select Box does not open with a synthetic click event\n\t\tif (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {\n\t\t\treturn 'mousedown';\n\t\t}\n\n\t\treturn 'click';\n\t};\n\n\n\t/**\n\t * @param {EventTarget|Element} targetElement\n\t */\n\tFastClick.prototype.focus = function(targetElement) {\n\t\tvar length;\n\n\t\t// Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.\n\t\tif (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {\n\t\t\tlength = targetElement.value.length;\n\t\t\ttargetElement.setSelectionRange(length, length);\n\t\t} else {\n\t\t\ttargetElement.focus();\n\t\t}\n\t};\n\n\n\t/**\n\t * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.\n\t *\n\t * @param {EventTarget|Element} targetElement\n\t */\n\tFastClick.prototype.updateScrollParent = function(targetElement) {\n\t\tvar scrollParent, parentElement;\n\n\t\tscrollParent = targetElement.fastClickScrollParent;\n\n\t\t// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the\n\t\t// target element was moved to another parent.\n\t\tif (!scrollParent || !scrollParent.contains(targetElement)) {\n\t\t\tparentElement = targetElement;\n\t\t\tdo {\n\t\t\t\tif (parentElement.scrollHeight > parentElement.offsetHeight) {\n\t\t\t\t\tscrollParent = parentElement;\n\t\t\t\t\ttargetElement.fastClickScrollParent = parentElement;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tparentElement = parentElement.parentElement;\n\t\t\t} while (parentElement);\n\t\t}\n\n\t\t// Always update the scroll top tracker if possible.\n\t\tif (scrollParent) {\n\t\t\tscrollParent.fastClickLastScrollTop = scrollParent.scrollTop;\n\t\t}\n\t};\n\n\n\t/**\n\t * @param {EventTarget} targetElement\n\t * @returns {Element|EventTarget}\n\t */\n\tFastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {\n\n\t\t// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.\n\t\tif (eventTarget.nodeType === Node.TEXT_NODE) {\n\t\t\treturn eventTarget.parentNode;\n\t\t}\n\n\t\treturn eventTarget;\n\t};\n\n\n\t/**\n\t * On touch start, record the position and scroll offset.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchStart = function(event) {\n\t\tvar targetElement, touch, selection;\n\n\t\t// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).\n\t\tif (event.targetTouches.length > 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\ttargetElement = this.getTargetElementFromEventTarget(event.target);\n\t\ttouch = event.targetTouches[0];\n\n\t\tif (deviceIsIOS) {\n\n\t\t\t// Only trusted events will deselect text on iOS (issue #49)\n\t\t\tselection = window.getSelection();\n\t\t\tif (selection.rangeCount && !selection.isCollapsed) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!deviceIsIOS4) {\n\n\t\t\t\t// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):\n\t\t\t\t// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched\n\t\t\t\t// with the same identifier as the touch event that previously triggered the click that triggered the alert.\n\t\t\t\t// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an\n\t\t\t\t// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.\n\t\t\t\t// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,\n\t\t\t\t// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,\n\t\t\t\t// random integers, it's safe to to continue if the identifier is 0 here.\n\t\t\t\tif (touch.identifier && touch.identifier === this.lastTouchIdentifier) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.lastTouchIdentifier = touch.identifier;\n\n\t\t\t\t// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:\n\t\t\t\t// 1) the user does a fling scroll on the scrollable layer\n\t\t\t\t// 2) the user stops the fling scroll with another tap\n\t\t\t\t// then the event.target of the last 'touchend' event will be the element that was under the user's finger\n\t\t\t\t// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check\n\t\t\t\t// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).\n\t\t\t\tthis.updateScrollParent(targetElement);\n\t\t\t}\n\t\t}\n\n\t\tthis.trackingClick = true;\n\t\tthis.trackingClickStart = event.timeStamp;\n\t\tthis.targetElement = targetElement;\n\n\t\tthis.touchStartX = touch.pageX;\n\t\tthis.touchStartY = touch.pageY;\n\n\t\t// Prevent phantom clicks on fast double-tap (issue #36)\n\t\tif ((event.timeStamp - this.lastClickTime) < this.tapDelay) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.touchHasMoved = function(event) {\n\t\tvar touch = event.changedTouches[0], boundary = this.touchBoundary;\n\n\t\tif (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * Update the last position.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchMove = function(event) {\n\t\tif (!this.trackingClick) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If the touch has moved, cancel the click tracking\n\t\tif (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {\n\t\t\tthis.trackingClick = false;\n\t\t\tthis.targetElement = null;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * Attempt to find the labelled control for the given label element.\n\t *\n\t * @param {EventTarget|HTMLLabelElement} labelElement\n\t * @returns {Element|null}\n\t */\n\tFastClick.prototype.findControl = function(labelElement) {\n\n\t\t// Fast path for newer browsers supporting the HTML5 control attribute\n\t\tif (labelElement.control !== undefined) {\n\t\t\treturn labelElement.control;\n\t\t}\n\n\t\t// All browsers under test that support touch events also support the HTML5 htmlFor attribute\n\t\tif (labelElement.htmlFor) {\n\t\t\treturn document.getElementById(labelElement.htmlFor);\n\t\t}\n\n\t\t// If no for attribute exists, attempt to retrieve the first labellable descendant element\n\t\t// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label\n\t\treturn labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');\n\t};\n\n\n\t/**\n\t * On touch end, determine whether to send a click event at once.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchEnd = function(event) {\n\t\tvar forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;\n\n\t\tif (!this.trackingClick) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Prevent phantom clicks on fast double-tap (issue #36)\n\t\tif ((event.timeStamp - this.lastClickTime) < this.tapDelay) {\n\t\t\tthis.cancelNextClick = true;\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Reset to prevent wrong click cancel on input (issue #156).\n\t\tthis.cancelNextClick = false;\n\n\t\tthis.lastClickTime = event.timeStamp;\n\n\t\ttrackingClickStart = this.trackingClickStart;\n\t\tthis.trackingClick = false;\n\t\tthis.trackingClickStart = 0;\n\n\t\t// On some iOS devices, the targetElement supplied with the event is invalid if the layer\n\t\t// is performing a transition or scroll, and has to be re-detected manually. Note that\n\t\t// for this to function correctly, it must be called *after* the event target is checked!\n\t\t// See issue #57; also filed as rdar://13048589 .\n\t\tif (deviceIsIOSWithBadTarget) {\n\t\t\ttouch = event.changedTouches[0];\n\n\t\t\t// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null\n\t\t\ttargetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;\n\t\t\ttargetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;\n\t\t}\n\n\t\ttargetTagName = targetElement.tagName.toLowerCase();\n\t\tif (targetTagName === 'label') {\n\t\t\tforElement = this.findControl(targetElement);\n\t\t\tif (forElement) {\n\t\t\t\tthis.focus(targetElement);\n\t\t\t\tif (deviceIsAndroid) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ttargetElement = forElement;\n\t\t\t}\n\t\t} else if (this.needsFocus(targetElement)) {\n\n\t\t\t// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.\n\t\t\t// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).\n\t\t\tif ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {\n\t\t\t\tthis.targetElement = null;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.focus(targetElement);\n\t\t\tthis.sendClick(targetElement, event);\n\n\t\t\t// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.\n\t\t\t// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)\n\t\t\tif (!deviceIsIOS || targetTagName !== 'select') {\n\t\t\t\tthis.targetElement = null;\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (deviceIsIOS && !deviceIsIOS4) {\n\n\t\t\t// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled\n\t\t\t// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).\n\t\t\tscrollParent = targetElement.fastClickScrollParent;\n\t\t\tif (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Prevent the actual click from going though - unless the target node is marked as requiring\n\t\t// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.\n\t\tif (!this.needsClick(targetElement)) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendClick(targetElement, event);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * On touch cancel, stop tracking the click.\n\t *\n\t * @returns {void}\n\t */\n\tFastClick.prototype.onTouchCancel = function() {\n\t\tthis.trackingClick = false;\n\t\tthis.targetElement = null;\n\t};\n\n\n\t/**\n\t * Determine mouse events which should be permitted.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onMouse = function(event) {\n\n\t\t// If a target element was never set (because a touch event was never fired) allow the event\n\t\tif (!this.targetElement) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (event.forwardedTouchEvent) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Programmatically generated events targeting a specific element should be permitted\n\t\tif (!event.cancelable) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Derive and check the target element to see whether the mouse event needs to be permitted;\n\t\t// unless explicitly enabled, prevent non-touch click events from triggering actions,\n\t\t// to prevent ghost/doubleclicks.\n\t\tif (!this.needsClick(this.targetElement) || this.cancelNextClick) {\n\n\t\t\t// Prevent any user-added listeners declared on FastClick element from being fired.\n\t\t\tif (event.stopImmediatePropagation) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t} else {\n\n\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n\t\t\t\tevent.propagationStopped = true;\n\t\t\t}\n\n\t\t\t// Cancel the event\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// If the mouse event is permitted, return true for the action to go through.\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * On actual clicks, determine whether this is a touch-generated click, a click action occurring\n\t * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or\n\t * an actual click which should be permitted.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onClick = function(event) {\n\t\tvar permitted;\n\n\t\t// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.\n\t\tif (this.trackingClick) {\n\t\t\tthis.targetElement = null;\n\t\t\tthis.trackingClick = false;\n\t\t\treturn true;\n\t\t}\n\n\t\t// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.\n\t\tif (event.target.type === 'submit' && event.detail === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tpermitted = this.onMouse(event);\n\n\t\t// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.\n\t\tif (!permitted) {\n\t\t\tthis.targetElement = null;\n\t\t}\n\n\t\t// If clicks are permitted, return true for the action to go through.\n\t\treturn permitted;\n\t};\n\n\n\t/**\n\t * Remove all FastClick's event listeners.\n\t *\n\t * @returns {void}\n\t */\n\tFastClick.prototype.destroy = function() {\n\t\tvar layer = this.layer;\n\n\t\tif (deviceIsAndroid) {\n\t\t\tlayer.removeEventListener('mouseover', this.onMouse, true);\n\t\t\tlayer.removeEventListener('mousedown', this.onMouse, true);\n\t\t\tlayer.removeEventListener('mouseup', this.onMouse, true);\n\t\t}\n\n\t\tlayer.removeEventListener('click', this.onClick, true);\n\t\tlayer.removeEventListener('touchstart', this.onTouchStart, false);\n\t\tlayer.removeEventListener('touchmove', this.onTouchMove, false);\n\t\tlayer.removeEventListener('touchend', this.onTouchEnd, false);\n\t\tlayer.removeEventListener('touchcancel', this.onTouchCancel, false);\n\t};\n\n\n\t/**\n\t * Check whether FastClick is needed.\n\t *\n\t * @param {Element} layer The layer to listen on\n\t */\n\tFastClick.notNeeded = function(layer) {\n\t\tvar metaViewport;\n\t\tvar chromeVersion;\n\t\tvar blackberryVersion;\n\t\tvar firefoxVersion;\n\n\t\t// Devices that don't support touch don't need FastClick\n\t\tif (typeof window.ontouchstart === 'undefined') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Chrome version - zero for other browsers\n\t\tchromeVersion = +(/Chrome\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\n\n\t\tif (chromeVersion) {\n\n\t\t\tif (deviceIsAndroid) {\n\t\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\n\t\t\t\tif (metaViewport) {\n\t\t\t\t\t// Chrome on Android with user-scalable=\"no\" doesn't need FastClick (issue #89)\n\t\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Chrome 32 and above with width=device-width or less don't need FastClick\n\t\t\t\t\tif (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Chrome desktop doesn't need FastClick (issue #15)\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (deviceIsBlackBerry10) {\n\t\t\tblackberryVersion = navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/);\n\n\t\t\t// BlackBerry 10.3+ does not require Fastclick library.\n\t\t\t// https://github.com/ftlabs/fastclick/issues/251\n\t\t\tif (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {\n\t\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\n\t\t\t\tif (metaViewport) {\n\t\t\t\t\t// user-scalable=no eliminates click delay.\n\t\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// width=device-width (or less than device-width) eliminates click delay.\n\t\t\t\t\tif (document.documentElement.scrollWidth <= window.outerWidth) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)\n\t\tif (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Firefox version - zero for other browsers\n\t\tfirefoxVersion = +(/Firefox\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\n\n\t\tif (firefoxVersion >= 27) {\n\t\t\t// Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896\n\n\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\t\t\tif (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version\n\t\t// http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx\n\t\tif (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * Factory method for creating a FastClick object\n\t *\n\t * @param {Element} layer The layer to listen on\n\t * @param {Object} [options={}] The options to override the defaults\n\t */\n\tFastClick.attach = function(layer, options) {\n\t\treturn new FastClick(layer, options);\n\t};\n\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(function() {\n\t\t\treturn FastClick;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = FastClick.attach;\n\t\tmodule.exports.FastClick = FastClick;\n\t} else {\n\t\twindow.FastClick = FastClick;\n\t}\n}());\n","import * as utils from '../utils.js';\n\nclass Header {\n\n  constructor(el) {\n\n    //console.log('initHeader');\n\n\t  this.DOM = {};\n\t  this.DOM.el = el;\n\t  this.DOM.body = document.body;\n\t  this.DOM.brand = this.DOM.el.querySelector('.brand');\n    this.DOM.toggleOpen = this.DOM.el.querySelector('.toggle__menu__open');\n\t  this.DOM.toggleClose = this.DOM.el.querySelector('.toggle__menu__close');\n    this.DOM.menuContainer = this.DOM.el.querySelector('nav');\n    this.menuOpen = false;\n\n\t  this.init();\n\n  }\n\n  init() {\n\n    //animation Open\n    const menuOpenTL = new TimelineMax({ paused: true});\n\n  \t//toggle\n  \tthis.DOM.toggleOpen.addEventListener('click',(e) => {\n\n  \t\te.preventDefault();\n  \t\tthis.DOM.body.classList.toggle('showMenu');\n\n      //if Openning\n  \t\tif ( this.DOM.body.classList.contains('showMenu') ) {\n\n        this.menuOpen = true;\n        this.DOM.body.style.overflow = \"hidden\";\n        this.DOM.menuContainer.style.visibility = \"visible\";\n\n        //Animation\n        menuOpenTL.totalDuration(2).restart();\n\n  \t\t} else {\n\n        this.menuOpen = false;\n\n        //Animation Reverse\n        menuOpenTL.totalDuration(1).reverse();\n\n        this.DOM.body.style.overflow = \"auto\";\n        this.DOM.menuContainer.style.visibility = \"hidden\";\n\n  \t\t}\n\n  \t});\n\n    //toggle\n    this.DOM.toggleClose.addEventListener('click',(e) => {\n\n      e.preventDefault();\n      this.DOM.body.classList.toggle('showMenu');\n\n      //if Openning\n      if ( this.DOM.body.classList.contains('showMenu') ) {\n\n        this.menuOpen = true;\n        this.DOM.body.style.overflow = \"hidden\";\n        this.DOM.menuContainer.style.visibility = \"visible\";\n\n        //Animation\n        menuOpenTL.totalDuration(2).restart();\n\n      } else {\n\n        this.menuOpen = false;\n\n        //Animation Reverse\n        menuOpenTL.totalDuration(1).reverse();\n\n        this.DOM.body.style.overflow = \"auto\";\n        this.DOM.menuContainer.style.visibility = \"hidden\";\n\n      }\n\n    });\n\n\n    // Links Click\n    const links = this.DOM.menuContainer.querySelectorAll('.nav__link')\n    links.forEach((elem) => {\n\n      elem.addEventListener('click',(e)=> {\n        if ( this.DOM.menuContainer.querySelector('.active') != null ) {\n           this.DOM.menuContainer.querySelector('.active').classList.remove('active');\n        }\n        e.currentTarget.parentNode.classList.add('active');\n      })\n\n    });\n\n    // Brand Click\n    this.DOM.brand.addEventListener('click',(e)=> {\n\n      if ( this.DOM.menuContainer.querySelector('.active') != null ) {\n         this.DOM.menuContainer.querySelector('.active').classList.remove('active');\n      }\n\n    })\n\n  }\n\n}\n\nexport default Header;\n","import 'nodelist-foreach-polyfill'\nimport FastClick from 'fastclick';\nimport * as utils from './utils.js';\n\nimport Header from './modules/header.js';\n\nimport {initHome} from './pages/home.js';\nimport {initPage} from './pages/page.js';\n\nclass App {\n\n  constructor(opt = {}) {\n\n    //Declarations\n    this.sy = 0;\n    this.devMode = true;\n    this.DOM = {};\n    this.DOM.body = document.body;\n    this.DOM.footer = document.querySelector('footer');\n    this.DOM.barbaWrapper = document.querySelector('#barba-wrapper');\n\n    //Signature Wokine\n    window.scrollTo(0,0)\n    console.log(\"%cCreated by Wokine, with ❤\",\"color: #000; padding: 5px 0px 1px; border-bottom:2px solid #71d1c2;\"),console.log(\"%chttp://wokine.com\",\"color:#ccc\")\n\n    this.init();\n    this.addEvents();\n    this.intro();\n\n  }\n\n  init() {\n\n    //DevMode ( infos navigateur )\n    if (this.devMode) {\n  \t\tconsole.log('DEVMODE BIATCH');\n      console.log(window.Sniff);\n    }\n\n    //Resets\n    FastClick(this.DOM.body);\n    this.DOM.body.scrollTop = document.documentElement.scrollTop = 0;\n    history.scrollRestoration = 'manual';\n\n    // Create Header\n  \tconst header = new Header(document.querySelector('body > header'));\n\n    //Barba\n    Barba.Dispatcher.on('newPageReady', (currentStatus, oldStatus, container) => {\n\n      // newPageReady\n\n      // Animations\n      if (!window.Sniff.features.mobile) {\n        this.initPrllx(container);\n        this.initInView(container);\n      }\n\n    });\n\n    Barba.Dispatcher.on('linkClicked', (HTMLElement, MouseEvent) => {\n\n      //linkClicked\n\n    })\n\n    Barba.Dispatcher.on('initStateChange', function() {\n\n      //initStateChange\n  \t\tif (typeof ga === 'function') {\n  \t\t\tga('send', 'pageview', location.pathname);\n  \t\t}\n\n  \t});\n\n    var pageTransition = Barba.BaseTransition.extend({\n\n  \t\tstart: function() {\n\n  \t\t  Promise.all([this.newContainerLoading, this.transitionOut()])\n  \t\t  .then(this.transitionIn.bind(this));\n\n  \t\t},\n\n  \t\ttransitionOut: function() {\n\n  \t\t\tlet deferred = Barba.Utils.deferred();\n  \t\t\tlet oldContainer = this.oldContainer;\n\n\t\t\t  const pageOut = new TimelineMax({ paused:true, onComplete:()=>{\n\n          //Close Menu if Open\n          if(header.menuOpen){\n            var click = new Event('click');\n            header.DOM.toggleClose.dispatchEvent(click);\n          }\n\n          window.scrollTo(0,0);\n\t\t\t\t  deferred.resolve();\n\n\t\t\t  }});\n\n        pageOut.to(oldContainer, 0.8, {opacity:0, ease:Power3.easeOut}, 0);\n        pageOut.play();\n\n  \t\t\treturn deferred.promise;\n\n  \t\t},\n\n  \t\ttransitionIn: function() {\n\n  \t\t\tvar _this = this;\n\n  \t\t\tthis.oldContainer.style.display = \"none\";\n  \t\t\tthis.newContainer.style.visibility = 'visible';\n\n\t\t    const pageIn = new TimelineMax({ paused:true, onComplete:()=>{\n\t\t\t\t\t_this.done();\n\t\t\t\t}})\n\n        pageIn.from(this.newContainer, 1.2, {opacity:0, ease:Power3.easeOut}, 0);\n        pageIn.play();\n\n  \t\t}\n\n  \t});\n\n  \tBarba.Pjax.getTransition = function() {\n  \t  return pageTransition;\n  \t};\n\n  \t//routes\n  \tinitHome();\n  \tinitPage();\n\n    Barba.Pjax.start();\n\n  }\n\n  addEvents() {\n\n    window.addEventListener('scroll', (e) => {\n  \t\tthis.sy = window.pageYOffset || document.documentElement.scrollTop;\n  \t})\n\n  }\n\n  initPrllx(container) {\n\n\t  const TLPrllxs = []\n\t  const prllxs = container.querySelectorAll('*[data-prllx]');\n\t  prllxs.forEach((item) => {\n\n\t\t    let prllxTL = new TimelineMax({ paused: true});\n        TweenMax.set(item, { y: -1 * item.getAttribute('data-prllx') });\n  \t    prllxTL.to(item, 1, { y:item.getAttribute('data-prllx'), overwrite:\"all\", ease:Power0.easeNone });\n\t\t    TLPrllxs.push(prllxTL);\n\n\t  });\n\n\t  var prllxRender = function (){\n\n\t    prllxs.forEach((item, index) => {\n        let from = item.getBoundingClientRect().top + this.sy - window.innerHeight ;\n\t      let norm = utils.clamp(utils.normalize(sy,  from ,  item.getBoundingClientRect().top + this.sy + item.offsetHeight), 0, 1);\n\t\t    TLPrllxs[index].progress(norm);\n\t    });\n\n\t  }\n\n\t  TweenMax.ticker.addEventListener(\"tick\", prllxRender, this, true, 1);\n\n  }\n\n  initInView(container) {\n\n\n    //fadeIn\n    const fadeInElems = container.querySelectorAll('.fadeInView');\n\n    if (fadeInElems) {\n      fadeInElems.forEach((elem) => {\n        elem.fadeInTL = new TimelineMax({ paused: true});\n        elem.fadeInTL.from(elem, 1, {y:80, opacity:0, ease:Power3.easeOut}, 0);\n      })\n\n      inView(\"main .fadeInView\").on('enter', el => {\n        if(!el.done)  el.fadeInTL.duration(animationDuration).play();\n      }).on('exit', el => {\n        el.done = true;\n        //el.fadeInTL.duration(0.2).reverse();\n      });\n\n    }\n\n    //letterIn\n    const lettersInElems = container.querySelectorAll('.lettersInView');\n    if (lettersInElems) {\n\n      lettersInElems.forEach((elem) => {\n        elem.splitLetters = new SplitText(elem, {type:\"chars\"});\n        elem.lettersInTL = new TimelineMax({ paused: true});\n        elem.lettersInTL.staggerFrom(elem.splitLetters.chars, 1, {y:20, opacity:0, ease:Power3.easeOut}, 0.015, 0);\n      })\n\n      inView(\"main .lettersInView\").on('enter', el => {\n        if(!el.done)  el.lettersInTL.duration(animationDuration).play();\n      }).on('exit', el => {\n        el.done = true;\n        el.innerHTML = el.splitLetters._originals;\n        //el.lettersInTL.duration(0.2).reverse();\n      });\n\n    }\n\n    //linesIn\n    const linesInElems = container.querySelectorAll('.linesInView');\n    if (linesInElems) {\n\n      linesInElems.forEach((elem) => {\n        elem.splitLines = new SplitText(elem, {type:\"lines\"});\n        elem.linesInTL = new TimelineMax({ paused: true});\n        elem.linesInTL.staggerFrom(elem.splitLines.lines, 1, {y:20, opacity:0, ease:Power3.easeOut}, 0.05, 0.2);\n      })\n\n      inView(\"main .linesInView\").on('enter', el => {\n        if(!el.done)  el.linesInTL.duration(animationDuration * 1.5).play();\n      }).on('exit', el => {\n        el.done = true;\n        el.innerHTML = el.splitLines._originals;\n        //el.linesInTL.duration(0.2).reverse();\n      });\n\n    }\n\n    inView.offset({\n        top: -120,\n        left:-50,\n        right:-50,\n        bottom: 0,\n    });\n\n  }\n\n  intro() {\n\n    const intro = new TimelineMax({ paused:true, onStart:()=>{\n      this.DOM.body.classList.remove('is-loading');\n    }})\n\n    intro.from(this.DOM.body, 1.2, {opacity:0, ease:Power3.easeOut}, 0.3)\n    intro.play();\n\n  }\n\n}\n\nconst app = new App();\n"],"names":["normalize","value","min","max","clamp","initHome","Barba","BaseView","extend","init","initPage","window","NodeList","prototype","forEach","callback","thisArg","i","this","length","call","FastClick","layer","options","oldOnClick","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","tapDelay","tapTimeout","notNeeded","methods","context","l","method","apply","arguments","bind","deviceIsAndroid","addEventListener","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","Event","stopImmediatePropagation","removeEventListener","type","capture","rmv","Node","hijacked","adv","event","propagationStopped","onclick","deviceIsWindowsPhone","navigator","userAgent","indexOf","deviceIsIOS","test","deviceIsIOS4","deviceIsIOSWithBadTarget","deviceIsBlackBerry10","needsClick","target","nodeName","toLowerCase","disabled","className","needsFocus","readOnly","sendClick","clickEvent","touch","document","activeElement","blur","changedTouches","createEvent","initMouseEvent","determineEventType","screenX","screenY","clientX","clientY","forwardedTouchEvent","dispatchEvent","tagName","focus","setSelectionRange","updateScrollParent","scrollParent","parentElement","fastClickScrollParent","contains","scrollHeight","offsetHeight","fastClickLastScrollTop","scrollTop","getTargetElementFromEventTarget","eventTarget","nodeType","TEXT_NODE","parentNode","selection","targetTouches","getSelection","rangeCount","isCollapsed","identifier","preventDefault","timeStamp","pageX","pageY","lastClickTime","touchHasMoved","boundary","Math","abs","findControl","labelElement","undefined","control","htmlFor","getElementById","querySelector","forElement","targetTagName","cancelNextClick","elementFromPoint","pageXOffset","pageYOffset","top","cancelable","stopPropagation","permitted","detail","destroy","metaViewport","chromeVersion","blackberryVersion","ontouchstart","exec","content","documentElement","scrollWidth","outerWidth","match","style","msTouchAction","touchAction","attach","module","exports","Header","el","DOM","body","brand","toggleOpen","toggleClose","menuContainer","menuOpen","menuOpenTL","TimelineMax","paused","e","classList","toggle","_this","overflow","visibility","totalDuration","restart","reverse","querySelectorAll","elem","remove","currentTarget","add","sy","devMode","footer","barbaWrapper","scrollTo","log","console","addEvents","intro","Sniff","scrollRestoration","header","Dispatcher","on","currentStatus","oldStatus","container","features","mobile","initPrllx","initInView","HTMLElement","MouseEvent","ga","location","pathname","pageTransition","BaseTransition","all","newContainerLoading","transitionOut","then","transitionIn","deferred","Utils","oldContainer","pageOut","onComplete","click","resolve","to","opacity","ease","Power3","easeOut","play","promise","display","newContainer","pageIn","done","from","Pjax","getTransition","start","TLPrllxs","prllxs","item","prllxTL","set","y","getAttribute","overwrite","Power0","easeNone","push","ticker","index","getBoundingClientRect","_this4","innerHeight","norm","utils","progress","fadeInElems","fadeInTL","duration","animationDuration","lettersInElems","splitLetters","SplitText","lettersInTL","staggerFrom","chars","innerHTML","_originals","linesInElems","splitLines","linesInTL","lines","offset","onStart"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL3N0YXJ0ZXItdGhlbWUtdGltYmVyL2Fzc2V0cy9qcy91dGlscy5qcyIsIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL3N0YXJ0ZXItdGhlbWUtdGltYmVyL2Fzc2V0cy9qcy9wYWdlcy9ob21lLmpzIiwiL1ZvbHVtZXMvTWFjaW50b3NoIEhEL0Ryb3Bib3gvRG9jdW1lbnRzL0Rlc2lnbi9jb2RlL01BTVAvaHRkb2NzL2Rldi13b2tpbmUvc3RhcnRlci10aGVtZS10aW1iZXIvYXNzZXRzL2pzL3BhZ2VzL3BhZ2UuanMiLCIvVm9sdW1lcy9NYWNpbnRvc2ggSEQvRHJvcGJveC9Eb2N1bWVudHMvRGVzaWduL2NvZGUvTUFNUC9odGRvY3MvZGV2LXdva2luZS9ub2RlX21vZHVsZXMvbm9kZWxpc3QtZm9yZWFjaC1wb2x5ZmlsbC9pbmRleC5qcyIsIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL25vZGVfbW9kdWxlcy9mYXN0Y2xpY2svbGliL2Zhc3RjbGljay5qcyIsIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL3N0YXJ0ZXItdGhlbWUtdGltYmVyL2Fzc2V0cy9qcy9tb2R1bGVzL2hlYWRlci5qcyIsIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL3N0YXJ0ZXItdGhlbWUtdGltYmVyL2Fzc2V0cy9qcy9hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIG9uTG9hZGVkTWV0YWRhdGEoZSkge1xuXG4gIGNvbnN0IHZpZGVvID0gJChlLnRhcmdldCk7XG4gIGxldCBhc3BlY3RSYXRpbyA9IHZpZGVvLmRhdGEoJ2FzcGVjdFJhdGlvJyk7XG4gIGlmIChhc3BlY3RSYXRpbyA9PSB1bmRlZmluZWQpIHtcbiAgICAgIGFzcGVjdFJhdGlvID0gdmlkZW8ud2lkdGgoKSAvIHZpZGVvLmhlaWdodCgpO1xuICAgICAgdmlkZW8uZGF0YSgnYXNwZWN0UmF0aW8nLCBhc3BlY3RSYXRpbyk7XG4gIH1cbiAgcmVzaXplVmlkZW8odmlkZW8pO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNpemVWaWRlbyh2aWRlbykge1xuXG4gIGxldCBuZXdXaWR0aDtcbiAgbGV0IG5ld0hlaWdodDtcbiAgbGV0IHZpZGVvUmF0aW8gPSB2aWRlby5kYXRhKCdhc3BlY3RSYXRpbycpO1xuICBpZiAodmlkZW9SYXRpbyA9PSB1bmRlZmluZWQpIHZpZGVvUmF0aW8gPSAxLjc3Nzc3Nzc7XG4gIGxldCBwYXJlbnRXaWR0aCAgPSB2aWRlby5wYXJlbnQoKS53aWR0aCgpO1xuICBsZXQgcGFyZW50SGVpZ2h0ID0gdmlkZW8ucGFyZW50KCkuaGVpZ2h0KCk7XG4gIGxldCBwYXJlbnRSYXRpbyA9IHBhcmVudFdpZHRoIC8gcGFyZW50SGVpZ2h0O1xuXG4gIGlmIChwYXJlbnRSYXRpbyA+IHZpZGVvUmF0aW8gJiYgIXZpZGVvLmhhc0NsYXNzKCdiZ1dpZHRoJykpIHtcbiAgICB2aWRlby5yZW1vdmVDbGFzcyhcImJnSGVpZ2h0XCIpO1xuICAgIHZpZGVvLmFkZENsYXNzKFwiYmdXaWR0aFwiKTtcbiAgfVxuICBpZiAocGFyZW50UmF0aW8gPD0gdmlkZW9SYXRpbyAmJiAhdmlkZW8uaGFzQ2xhc3MoJ2JnSGVpZ2h0JykpIHtcbiAgICB2aWRlby5yZW1vdmVDbGFzcyhcImJnV2lkdGhcIik7XG4gICAgdmlkZW8uYWRkQ2xhc3MoXCJiZ0hlaWdodFwiKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxheShtcyl7XG4gICAgdmFyIGN0ciwgcmVqLCBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBjdHIgPSBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcbiAgICAgICAgcmVqID0gcmVqZWN0O1xuICAgIH0pO1xuICAgIHAuY2FuY2VsID0gZnVuY3Rpb24oKXsgY2xlYXJUaW1lb3V0KGN0cik7IHJlaihFcnJvcihcIkNhbmNlbGxlZFwiKSl9O1xuICAgIHJldHVybiBwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tSW50KG1pbixtYXgpwqB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoobWF4LW1pbisxKSttaW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gKHZhbHVlIC0gbWluKSAvIChtYXggLSBtaW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gIHJldHVybiB2YWx1ZSA8IG1pbiA/IG1pbiA6ICh2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpbXVsYXRlQ2xpY2soZWxlbSkge1xuXG4gICAgdmFyIGV2dCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIHtcbiAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgdmlldzogd2luZG93XG4gICAgfSk7XG5cbiAgICB2YXIgY2FuY2VsZWQgPSAhZWxlbS5kaXNwYXRjaEV2ZW50KGV2dCk7XG5cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3VzZU1vdmVmbihlKSB7XG5cbiAgbGV0IHhNb3VzZSA9IGUucGFnZVggLSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtICggZS5jdXJyZW50VGFyZ2V0Lm9mZnNldFdpZHRoIC8gMiApO1xuICBsZXQgeU1vdXNlID0gZS5wYWdlWSAtIHdpbmRvdy5wYWdlWU9mZnNldCAtIGUuY3VycmVudFRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAoIGUuY3VycmVudFRhcmdldC5vZmZzZXRIZWlnaHQgLyAyICk7XG4gIGNvbnN0IG1vdXNlRWxlbWVudHMgPSBlLmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLW1vdXNlLXBhcmFsbGF4XScpO1xuICBtb3VzZUVsZW1lbnRzLmZvckVhY2goZWxlbSA9PiB7XG4gICAgdmFyIGZhY3RvciA9IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1vdXNlLXBhcmFsbGF4Jyk7XG4gICAgbGV0IHhGaW5hbCA9IHhNb3VzZSAqIGZhY3RvcjtcbiAgICBsZXQgeUZpbmFsID0geU1vdXNlICogZmFjdG9yO1xuICAgIFR3ZWVuTWF4LnRvKGVsZW0sIDEuMiwge3g6eEZpbmFsLCB5OnlGaW5hbH0pO1xuICB9KTtcblxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGluaXRIb21lKCkge1xuXG5cdHZhciBIb21lID0gQmFyYmEuQmFzZVZpZXcuZXh0ZW5kKHtcblxuXHRcdG5hbWVzcGFjZTogJ3BhZ2UtaG9tZScsXG5cblx0XHRvbkVudGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnSW5pdCBIb21lJyk7XG5cblx0XHR9LFxuXG5cdFx0b25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24oKSB7XG5cblxuXG5cdFx0fVxuXG5cdH0pXG5cblx0SG9tZS5pbml0KCk7XG5cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBpbml0UGFnZSgpIHtcblxuXHR2YXIgUGFnZSA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG5cblx0XHRuYW1lc3BhY2U6ICdwYWdlJyxcblxuXHRcdG9uRW50ZXI6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdJbml0IFBhZ2UnKTtcblxuXHRcdH0sXG5cblx0XHRvbkxlYXZlQ29tcGxldGVkOiBmdW5jdGlvbigpIHtcblxuXG5cblx0XHR9XG5cblx0fSlcblxuXHRQYWdlLmluaXQoKTtcblxufVxuIiwiaWYgKHdpbmRvdy5Ob2RlTGlzdCAmJiAhTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcclxuICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgdGhpc0FyZyA9IHRoaXNBcmcgfHwgd2luZG93O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXNbaV0sIGksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuIiwiOyhmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0ICogQHByZXNlcnZlIEZhc3RDbGljazogcG9seWZpbGwgdG8gcmVtb3ZlIGNsaWNrIGRlbGF5cyBvbiBicm93c2VycyB3aXRoIHRvdWNoIFVJcy5cblx0ICpcblx0ICogQGNvZGluZ3N0YW5kYXJkIGZ0bGFicy1qc3YyXG5cdCAqIEBjb3B5cmlnaHQgVGhlIEZpbmFuY2lhbCBUaW1lcyBMaW1pdGVkIFtBbGwgUmlnaHRzIFJlc2VydmVkXVxuXHQgKiBAbGljZW5zZSBNSVQgTGljZW5zZSAoc2VlIExJQ0VOU0UudHh0KVxuXHQgKi9cblxuXHQvKmpzbGludCBicm93c2VyOnRydWUsIG5vZGU6dHJ1ZSovXG5cdC8qZ2xvYmFsIGRlZmluZSwgRXZlbnQsIE5vZGUqL1xuXG5cblx0LyoqXG5cdCAqIEluc3RhbnRpYXRlIGZhc3QtY2xpY2tpbmcgbGlzdGVuZXJzIG9uIHRoZSBzcGVjaWZpZWQgbGF5ZXIuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGxheWVyIFRoZSBsYXllciB0byBsaXN0ZW4gb25cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyB0byBvdmVycmlkZSB0aGUgZGVmYXVsdHNcblx0ICovXG5cdGZ1bmN0aW9uIEZhc3RDbGljayhsYXllciwgb3B0aW9ucykge1xuXHRcdHZhciBvbGRPbkNsaWNrO1xuXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHQvKipcblx0XHQgKiBXaGV0aGVyIGEgY2xpY2sgaXMgY3VycmVudGx5IGJlaW5nIHRyYWNrZWQuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSBib29sZWFuXG5cdFx0ICovXG5cdFx0dGhpcy50cmFja2luZ0NsaWNrID0gZmFsc2U7XG5cblxuXHRcdC8qKlxuXHRcdCAqIFRpbWVzdGFtcCBmb3Igd2hlbiBjbGljayB0cmFja2luZyBzdGFydGVkLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUgbnVtYmVyXG5cdFx0ICovXG5cdFx0dGhpcy50cmFja2luZ0NsaWNrU3RhcnQgPSAwO1xuXG5cblx0XHQvKipcblx0XHQgKiBUaGUgZWxlbWVudCBiZWluZyB0cmFja2VkIGZvciBhIGNsaWNrLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUgRXZlbnRUYXJnZXRcblx0XHQgKi9cblx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSBudWxsO1xuXG5cblx0XHQvKipcblx0XHQgKiBYLWNvb3JkaW5hdGUgb2YgdG91Y2ggc3RhcnQgZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSBudW1iZXJcblx0XHQgKi9cblx0XHR0aGlzLnRvdWNoU3RhcnRYID0gMDtcblxuXG5cdFx0LyoqXG5cdFx0ICogWS1jb29yZGluYXRlIG9mIHRvdWNoIHN0YXJ0IGV2ZW50LlxuXHRcdCAqXG5cdFx0ICogQHR5cGUgbnVtYmVyXG5cdFx0ICovXG5cdFx0dGhpcy50b3VjaFN0YXJ0WSA9IDA7XG5cblxuXHRcdC8qKlxuXHRcdCAqIElEIG9mIHRoZSBsYXN0IHRvdWNoLCByZXRyaWV2ZWQgZnJvbSBUb3VjaC5pZGVudGlmaWVyLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUgbnVtYmVyXG5cdFx0ICovXG5cdFx0dGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyID0gMDtcblxuXG5cdFx0LyoqXG5cdFx0ICogVG91Y2htb3ZlIGJvdW5kYXJ5LCBiZXlvbmQgd2hpY2ggYSBjbGljayB3aWxsIGJlIGNhbmNlbGxlZC5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIG51bWJlclxuXHRcdCAqL1xuXHRcdHRoaXMudG91Y2hCb3VuZGFyeSA9IG9wdGlvbnMudG91Y2hCb3VuZGFyeSB8fCAxMDtcblxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIEZhc3RDbGljayBsYXllci5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIEVsZW1lbnRcblx0XHQgKi9cblx0XHR0aGlzLmxheWVyID0gbGF5ZXI7XG5cblx0XHQvKipcblx0XHQgKiBUaGUgbWluaW11bSB0aW1lIGJldHdlZW4gdGFwKHRvdWNoc3RhcnQgYW5kIHRvdWNoZW5kKSBldmVudHNcblx0XHQgKlxuXHRcdCAqIEB0eXBlIG51bWJlclxuXHRcdCAqL1xuXHRcdHRoaXMudGFwRGVsYXkgPSBvcHRpb25zLnRhcERlbGF5IHx8IDIwMDtcblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBtYXhpbXVtIHRpbWUgZm9yIGEgdGFwXG5cdFx0ICpcblx0XHQgKiBAdHlwZSBudW1iZXJcblx0XHQgKi9cblx0XHR0aGlzLnRhcFRpbWVvdXQgPSBvcHRpb25zLnRhcFRpbWVvdXQgfHwgNzAwO1xuXG5cdFx0aWYgKEZhc3RDbGljay5ub3ROZWVkZWQobGF5ZXIpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gU29tZSBvbGQgdmVyc2lvbnMgb2YgQW5kcm9pZCBkb24ndCBoYXZlIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kXG5cdFx0ZnVuY3Rpb24gYmluZChtZXRob2QsIGNvbnRleHQpIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ldGhvZC5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpOyB9O1xuXHRcdH1cblxuXG5cdFx0dmFyIG1ldGhvZHMgPSBbJ29uTW91c2UnLCAnb25DbGljaycsICdvblRvdWNoU3RhcnQnLCAnb25Ub3VjaE1vdmUnLCAnb25Ub3VjaEVuZCcsICdvblRvdWNoQ2FuY2VsJ107XG5cdFx0dmFyIGNvbnRleHQgPSB0aGlzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBsID0gbWV0aG9kcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdGNvbnRleHRbbWV0aG9kc1tpXV0gPSBiaW5kKGNvbnRleHRbbWV0aG9kc1tpXV0sIGNvbnRleHQpO1xuXHRcdH1cblxuXHRcdC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBhcyByZXF1aXJlZFxuXHRcdGlmIChkZXZpY2VJc0FuZHJvaWQpIHtcblx0XHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMub25Nb3VzZSwgdHJ1ZSk7XG5cdFx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2UsIHRydWUpO1xuXHRcdFx0bGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZSwgdHJ1ZSk7XG5cdFx0fVxuXG5cdFx0bGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuXHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydCwgZmFsc2UpO1xuXHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUsIGZhbHNlKTtcblx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCwgZmFsc2UpO1xuXHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgdGhpcy5vblRvdWNoQ2FuY2VsLCBmYWxzZSk7XG5cblx0XHQvLyBIYWNrIGlzIHJlcXVpcmVkIGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgRXZlbnQjc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIChlLmcuIEFuZHJvaWQgMilcblx0XHQvLyB3aGljaCBpcyBob3cgRmFzdENsaWNrIG5vcm1hbGx5IHN0b3BzIGNsaWNrIGV2ZW50cyBidWJibGluZyB0byBjYWxsYmFja3MgcmVnaXN0ZXJlZCBvbiB0aGUgRmFzdENsaWNrXG5cdFx0Ly8gbGF5ZXIgd2hlbiB0aGV5IGFyZSBjYW5jZWxsZWQuXG5cdFx0aWYgKCFFdmVudC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKSB7XG5cdFx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2ssIGNhcHR1cmUpIHtcblx0XHRcdFx0dmFyIHJtdiA9IE5vZGUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI7XG5cdFx0XHRcdGlmICh0eXBlID09PSAnY2xpY2snKSB7XG5cdFx0XHRcdFx0cm12LmNhbGwobGF5ZXIsIHR5cGUsIGNhbGxiYWNrLmhpamFja2VkIHx8IGNhbGxiYWNrLCBjYXB0dXJlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRybXYuY2FsbChsYXllciwgdHlwZSwgY2FsbGJhY2ssIGNhcHR1cmUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2ssIGNhcHR1cmUpIHtcblx0XHRcdFx0dmFyIGFkdiA9IE5vZGUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7XG5cdFx0XHRcdGlmICh0eXBlID09PSAnY2xpY2snKSB7XG5cdFx0XHRcdFx0YWR2LmNhbGwobGF5ZXIsIHR5cGUsIGNhbGxiYWNrLmhpamFja2VkIHx8IChjYWxsYmFjay5oaWphY2tlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0XHRpZiAoIWV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhldmVudCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSksIGNhcHR1cmUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGFkdi5jYWxsKGxheWVyLCB0eXBlLCBjYWxsYmFjaywgY2FwdHVyZSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSWYgYSBoYW5kbGVyIGlzIGFscmVhZHkgZGVjbGFyZWQgaW4gdGhlIGVsZW1lbnQncyBvbmNsaWNrIGF0dHJpYnV0ZSwgaXQgd2lsbCBiZSBmaXJlZCBiZWZvcmVcblx0XHQvLyBGYXN0Q2xpY2sncyBvbkNsaWNrIGhhbmRsZXIuIEZpeCB0aGlzIGJ5IHB1bGxpbmcgb3V0IHRoZSB1c2VyLWRlZmluZWQgaGFuZGxlciBmdW5jdGlvbiBhbmRcblx0XHQvLyBhZGRpbmcgaXQgYXMgbGlzdGVuZXIuXG5cdFx0aWYgKHR5cGVvZiBsYXllci5vbmNsaWNrID09PSAnZnVuY3Rpb24nKSB7XG5cblx0XHRcdC8vIEFuZHJvaWQgYnJvd3NlciBvbiBhdCBsZWFzdCAzLjIgcmVxdWlyZXMgYSBuZXcgcmVmZXJlbmNlIHRvIHRoZSBmdW5jdGlvbiBpbiBsYXllci5vbmNsaWNrXG5cdFx0XHQvLyAtIHRoZSBvbGQgb25lIHdvbid0IHdvcmsgaWYgcGFzc2VkIHRvIGFkZEV2ZW50TGlzdGVuZXIgZGlyZWN0bHkuXG5cdFx0XHRvbGRPbkNsaWNrID0gbGF5ZXIub25jbGljaztcblx0XHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0b2xkT25DbGljayhldmVudCk7XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRsYXllci5vbmNsaWNrID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0KiBXaW5kb3dzIFBob25lIDguMSBmYWtlcyB1c2VyIGFnZW50IHN0cmluZyB0byBsb29rIGxpa2UgQW5kcm9pZCBhbmQgaVBob25lLlxuXHQqXG5cdCogQHR5cGUgYm9vbGVhblxuXHQqL1xuXHR2YXIgZGV2aWNlSXNXaW5kb3dzUGhvbmUgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJXaW5kb3dzIFBob25lXCIpID49IDA7XG5cblx0LyoqXG5cdCAqIEFuZHJvaWQgcmVxdWlyZXMgZXhjZXB0aW9ucy5cblx0ICpcblx0ICogQHR5cGUgYm9vbGVhblxuXHQgKi9cblx0dmFyIGRldmljZUlzQW5kcm9pZCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCcpID4gMCAmJiAhZGV2aWNlSXNXaW5kb3dzUGhvbmU7XG5cblxuXHQvKipcblx0ICogaU9TIHJlcXVpcmVzIGV4Y2VwdGlvbnMuXG5cdCAqXG5cdCAqIEB0eXBlIGJvb2xlYW5cblx0ICovXG5cdHZhciBkZXZpY2VJc0lPUyA9IC9pUChhZHxob25lfG9kKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhZGV2aWNlSXNXaW5kb3dzUGhvbmU7XG5cblxuXHQvKipcblx0ICogaU9TIDQgcmVxdWlyZXMgYW4gZXhjZXB0aW9uIGZvciBzZWxlY3QgZWxlbWVudHMuXG5cdCAqXG5cdCAqIEB0eXBlIGJvb2xlYW5cblx0ICovXG5cdHZhciBkZXZpY2VJc0lPUzQgPSBkZXZpY2VJc0lPUyAmJiAoL09TIDRfXFxkKF9cXGQpPy8pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cblxuXHQvKipcblx0ICogaU9TIDYuMC03LiogcmVxdWlyZXMgdGhlIHRhcmdldCBlbGVtZW50IHRvIGJlIG1hbnVhbGx5IGRlcml2ZWRcblx0ICpcblx0ICogQHR5cGUgYm9vbGVhblxuXHQgKi9cblx0dmFyIGRldmljZUlzSU9TV2l0aEJhZFRhcmdldCA9IGRldmljZUlzSU9TICYmICgvT1MgWzYtN11fXFxkLykudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxuXHQvKipcblx0ICogQmxhY2tCZXJyeSByZXF1aXJlcyBleGNlcHRpb25zLlxuXHQgKlxuXHQgKiBAdHlwZSBib29sZWFuXG5cdCAqL1xuXHR2YXIgZGV2aWNlSXNCbGFja0JlcnJ5MTAgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0JCMTAnKSA+IDA7XG5cblx0LyoqXG5cdCAqIERldGVybWluZSB3aGV0aGVyIGEgZ2l2ZW4gZWxlbWVudCByZXF1aXJlcyBhIG5hdGl2ZSBjbGljay5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldHxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IERPTSBlbGVtZW50XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIGVsZW1lbnQgbmVlZHMgYSBuYXRpdmUgY2xpY2tcblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUubmVlZHNDbGljayA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHRcdHN3aXRjaCAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcblxuXHRcdC8vIERvbid0IHNlbmQgYSBzeW50aGV0aWMgY2xpY2sgdG8gZGlzYWJsZWQgaW5wdXRzIChpc3N1ZSAjNjIpXG5cdFx0Y2FzZSAnYnV0dG9uJzpcblx0XHRjYXNlICdzZWxlY3QnOlxuXHRcdGNhc2UgJ3RleHRhcmVhJzpcblx0XHRcdGlmICh0YXJnZXQuZGlzYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2lucHV0JzpcblxuXHRcdFx0Ly8gRmlsZSBpbnB1dHMgbmVlZCByZWFsIGNsaWNrcyBvbiBpT1MgNiBkdWUgdG8gYSBicm93c2VyIGJ1ZyAoaXNzdWUgIzY4KVxuXHRcdFx0aWYgKChkZXZpY2VJc0lPUyAmJiB0YXJnZXQudHlwZSA9PT0gJ2ZpbGUnKSB8fCB0YXJnZXQuZGlzYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2xhYmVsJzpcblx0XHRjYXNlICdpZnJhbWUnOiAvLyBpT1M4IGhvbWVzY3JlZW4gYXBwcyBjYW4gcHJldmVudCBldmVudHMgYnViYmxpbmcgaW50byBmcmFtZXNcblx0XHRjYXNlICd2aWRlbyc6XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gKC9cXGJuZWVkc2NsaWNrXFxiLykudGVzdCh0YXJnZXQuY2xhc3NOYW1lKTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgd2hldGhlciBhIGdpdmVuIGVsZW1lbnQgcmVxdWlyZXMgYSBjYWxsIHRvIGZvY3VzIHRvIHNpbXVsYXRlIGNsaWNrIGludG8gZWxlbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldHxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IERPTSBlbGVtZW50XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIGVsZW1lbnQgcmVxdWlyZXMgYSBjYWxsIHRvIGZvY3VzIHRvIHNpbXVsYXRlIG5hdGl2ZSBjbGljay5cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUubmVlZHNGb2N1cyA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHRcdHN3aXRjaCAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRjYXNlICd0ZXh0YXJlYSc6XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRjYXNlICdzZWxlY3QnOlxuXHRcdFx0cmV0dXJuICFkZXZpY2VJc0FuZHJvaWQ7XG5cdFx0Y2FzZSAnaW5wdXQnOlxuXHRcdFx0c3dpdGNoICh0YXJnZXQudHlwZSkge1xuXHRcdFx0Y2FzZSAnYnV0dG9uJzpcblx0XHRcdGNhc2UgJ2NoZWNrYm94Jzpcblx0XHRcdGNhc2UgJ2ZpbGUnOlxuXHRcdFx0Y2FzZSAnaW1hZ2UnOlxuXHRcdFx0Y2FzZSAncmFkaW8nOlxuXHRcdFx0Y2FzZSAnc3VibWl0Jzpcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBObyBwb2ludCBpbiBhdHRlbXB0aW5nIHRvIGZvY3VzIGRpc2FibGVkIGlucHV0c1xuXHRcdFx0cmV0dXJuICF0YXJnZXQuZGlzYWJsZWQgJiYgIXRhcmdldC5yZWFkT25seTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuICgvXFxibmVlZHNmb2N1c1xcYi8pLnRlc3QodGFyZ2V0LmNsYXNzTmFtZSk7XG5cdFx0fVxuXHR9O1xuXG5cblx0LyoqXG5cdCAqIFNlbmQgYSBjbGljayBldmVudCB0byB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR8RWxlbWVudH0gdGFyZ2V0RWxlbWVudFxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKi9cblx0RmFzdENsaWNrLnByb3RvdHlwZS5zZW5kQ2xpY2sgPSBmdW5jdGlvbih0YXJnZXRFbGVtZW50LCBldmVudCkge1xuXHRcdHZhciBjbGlja0V2ZW50LCB0b3VjaDtcblxuXHRcdC8vIE9uIHNvbWUgQW5kcm9pZCBkZXZpY2VzIGFjdGl2ZUVsZW1lbnQgbmVlZHMgdG8gYmUgYmx1cnJlZCBvdGhlcndpc2UgdGhlIHN5bnRoZXRpYyBjbGljayB3aWxsIGhhdmUgbm8gZWZmZWN0ICgjMjQpXG5cdFx0aWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGFyZ2V0RWxlbWVudCkge1xuXHRcdFx0ZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XG5cdFx0fVxuXG5cdFx0dG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXTtcblxuXHRcdC8vIFN5bnRoZXNpc2UgYSBjbGljayBldmVudCwgd2l0aCBhbiBleHRyYSBhdHRyaWJ1dGUgc28gaXQgY2FuIGJlIHRyYWNrZWRcblx0XHRjbGlja0V2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG5cdFx0Y2xpY2tFdmVudC5pbml0TW91c2VFdmVudCh0aGlzLmRldGVybWluZUV2ZW50VHlwZSh0YXJnZXRFbGVtZW50KSwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAxLCB0b3VjaC5zY3JlZW5YLCB0b3VjaC5zY3JlZW5ZLCB0b3VjaC5jbGllbnRYLCB0b3VjaC5jbGllbnRZLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7XG5cdFx0Y2xpY2tFdmVudC5mb3J3YXJkZWRUb3VjaEV2ZW50ID0gdHJ1ZTtcblx0XHR0YXJnZXRFbGVtZW50LmRpc3BhdGNoRXZlbnQoY2xpY2tFdmVudCk7XG5cdH07XG5cblx0RmFzdENsaWNrLnByb3RvdHlwZS5kZXRlcm1pbmVFdmVudFR5cGUgPSBmdW5jdGlvbih0YXJnZXRFbGVtZW50KSB7XG5cblx0XHQvL0lzc3VlICMxNTk6IEFuZHJvaWQgQ2hyb21lIFNlbGVjdCBCb3ggZG9lcyBub3Qgb3BlbiB3aXRoIGEgc3ludGhldGljIGNsaWNrIGV2ZW50XG5cdFx0aWYgKGRldmljZUlzQW5kcm9pZCAmJiB0YXJnZXRFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NlbGVjdCcpIHtcblx0XHRcdHJldHVybiAnbW91c2Vkb3duJztcblx0XHR9XG5cblx0XHRyZXR1cm4gJ2NsaWNrJztcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbih0YXJnZXRFbGVtZW50KSB7XG5cdFx0dmFyIGxlbmd0aDtcblxuXHRcdC8vIElzc3VlICMxNjA6IG9uIGlPUyA3LCBzb21lIGlucHV0IGVsZW1lbnRzIChlLmcuIGRhdGUgZGF0ZXRpbWUgbW9udGgpIHRocm93IGEgdmFndWUgVHlwZUVycm9yIG9uIHNldFNlbGVjdGlvblJhbmdlLiBUaGVzZSBlbGVtZW50cyBkb24ndCBoYXZlIGFuIGludGVnZXIgdmFsdWUgZm9yIHRoZSBzZWxlY3Rpb25TdGFydCBhbmQgc2VsZWN0aW9uRW5kIHByb3BlcnRpZXMsIGJ1dCB1bmZvcnR1bmF0ZWx5IHRoYXQgY2FuJ3QgYmUgdXNlZCBmb3IgZGV0ZWN0aW9uIGJlY2F1c2UgYWNjZXNzaW5nIHRoZSBwcm9wZXJ0aWVzIGFsc28gdGhyb3dzIGEgVHlwZUVycm9yLiBKdXN0IGNoZWNrIHRoZSB0eXBlIGluc3RlYWQuIEZpbGVkIGFzIEFwcGxlIGJ1ZyAjMTUxMjI3MjQuXG5cdFx0aWYgKGRldmljZUlzSU9TICYmIHRhcmdldEVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UgJiYgdGFyZ2V0RWxlbWVudC50eXBlLmluZGV4T2YoJ2RhdGUnKSAhPT0gMCAmJiB0YXJnZXRFbGVtZW50LnR5cGUgIT09ICd0aW1lJyAmJiB0YXJnZXRFbGVtZW50LnR5cGUgIT09ICdtb250aCcpIHtcblx0XHRcdGxlbmd0aCA9IHRhcmdldEVsZW1lbnQudmFsdWUubGVuZ3RoO1xuXHRcdFx0dGFyZ2V0RWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZShsZW5ndGgsIGxlbmd0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldEVsZW1lbnQuZm9jdXMoKTtcblx0XHR9XG5cdH07XG5cblxuXHQvKipcblx0ICogQ2hlY2sgd2hldGhlciB0aGUgZ2l2ZW4gdGFyZ2V0IGVsZW1lbnQgaXMgYSBjaGlsZCBvZiBhIHNjcm9sbGFibGUgbGF5ZXIgYW5kIGlmIHNvLCBzZXQgYSBmbGFnIG9uIGl0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUGFyZW50ID0gZnVuY3Rpb24odGFyZ2V0RWxlbWVudCkge1xuXHRcdHZhciBzY3JvbGxQYXJlbnQsIHBhcmVudEVsZW1lbnQ7XG5cblx0XHRzY3JvbGxQYXJlbnQgPSB0YXJnZXRFbGVtZW50LmZhc3RDbGlja1Njcm9sbFBhcmVudDtcblxuXHRcdC8vIEF0dGVtcHQgdG8gZGlzY292ZXIgd2hldGhlciB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgY29udGFpbmVkIHdpdGhpbiBhIHNjcm9sbGFibGUgbGF5ZXIuIFJlLWNoZWNrIGlmIHRoZVxuXHRcdC8vIHRhcmdldCBlbGVtZW50IHdhcyBtb3ZlZCB0byBhbm90aGVyIHBhcmVudC5cblx0XHRpZiAoIXNjcm9sbFBhcmVudCB8fCAhc2Nyb2xsUGFyZW50LmNvbnRhaW5zKHRhcmdldEVsZW1lbnQpKSB7XG5cdFx0XHRwYXJlbnRFbGVtZW50ID0gdGFyZ2V0RWxlbWVudDtcblx0XHRcdGRvIHtcblx0XHRcdFx0aWYgKHBhcmVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gcGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQpIHtcblx0XHRcdFx0XHRzY3JvbGxQYXJlbnQgPSBwYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdHRhcmdldEVsZW1lbnQuZmFzdENsaWNrU2Nyb2xsUGFyZW50ID0gcGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0XHR9IHdoaWxlIChwYXJlbnRFbGVtZW50KTtcblx0XHR9XG5cblx0XHQvLyBBbHdheXMgdXBkYXRlIHRoZSBzY3JvbGwgdG9wIHRyYWNrZXIgaWYgcG9zc2libGUuXG5cdFx0aWYgKHNjcm9sbFBhcmVudCkge1xuXHRcdFx0c2Nyb2xsUGFyZW50LmZhc3RDbGlja0xhc3RTY3JvbGxUb3AgPSBzY3JvbGxQYXJlbnQuc2Nyb2xsVG9wO1xuXHRcdH1cblx0fTtcblxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRFbGVtZW50XG5cdCAqIEByZXR1cm5zIHtFbGVtZW50fEV2ZW50VGFyZ2V0fVxuXHQgKi9cblx0RmFzdENsaWNrLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50RnJvbUV2ZW50VGFyZ2V0ID0gZnVuY3Rpb24oZXZlbnRUYXJnZXQpIHtcblxuXHRcdC8vIE9uIHNvbWUgb2xkZXIgYnJvd3NlcnMgKG5vdGFibHkgU2FmYXJpIG9uIGlPUyA0LjEgLSBzZWUgaXNzdWUgIzU2KSB0aGUgZXZlbnQgdGFyZ2V0IG1heSBiZSBhIHRleHQgbm9kZS5cblx0XHRpZiAoZXZlbnRUYXJnZXQubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSB7XG5cdFx0XHRyZXR1cm4gZXZlbnRUYXJnZXQucGFyZW50Tm9kZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnRUYXJnZXQ7XG5cdH07XG5cblxuXHQvKipcblx0ICogT24gdG91Y2ggc3RhcnQsIHJlY29yZCB0aGUgcG9zaXRpb24gYW5kIHNjcm9sbCBvZmZzZXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0RmFzdENsaWNrLnByb3RvdHlwZS5vblRvdWNoU3RhcnQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciB0YXJnZXRFbGVtZW50LCB0b3VjaCwgc2VsZWN0aW9uO1xuXG5cdFx0Ly8gSWdub3JlIG11bHRpcGxlIHRvdWNoZXMsIG90aGVyd2lzZSBwaW5jaC10by16b29tIGlzIHByZXZlbnRlZCBpZiBib3RoIGZpbmdlcnMgYXJlIG9uIHRoZSBGYXN0Q2xpY2sgZWxlbWVudCAoaXNzdWUgIzExMSkuXG5cdFx0aWYgKGV2ZW50LnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0dGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldChldmVudC50YXJnZXQpO1xuXHRcdHRvdWNoID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXTtcblxuXHRcdGlmIChkZXZpY2VJc0lPUykge1xuXG5cdFx0XHQvLyBPbmx5IHRydXN0ZWQgZXZlbnRzIHdpbGwgZGVzZWxlY3QgdGV4dCBvbiBpT1MgKGlzc3VlICM0OSlcblx0XHRcdHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCAmJiAhc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWRldmljZUlzSU9TNCkge1xuXG5cdFx0XHRcdC8vIFdlaXJkIHRoaW5ncyBoYXBwZW4gb24gaU9TIHdoZW4gYW4gYWxlcnQgb3IgY29uZmlybSBkaWFsb2cgaXMgb3BlbmVkIGZyb20gYSBjbGljayBldmVudCBjYWxsYmFjayAoaXNzdWUgIzIzKTpcblx0XHRcdFx0Ly8gd2hlbiB0aGUgdXNlciBuZXh0IHRhcHMgYW55d2hlcmUgZWxzZSBvbiB0aGUgcGFnZSwgbmV3IHRvdWNoc3RhcnQgYW5kIHRvdWNoZW5kIGV2ZW50cyBhcmUgZGlzcGF0Y2hlZFxuXHRcdFx0XHQvLyB3aXRoIHRoZSBzYW1lIGlkZW50aWZpZXIgYXMgdGhlIHRvdWNoIGV2ZW50IHRoYXQgcHJldmlvdXNseSB0cmlnZ2VyZWQgdGhlIGNsaWNrIHRoYXQgdHJpZ2dlcmVkIHRoZSBhbGVydC5cblx0XHRcdFx0Ly8gU2FkbHksIHRoZXJlIGlzIGFuIGlzc3VlIG9uIGlPUyA0IHRoYXQgY2F1c2VzIHNvbWUgbm9ybWFsIHRvdWNoIGV2ZW50cyB0byBoYXZlIHRoZSBzYW1lIGlkZW50aWZpZXIgYXMgYW5cblx0XHRcdFx0Ly8gaW1tZWRpYXRlbHkgcHJlY2VlZGluZyB0b3VjaCBldmVudCAoaXNzdWUgIzUyKSwgc28gdGhpcyBmaXggaXMgdW5hdmFpbGFibGUgb24gdGhhdCBwbGF0Zm9ybS5cblx0XHRcdFx0Ly8gSXNzdWUgMTIwOiB0b3VjaC5pZGVudGlmaWVyIGlzIDAgd2hlbiBDaHJvbWUgZGV2IHRvb2xzICdFbXVsYXRlIHRvdWNoIGV2ZW50cycgaXMgc2V0IHdpdGggYW4gaU9TIGRldmljZSBVQSBzdHJpbmcsXG5cdFx0XHRcdC8vIHdoaWNoIGNhdXNlcyBhbGwgdG91Y2ggZXZlbnRzIHRvIGJlIGlnbm9yZWQuIEFzIHRoaXMgYmxvY2sgb25seSBhcHBsaWVzIHRvIGlPUywgYW5kIGlPUyBpZGVudGlmaWVycyBhcmUgYWx3YXlzIGxvbmcsXG5cdFx0XHRcdC8vIHJhbmRvbSBpbnRlZ2VycywgaXQncyBzYWZlIHRvIHRvIGNvbnRpbnVlIGlmIHRoZSBpZGVudGlmaWVyIGlzIDAgaGVyZS5cblx0XHRcdFx0aWYgKHRvdWNoLmlkZW50aWZpZXIgJiYgdG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmxhc3RUb3VjaElkZW50aWZpZXIgPSB0b3VjaC5pZGVudGlmaWVyO1xuXG5cdFx0XHRcdC8vIElmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBhIGNoaWxkIG9mIGEgc2Nyb2xsYWJsZSBsYXllciAodXNpbmcgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoKSBhbmQ6XG5cdFx0XHRcdC8vIDEpIHRoZSB1c2VyIGRvZXMgYSBmbGluZyBzY3JvbGwgb24gdGhlIHNjcm9sbGFibGUgbGF5ZXJcblx0XHRcdFx0Ly8gMikgdGhlIHVzZXIgc3RvcHMgdGhlIGZsaW5nIHNjcm9sbCB3aXRoIGFub3RoZXIgdGFwXG5cdFx0XHRcdC8vIHRoZW4gdGhlIGV2ZW50LnRhcmdldCBvZiB0aGUgbGFzdCAndG91Y2hlbmQnIGV2ZW50IHdpbGwgYmUgdGhlIGVsZW1lbnQgdGhhdCB3YXMgdW5kZXIgdGhlIHVzZXIncyBmaW5nZXJcblx0XHRcdFx0Ly8gd2hlbiB0aGUgZmxpbmcgc2Nyb2xsIHdhcyBzdGFydGVkLCBjYXVzaW5nIEZhc3RDbGljayB0byBzZW5kIGEgY2xpY2sgZXZlbnQgdG8gdGhhdCBsYXllciAtIHVubGVzcyBhIGNoZWNrXG5cdFx0XHRcdC8vIGlzIG1hZGUgdG8gZW5zdXJlIHRoYXQgYSBwYXJlbnQgbGF5ZXIgd2FzIG5vdCBzY3JvbGxlZCBiZWZvcmUgc2VuZGluZyBhIHN5bnRoZXRpYyBjbGljayAoaXNzdWUgIzQyKS5cblx0XHRcdFx0dGhpcy51cGRhdGVTY3JvbGxQYXJlbnQodGFyZ2V0RWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy50cmFja2luZ0NsaWNrID0gdHJ1ZTtcblx0XHR0aGlzLnRyYWNraW5nQ2xpY2tTdGFydCA9IGV2ZW50LnRpbWVTdGFtcDtcblx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50O1xuXG5cdFx0dGhpcy50b3VjaFN0YXJ0WCA9IHRvdWNoLnBhZ2VYO1xuXHRcdHRoaXMudG91Y2hTdGFydFkgPSB0b3VjaC5wYWdlWTtcblxuXHRcdC8vIFByZXZlbnQgcGhhbnRvbSBjbGlja3Mgb24gZmFzdCBkb3VibGUtdGFwIChpc3N1ZSAjMzYpXG5cdFx0aWYgKChldmVudC50aW1lU3RhbXAgLSB0aGlzLmxhc3RDbGlja1RpbWUpIDwgdGhpcy50YXBEZWxheSkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBCYXNlZCBvbiBhIHRvdWNobW92ZSBldmVudCBvYmplY3QsIGNoZWNrIHdoZXRoZXIgdGhlIHRvdWNoIGhhcyBtb3ZlZCBwYXN0IGEgYm91bmRhcnkgc2luY2UgaXQgc3RhcnRlZC5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLnRvdWNoSGFzTW92ZWQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLCBib3VuZGFyeSA9IHRoaXMudG91Y2hCb3VuZGFyeTtcblxuXHRcdGlmIChNYXRoLmFicyh0b3VjaC5wYWdlWCAtIHRoaXMudG91Y2hTdGFydFgpID4gYm91bmRhcnkgfHwgTWF0aC5hYnModG91Y2gucGFnZVkgLSB0aGlzLnRvdWNoU3RhcnRZKSA+IGJvdW5kYXJ5KSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG5cblxuXHQvKipcblx0ICogVXBkYXRlIHRoZSBsYXN0IHBvc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUub25Ub3VjaE1vdmUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmICghdGhpcy50cmFja2luZ0NsaWNrKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGUgdG91Y2ggaGFzIG1vdmVkLCBjYW5jZWwgdGhlIGNsaWNrIHRyYWNraW5nXG5cdFx0aWYgKHRoaXMudGFyZ2V0RWxlbWVudCAhPT0gdGhpcy5nZXRUYXJnZXRFbGVtZW50RnJvbUV2ZW50VGFyZ2V0KGV2ZW50LnRhcmdldCkgfHwgdGhpcy50b3VjaEhhc01vdmVkKGV2ZW50KSkge1xuXHRcdFx0dGhpcy50cmFja2luZ0NsaWNrID0gZmFsc2U7XG5cdFx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSBudWxsO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gZmluZCB0aGUgbGFiZWxsZWQgY29udHJvbCBmb3IgdGhlIGdpdmVuIGxhYmVsIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR8SFRNTExhYmVsRWxlbWVudH0gbGFiZWxFbGVtZW50XG5cdCAqIEByZXR1cm5zIHtFbGVtZW50fG51bGx9XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLmZpbmRDb250cm9sID0gZnVuY3Rpb24obGFiZWxFbGVtZW50KSB7XG5cblx0XHQvLyBGYXN0IHBhdGggZm9yIG5ld2VyIGJyb3dzZXJzIHN1cHBvcnRpbmcgdGhlIEhUTUw1IGNvbnRyb2wgYXR0cmlidXRlXG5cdFx0aWYgKGxhYmVsRWxlbWVudC5jb250cm9sICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBsYWJlbEVsZW1lbnQuY29udHJvbDtcblx0XHR9XG5cblx0XHQvLyBBbGwgYnJvd3NlcnMgdW5kZXIgdGVzdCB0aGF0IHN1cHBvcnQgdG91Y2ggZXZlbnRzIGFsc28gc3VwcG9ydCB0aGUgSFRNTDUgaHRtbEZvciBhdHRyaWJ1dGVcblx0XHRpZiAobGFiZWxFbGVtZW50Lmh0bWxGb3IpIHtcblx0XHRcdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsYWJlbEVsZW1lbnQuaHRtbEZvcik7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgbm8gZm9yIGF0dHJpYnV0ZSBleGlzdHMsIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGZpcnN0IGxhYmVsbGFibGUgZGVzY2VuZGFudCBlbGVtZW50XG5cdFx0Ly8gdGhlIGxpc3Qgb2Ygd2hpY2ggaXMgZGVmaW5lZCBoZXJlOiBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI2NhdGVnb3J5LWxhYmVsXG5cdFx0cmV0dXJuIGxhYmVsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24sIGlucHV0Om5vdChbdHlwZT1oaWRkZW5dKSwga2V5Z2VuLCBtZXRlciwgb3V0cHV0LCBwcm9ncmVzcywgc2VsZWN0LCB0ZXh0YXJlYScpO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIE9uIHRvdWNoIGVuZCwgZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc2VuZCBhIGNsaWNrIGV2ZW50IGF0IG9uY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0RmFzdENsaWNrLnByb3RvdHlwZS5vblRvdWNoRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgZm9yRWxlbWVudCwgdHJhY2tpbmdDbGlja1N0YXJ0LCB0YXJnZXRUYWdOYW1lLCBzY3JvbGxQYXJlbnQsIHRvdWNoLCB0YXJnZXRFbGVtZW50ID0gdGhpcy50YXJnZXRFbGVtZW50O1xuXG5cdFx0aWYgKCF0aGlzLnRyYWNraW5nQ2xpY2spIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFByZXZlbnQgcGhhbnRvbSBjbGlja3Mgb24gZmFzdCBkb3VibGUtdGFwIChpc3N1ZSAjMzYpXG5cdFx0aWYgKChldmVudC50aW1lU3RhbXAgLSB0aGlzLmxhc3RDbGlja1RpbWUpIDwgdGhpcy50YXBEZWxheSkge1xuXHRcdFx0dGhpcy5jYW5jZWxOZXh0Q2xpY2sgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKChldmVudC50aW1lU3RhbXAgLSB0aGlzLnRyYWNraW5nQ2xpY2tTdGFydCkgPiB0aGlzLnRhcFRpbWVvdXQpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFJlc2V0IHRvIHByZXZlbnQgd3JvbmcgY2xpY2sgY2FuY2VsIG9uIGlucHV0IChpc3N1ZSAjMTU2KS5cblx0XHR0aGlzLmNhbmNlbE5leHRDbGljayA9IGZhbHNlO1xuXG5cdFx0dGhpcy5sYXN0Q2xpY2tUaW1lID0gZXZlbnQudGltZVN0YW1wO1xuXG5cdFx0dHJhY2tpbmdDbGlja1N0YXJ0ID0gdGhpcy50cmFja2luZ0NsaWNrU3RhcnQ7XG5cdFx0dGhpcy50cmFja2luZ0NsaWNrID0gZmFsc2U7XG5cdFx0dGhpcy50cmFja2luZ0NsaWNrU3RhcnQgPSAwO1xuXG5cdFx0Ly8gT24gc29tZSBpT1MgZGV2aWNlcywgdGhlIHRhcmdldEVsZW1lbnQgc3VwcGxpZWQgd2l0aCB0aGUgZXZlbnQgaXMgaW52YWxpZCBpZiB0aGUgbGF5ZXJcblx0XHQvLyBpcyBwZXJmb3JtaW5nIGEgdHJhbnNpdGlvbiBvciBzY3JvbGwsIGFuZCBoYXMgdG8gYmUgcmUtZGV0ZWN0ZWQgbWFudWFsbHkuIE5vdGUgdGhhdFxuXHRcdC8vIGZvciB0aGlzIHRvIGZ1bmN0aW9uIGNvcnJlY3RseSwgaXQgbXVzdCBiZSBjYWxsZWQgKmFmdGVyKiB0aGUgZXZlbnQgdGFyZ2V0IGlzIGNoZWNrZWQhXG5cdFx0Ly8gU2VlIGlzc3VlICM1NzsgYWxzbyBmaWxlZCBhcyByZGFyOi8vMTMwNDg1ODkgLlxuXHRcdGlmIChkZXZpY2VJc0lPU1dpdGhCYWRUYXJnZXQpIHtcblx0XHRcdHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XG5cblx0XHRcdC8vIEluIGNlcnRhaW4gY2FzZXMgYXJndW1lbnRzIG9mIGVsZW1lbnRGcm9tUG9pbnQgY2FuIGJlIG5lZ2F0aXZlLCBzbyBwcmV2ZW50IHNldHRpbmcgdGFyZ2V0RWxlbWVudCB0byBudWxsXG5cdFx0XHR0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0b3VjaC5wYWdlWCAtIHdpbmRvdy5wYWdlWE9mZnNldCwgdG91Y2gucGFnZVkgLSB3aW5kb3cucGFnZVlPZmZzZXQpIHx8IHRhcmdldEVsZW1lbnQ7XG5cdFx0XHR0YXJnZXRFbGVtZW50LmZhc3RDbGlja1Njcm9sbFBhcmVudCA9IHRoaXMudGFyZ2V0RWxlbWVudC5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQ7XG5cdFx0fVxuXG5cdFx0dGFyZ2V0VGFnTmFtZSA9IHRhcmdldEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmICh0YXJnZXRUYWdOYW1lID09PSAnbGFiZWwnKSB7XG5cdFx0XHRmb3JFbGVtZW50ID0gdGhpcy5maW5kQ29udHJvbCh0YXJnZXRFbGVtZW50KTtcblx0XHRcdGlmIChmb3JFbGVtZW50KSB7XG5cdFx0XHRcdHRoaXMuZm9jdXModGFyZ2V0RWxlbWVudCk7XG5cdFx0XHRcdGlmIChkZXZpY2VJc0FuZHJvaWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0YXJnZXRFbGVtZW50ID0gZm9yRWxlbWVudDtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHRoaXMubmVlZHNGb2N1cyh0YXJnZXRFbGVtZW50KSkge1xuXG5cdFx0XHQvLyBDYXNlIDE6IElmIHRoZSB0b3VjaCBzdGFydGVkIGEgd2hpbGUgYWdvIChiZXN0IGd1ZXNzIGlzIDEwMG1zIGJhc2VkIG9uIHRlc3RzIGZvciBpc3N1ZSAjMzYpIHRoZW4gZm9jdXMgd2lsbCBiZSB0cmlnZ2VyZWQgYW55d2F5LiBSZXR1cm4gZWFybHkgYW5kIHVuc2V0IHRoZSB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2Ugc28gdGhhdCB0aGUgc3Vic2VxdWVudCBjbGljayB3aWxsIGJlIGFsbG93ZWQgdGhyb3VnaC5cblx0XHRcdC8vIENhc2UgMjogV2l0aG91dCB0aGlzIGV4Y2VwdGlvbiBmb3IgaW5wdXQgZWxlbWVudHMgdGFwcGVkIHdoZW4gdGhlIGRvY3VtZW50IGlzIGNvbnRhaW5lZCBpbiBhbiBpZnJhbWUsIHRoZW4gYW55IGlucHV0dGVkIHRleHQgd29uJ3QgYmUgdmlzaWJsZSBldmVuIHRob3VnaCB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIHVwZGF0ZWQgYXMgdGhlIHVzZXIgdHlwZXMgKGlzc3VlICMzNykuXG5cdFx0XHRpZiAoKGV2ZW50LnRpbWVTdGFtcCAtIHRyYWNraW5nQ2xpY2tTdGFydCkgPiAxMDAgfHwgKGRldmljZUlzSU9TICYmIHdpbmRvdy50b3AgIT09IHdpbmRvdyAmJiB0YXJnZXRUYWdOYW1lID09PSAnaW5wdXQnKSkge1xuXHRcdFx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSBudWxsO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZm9jdXModGFyZ2V0RWxlbWVudCk7XG5cdFx0XHR0aGlzLnNlbmRDbGljayh0YXJnZXRFbGVtZW50LCBldmVudCk7XG5cblx0XHRcdC8vIFNlbGVjdCBlbGVtZW50cyBuZWVkIHRoZSBldmVudCB0byBnbyB0aHJvdWdoIG9uIGlPUyA0LCBvdGhlcndpc2UgdGhlIHNlbGVjdG9yIG1lbnUgd29uJ3Qgb3Blbi5cblx0XHRcdC8vIEFsc28gdGhpcyBicmVha3Mgb3BlbmluZyBzZWxlY3RzIHdoZW4gVm9pY2VPdmVyIGlzIGFjdGl2ZSBvbiBpT1M2LCBpT1M3IChhbmQgcG9zc2libHkgb3RoZXJzKVxuXHRcdFx0aWYgKCFkZXZpY2VJc0lPUyB8fCB0YXJnZXRUYWdOYW1lICE9PSAnc2VsZWN0Jykge1xuXHRcdFx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSBudWxsO1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKGRldmljZUlzSU9TICYmICFkZXZpY2VJc0lPUzQpIHtcblxuXHRcdFx0Ly8gRG9uJ3Qgc2VuZCBhIHN5bnRoZXRpYyBjbGljayBldmVudCBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgY29udGFpbmVkIHdpdGhpbiBhIHBhcmVudCBsYXllciB0aGF0IHdhcyBzY3JvbGxlZFxuXHRcdFx0Ly8gYW5kIHRoaXMgdGFwIGlzIGJlaW5nIHVzZWQgdG8gc3RvcCB0aGUgc2Nyb2xsaW5nICh1c3VhbGx5IGluaXRpYXRlZCBieSBhIGZsaW5nIC0gaXNzdWUgIzQyKS5cblx0XHRcdHNjcm9sbFBhcmVudCA9IHRhcmdldEVsZW1lbnQuZmFzdENsaWNrU2Nyb2xsUGFyZW50O1xuXHRcdFx0aWYgKHNjcm9sbFBhcmVudCAmJiBzY3JvbGxQYXJlbnQuZmFzdENsaWNrTGFzdFNjcm9sbFRvcCAhPT0gc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBQcmV2ZW50IHRoZSBhY3R1YWwgY2xpY2sgZnJvbSBnb2luZyB0aG91Z2ggLSB1bmxlc3MgdGhlIHRhcmdldCBub2RlIGlzIG1hcmtlZCBhcyByZXF1aXJpbmdcblx0XHQvLyByZWFsIGNsaWNrcyBvciBpZiBpdCBpcyBpbiB0aGUgd2hpdGVsaXN0IGluIHdoaWNoIGNhc2Ugb25seSBub24tcHJvZ3JhbW1hdGljIGNsaWNrcyBhcmUgcGVybWl0dGVkLlxuXHRcdGlmICghdGhpcy5uZWVkc0NsaWNrKHRhcmdldEVsZW1lbnQpKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5zZW5kQ2xpY2sodGFyZ2V0RWxlbWVudCwgZXZlbnQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBPbiB0b3VjaCBjYW5jZWwsIHN0b3AgdHJhY2tpbmcgdGhlIGNsaWNrLlxuXHQgKlxuXHQgKiBAcmV0dXJucyB7dm9pZH1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUub25Ub3VjaENhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudHJhY2tpbmdDbGljayA9IGZhbHNlO1xuXHRcdHRoaXMudGFyZ2V0RWxlbWVudCA9IG51bGw7XG5cdH07XG5cblxuXHQvKipcblx0ICogRGV0ZXJtaW5lIG1vdXNlIGV2ZW50cyB3aGljaCBzaG91bGQgYmUgcGVybWl0dGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUub25Nb3VzZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cblx0XHQvLyBJZiBhIHRhcmdldCBlbGVtZW50IHdhcyBuZXZlciBzZXQgKGJlY2F1c2UgYSB0b3VjaCBldmVudCB3YXMgbmV2ZXIgZmlyZWQpIGFsbG93IHRoZSBldmVudFxuXHRcdGlmICghdGhpcy50YXJnZXRFbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoZXZlbnQuZm9yd2FyZGVkVG91Y2hFdmVudCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gUHJvZ3JhbW1hdGljYWxseSBnZW5lcmF0ZWQgZXZlbnRzIHRhcmdldGluZyBhIHNwZWNpZmljIGVsZW1lbnQgc2hvdWxkIGJlIHBlcm1pdHRlZFxuXHRcdGlmICghZXZlbnQuY2FuY2VsYWJsZSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gRGVyaXZlIGFuZCBjaGVjayB0aGUgdGFyZ2V0IGVsZW1lbnQgdG8gc2VlIHdoZXRoZXIgdGhlIG1vdXNlIGV2ZW50IG5lZWRzIHRvIGJlIHBlcm1pdHRlZDtcblx0XHQvLyB1bmxlc3MgZXhwbGljaXRseSBlbmFibGVkLCBwcmV2ZW50IG5vbi10b3VjaCBjbGljayBldmVudHMgZnJvbSB0cmlnZ2VyaW5nIGFjdGlvbnMsXG5cdFx0Ly8gdG8gcHJldmVudCBnaG9zdC9kb3VibGVjbGlja3MuXG5cdFx0aWYgKCF0aGlzLm5lZWRzQ2xpY2sodGhpcy50YXJnZXRFbGVtZW50KSB8fCB0aGlzLmNhbmNlbE5leHRDbGljaykge1xuXG5cdFx0XHQvLyBQcmV2ZW50IGFueSB1c2VyLWFkZGVkIGxpc3RlbmVycyBkZWNsYXJlZCBvbiBGYXN0Q2xpY2sgZWxlbWVudCBmcm9tIGJlaW5nIGZpcmVkLlxuXHRcdFx0aWYgKGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gUGFydCBvZiB0aGUgaGFjayBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IEV2ZW50I3N0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiAoZS5nLiBBbmRyb2lkIDIpXG5cdFx0XHRcdGV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbmNlbCB0aGUgZXZlbnRcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZSBtb3VzZSBldmVudCBpcyBwZXJtaXR0ZWQsIHJldHVybiB0cnVlIGZvciB0aGUgYWN0aW9uIHRvIGdvIHRocm91Z2guXG5cdFx0cmV0dXJuIHRydWU7XG5cdH07XG5cblxuXHQvKipcblx0ICogT24gYWN0dWFsIGNsaWNrcywgZGV0ZXJtaW5lIHdoZXRoZXIgdGhpcyBpcyBhIHRvdWNoLWdlbmVyYXRlZCBjbGljaywgYSBjbGljayBhY3Rpb24gb2NjdXJyaW5nXG5cdCAqIG5hdHVyYWxseSBhZnRlciBhIGRlbGF5IGFmdGVyIGEgdG91Y2ggKHdoaWNoIG5lZWRzIHRvIGJlIGNhbmNlbGxlZCB0byBhdm9pZCBkdXBsaWNhdGlvbiksIG9yXG5cdCAqIGFuIGFjdHVhbCBjbGljayB3aGljaCBzaG91bGQgYmUgcGVybWl0dGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIHBlcm1pdHRlZDtcblxuXHRcdC8vIEl0J3MgcG9zc2libGUgZm9yIGFub3RoZXIgRmFzdENsaWNrLWxpa2UgbGlicmFyeSBkZWxpdmVyZWQgd2l0aCB0aGlyZC1wYXJ0eSBjb2RlIHRvIGZpcmUgYSBjbGljayBldmVudCBiZWZvcmUgRmFzdENsaWNrIGRvZXMgKGlzc3VlICM0NCkuIEluIHRoYXQgY2FzZSwgc2V0IHRoZSBjbGljay10cmFja2luZyBmbGFnIGJhY2sgdG8gZmFsc2UgYW5kIHJldHVybiBlYXJseS4gVGhpcyB3aWxsIGNhdXNlIG9uVG91Y2hFbmQgdG8gcmV0dXJuIGVhcmx5LlxuXHRcdGlmICh0aGlzLnRyYWNraW5nQ2xpY2spIHtcblx0XHRcdHRoaXMudGFyZ2V0RWxlbWVudCA9IG51bGw7XG5cdFx0XHR0aGlzLnRyYWNraW5nQ2xpY2sgPSBmYWxzZTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFZlcnkgb2RkIGJlaGF2aW91ciBvbiBpT1MgKGlzc3VlICMxOCk6IGlmIGEgc3VibWl0IGVsZW1lbnQgaXMgcHJlc2VudCBpbnNpZGUgYSBmb3JtIGFuZCB0aGUgdXNlciBoaXRzIGVudGVyIGluIHRoZSBpT1Mgc2ltdWxhdG9yIG9yIGNsaWNrcyB0aGUgR28gYnV0dG9uIG9uIHRoZSBwb3AtdXAgT1Mga2V5Ym9hcmQgdGhlIGEga2luZCBvZiAnZmFrZScgY2xpY2sgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQgd2l0aCB0aGUgc3VibWl0LXR5cGUgaW5wdXQgZWxlbWVudCBhcyB0aGUgdGFyZ2V0LlxuXHRcdGlmIChldmVudC50YXJnZXQudHlwZSA9PT0gJ3N1Ym1pdCcgJiYgZXZlbnQuZGV0YWlsID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRwZXJtaXR0ZWQgPSB0aGlzLm9uTW91c2UoZXZlbnQpO1xuXG5cdFx0Ly8gT25seSB1bnNldCB0YXJnZXRFbGVtZW50IGlmIHRoZSBjbGljayBpcyBub3QgcGVybWl0dGVkLiBUaGlzIHdpbGwgZW5zdXJlIHRoYXQgdGhlIGNoZWNrIGZvciAhdGFyZ2V0RWxlbWVudCBpbiBvbk1vdXNlIGZhaWxzIGFuZCB0aGUgYnJvd3NlcidzIGNsaWNrIGRvZXNuJ3QgZ28gdGhyb3VnaC5cblx0XHRpZiAoIXBlcm1pdHRlZCkge1xuXHRcdFx0dGhpcy50YXJnZXRFbGVtZW50ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBJZiBjbGlja3MgYXJlIHBlcm1pdHRlZCwgcmV0dXJuIHRydWUgZm9yIHRoZSBhY3Rpb24gdG8gZ28gdGhyb3VnaC5cblx0XHRyZXR1cm4gcGVybWl0dGVkO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbGwgRmFzdENsaWNrJ3MgZXZlbnQgbGlzdGVuZXJzLlxuXHQgKlxuXHQgKiBAcmV0dXJucyB7dm9pZH1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBsYXllciA9IHRoaXMubGF5ZXI7XG5cblx0XHRpZiAoZGV2aWNlSXNBbmRyb2lkKSB7XG5cdFx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLm9uTW91c2UsIHRydWUpO1xuXHRcdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlLCB0cnVlKTtcblx0XHRcdGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2UsIHRydWUpO1xuXHRcdH1cblxuXHRcdGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcblx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQsIGZhbHNlKTtcblx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLCBmYWxzZSk7XG5cdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQsIGZhbHNlKTtcblx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMub25Ub3VjaENhbmNlbCwgZmFsc2UpO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIENoZWNrIHdoZXRoZXIgRmFzdENsaWNrIGlzIG5lZWRlZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBsYXllciBUaGUgbGF5ZXIgdG8gbGlzdGVuIG9uXG5cdCAqL1xuXHRGYXN0Q2xpY2subm90TmVlZGVkID0gZnVuY3Rpb24obGF5ZXIpIHtcblx0XHR2YXIgbWV0YVZpZXdwb3J0O1xuXHRcdHZhciBjaHJvbWVWZXJzaW9uO1xuXHRcdHZhciBibGFja2JlcnJ5VmVyc2lvbjtcblx0XHR2YXIgZmlyZWZveFZlcnNpb247XG5cblx0XHQvLyBEZXZpY2VzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0b3VjaCBkb24ndCBuZWVkIEZhc3RDbGlja1xuXHRcdGlmICh0eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIENocm9tZSB2ZXJzaW9uIC0gemVybyBmb3Igb3RoZXIgYnJvd3NlcnNcblx0XHRjaHJvbWVWZXJzaW9uID0gKygvQ2hyb21lXFwvKFswLTldKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCkgfHwgWywwXSlbMV07XG5cblx0XHRpZiAoY2hyb21lVmVyc2lvbikge1xuXG5cdFx0XHRpZiAoZGV2aWNlSXNBbmRyb2lkKSB7XG5cdFx0XHRcdG1ldGFWaWV3cG9ydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT12aWV3cG9ydF0nKTtcblxuXHRcdFx0XHRpZiAobWV0YVZpZXdwb3J0KSB7XG5cdFx0XHRcdFx0Ly8gQ2hyb21lIG9uIEFuZHJvaWQgd2l0aCB1c2VyLXNjYWxhYmxlPVwibm9cIiBkb2Vzbid0IG5lZWQgRmFzdENsaWNrIChpc3N1ZSAjODkpXG5cdFx0XHRcdFx0aWYgKG1ldGFWaWV3cG9ydC5jb250ZW50LmluZGV4T2YoJ3VzZXItc2NhbGFibGU9bm8nKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBDaHJvbWUgMzIgYW5kIGFib3ZlIHdpdGggd2lkdGg9ZGV2aWNlLXdpZHRoIG9yIGxlc3MgZG9uJ3QgbmVlZCBGYXN0Q2xpY2tcblx0XHRcdFx0XHRpZiAoY2hyb21lVmVyc2lvbiA+IDMxICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCA8PSB3aW5kb3cub3V0ZXJXaWR0aCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIENocm9tZSBkZXNrdG9wIGRvZXNuJ3QgbmVlZCBGYXN0Q2xpY2sgKGlzc3VlICMxNSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChkZXZpY2VJc0JsYWNrQmVycnkxMCkge1xuXHRcdFx0YmxhY2tiZXJyeVZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFswLTldKilcXC4oWzAtOV0qKS8pO1xuXG5cdFx0XHQvLyBCbGFja0JlcnJ5IDEwLjMrIGRvZXMgbm90IHJlcXVpcmUgRmFzdGNsaWNrIGxpYnJhcnkuXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vZnRsYWJzL2Zhc3RjbGljay9pc3N1ZXMvMjUxXG5cdFx0XHRpZiAoYmxhY2tiZXJyeVZlcnNpb25bMV0gPj0gMTAgJiYgYmxhY2tiZXJyeVZlcnNpb25bMl0gPj0gMykge1xuXHRcdFx0XHRtZXRhVmlld3BvcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9dmlld3BvcnRdJyk7XG5cblx0XHRcdFx0aWYgKG1ldGFWaWV3cG9ydCkge1xuXHRcdFx0XHRcdC8vIHVzZXItc2NhbGFibGU9bm8gZWxpbWluYXRlcyBjbGljayBkZWxheS5cblx0XHRcdFx0XHRpZiAobWV0YVZpZXdwb3J0LmNvbnRlbnQuaW5kZXhPZigndXNlci1zY2FsYWJsZT1ubycpICE9PSAtMSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIHdpZHRoPWRldmljZS13aWR0aCAob3IgbGVzcyB0aGFuIGRldmljZS13aWR0aCkgZWxpbWluYXRlcyBjbGljayBkZWxheS5cblx0XHRcdFx0XHRpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoIDw9IHdpbmRvdy5vdXRlcldpZHRoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJRTEwIHdpdGggLW1zLXRvdWNoLWFjdGlvbjogbm9uZSBvciBtYW5pcHVsYXRpb24sIHdoaWNoIGRpc2FibGVzIGRvdWJsZS10YXAtdG8tem9vbSAoaXNzdWUgIzk3KVxuXHRcdGlmIChsYXllci5zdHlsZS5tc1RvdWNoQWN0aW9uID09PSAnbm9uZScgfHwgbGF5ZXIuc3R5bGUudG91Y2hBY3Rpb24gPT09ICdtYW5pcHVsYXRpb24nKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBGaXJlZm94IHZlcnNpb24gLSB6ZXJvIGZvciBvdGhlciBicm93c2Vyc1xuXHRcdGZpcmVmb3hWZXJzaW9uID0gKygvRmlyZWZveFxcLyhbMC05XSspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IFssMF0pWzFdO1xuXG5cdFx0aWYgKGZpcmVmb3hWZXJzaW9uID49IDI3KSB7XG5cdFx0XHQvLyBGaXJlZm94IDI3KyBkb2VzIG5vdCBoYXZlIHRhcCBkZWxheSBpZiB0aGUgY29udGVudCBpcyBub3Qgem9vbWFibGUgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD05MjI4OTZcblxuXHRcdFx0bWV0YVZpZXdwb3J0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPXZpZXdwb3J0XScpO1xuXHRcdFx0aWYgKG1ldGFWaWV3cG9ydCAmJiAobWV0YVZpZXdwb3J0LmNvbnRlbnQuaW5kZXhPZigndXNlci1zY2FsYWJsZT1ubycpICE9PSAtMSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGggPD0gd2luZG93Lm91dGVyV2lkdGgpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElFMTE6IHByZWZpeGVkIC1tcy10b3VjaC1hY3Rpb24gaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBhbmQgaXQncyByZWNvbWVuZGVkIHRvIHVzZSBub24tcHJlZml4ZWQgdmVyc2lvblxuXHRcdC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS93aW5kb3dzL2FwcHMvSGg3NjczMTMuYXNweFxuXHRcdGlmIChsYXllci5zdHlsZS50b3VjaEFjdGlvbiA9PT0gJ25vbmUnIHx8IGxheWVyLnN0eWxlLnRvdWNoQWN0aW9uID09PSAnbWFuaXB1bGF0aW9uJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIEZhY3RvcnkgbWV0aG9kIGZvciBjcmVhdGluZyBhIEZhc3RDbGljayBvYmplY3Rcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBsYXllciBUaGUgbGF5ZXIgdG8gbGlzdGVuIG9uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHRzXG5cdCAqL1xuXHRGYXN0Q2xpY2suYXR0YWNoID0gZnVuY3Rpb24obGF5ZXIsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gbmV3IEZhc3RDbGljayhsYXllciwgb3B0aW9ucyk7XG5cdH07XG5cblxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXG5cdFx0Ly8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuXHRcdGRlZmluZShmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBGYXN0Q2xpY2s7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IEZhc3RDbGljay5hdHRhY2g7XG5cdFx0bW9kdWxlLmV4cG9ydHMuRmFzdENsaWNrID0gRmFzdENsaWNrO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5GYXN0Q2xpY2sgPSBGYXN0Q2xpY2s7XG5cdH1cbn0oKSk7XG4iLCJpbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi91dGlscy5qcyc7XG5cbmNsYXNzIEhlYWRlciB7XG5cbiAgY29uc3RydWN0b3IoZWwpIHtcblxuICAgIC8vY29uc29sZS5sb2coJ2luaXRIZWFkZXInKTtcblxuXHQgIHRoaXMuRE9NID0ge307XG5cdCAgdGhpcy5ET00uZWwgPSBlbDtcblx0ICB0aGlzLkRPTS5ib2R5ID0gZG9jdW1lbnQuYm9keTtcblx0ICB0aGlzLkRPTS5icmFuZCA9IHRoaXMuRE9NLmVsLnF1ZXJ5U2VsZWN0b3IoJy5icmFuZCcpO1xuICAgIHRoaXMuRE9NLnRvZ2dsZU9wZW4gPSB0aGlzLkRPTS5lbC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlX19tZW51X19vcGVuJyk7XG5cdCAgdGhpcy5ET00udG9nZ2xlQ2xvc2UgPSB0aGlzLkRPTS5lbC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlX19tZW51X19jbG9zZScpO1xuICAgIHRoaXMuRE9NLm1lbnVDb250YWluZXIgPSB0aGlzLkRPTS5lbC5xdWVyeVNlbGVjdG9yKCduYXYnKTtcbiAgICB0aGlzLm1lbnVPcGVuID0gZmFsc2U7XG5cblx0ICB0aGlzLmluaXQoKTtcblxuICB9XG5cbiAgaW5pdCgpIHtcblxuICAgIC8vYW5pbWF0aW9uIE9wZW5cbiAgICBjb25zdCBtZW51T3BlblRMID0gbmV3IFRpbWVsaW5lTWF4KHsgcGF1c2VkOiB0cnVlfSk7XG5cbiAgXHQvL3RvZ2dsZVxuICBcdHRoaXMuRE9NLnRvZ2dsZU9wZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7XG5cbiAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdHRoaXMuRE9NLmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvd01lbnUnKTtcblxuICAgICAgLy9pZiBPcGVubmluZ1xuICBcdFx0aWYgKCB0aGlzLkRPTS5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2hvd01lbnUnKSApIHtcblxuICAgICAgICB0aGlzLm1lbnVPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ET00uYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRoaXMuRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICAgIC8vQW5pbWF0aW9uXG4gICAgICAgIG1lbnVPcGVuVEwudG90YWxEdXJhdGlvbigyKS5yZXN0YXJ0KCk7XG5cbiAgXHRcdH0gZWxzZSB7XG5cbiAgICAgICAgdGhpcy5tZW51T3BlbiA9IGZhbHNlO1xuXG4gICAgICAgIC8vQW5pbWF0aW9uIFJldmVyc2VcbiAgICAgICAgbWVudU9wZW5UTC50b3RhbER1cmF0aW9uKDEpLnJldmVyc2UoKTtcblxuICAgICAgICB0aGlzLkRPTS5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG4gICAgICAgIHRoaXMuRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgXHRcdH1cblxuICBcdH0pO1xuXG4gICAgLy90b2dnbGVcbiAgICB0aGlzLkRPTS50b2dnbGVDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpID0+IHtcblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5ET00uYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93TWVudScpO1xuXG4gICAgICAvL2lmIE9wZW5uaW5nXG4gICAgICBpZiAoIHRoaXMuRE9NLmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93TWVudScpICkge1xuXG4gICAgICAgIHRoaXMubWVudU9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLkRPTS5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgdGhpcy5ET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgICAgLy9BbmltYXRpb25cbiAgICAgICAgbWVudU9wZW5UTC50b3RhbER1cmF0aW9uKDIpLnJlc3RhcnQoKTtcblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICB0aGlzLm1lbnVPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgLy9BbmltYXRpb24gUmV2ZXJzZVxuICAgICAgICBtZW51T3BlblRMLnRvdGFsRHVyYXRpb24oMSkucmV2ZXJzZSgpO1xuXG4gICAgICAgIHRoaXMuRE9NLmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICAgICAgdGhpcy5ET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgfVxuXG4gICAgfSk7XG5cblxuICAgIC8vIExpbmtzIENsaWNrXG4gICAgY29uc3QgbGlua3MgPSB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZfX2xpbmsnKVxuICAgIGxpbmtzLmZvckVhY2goKGVsZW0pID0+IHtcblxuICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpPT4ge1xuICAgICAgICBpZiAoIHRoaXMuRE9NLm1lbnVDb250YWluZXIucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpICE9IG51bGwgKSB7XG4gICAgICAgICAgIHRoaXMuRE9NLm1lbnVDb250YWluZXIucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgfSlcblxuICAgIH0pO1xuXG4gICAgLy8gQnJhbmQgQ2xpY2tcbiAgICB0aGlzLkRPTS5icmFuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpPT4ge1xuXG4gICAgICBpZiAoIHRoaXMuRE9NLm1lbnVDb250YWluZXIucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpICE9IG51bGwgKSB7XG4gICAgICAgICB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgIH0pXG5cbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjtcbiIsImltcG9ydCAnbm9kZWxpc3QtZm9yZWFjaC1wb2x5ZmlsbCdcbmltcG9ydCBGYXN0Q2xpY2sgZnJvbSAnZmFzdGNsaWNrJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xuXG5pbXBvcnQgSGVhZGVyIGZyb20gJy4vbW9kdWxlcy9oZWFkZXIuanMnO1xuXG5pbXBvcnQge2luaXRIb21lfSBmcm9tICcuL3BhZ2VzL2hvbWUuanMnO1xuaW1wb3J0IHtpbml0UGFnZX0gZnJvbSAnLi9wYWdlcy9wYWdlLmpzJztcblxuY2xhc3MgQXBwIHtcblxuICBjb25zdHJ1Y3RvcihvcHQgPSB7fSkge1xuXG4gICAgLy9EZWNsYXJhdGlvbnNcbiAgICB0aGlzLnN5ID0gMDtcbiAgICB0aGlzLmRldk1vZGUgPSB0cnVlO1xuICAgIHRoaXMuRE9NID0ge307XG4gICAgdGhpcy5ET00uYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgdGhpcy5ET00uZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJyk7XG4gICAgdGhpcy5ET00uYmFyYmFXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JhcmJhLXdyYXBwZXInKTtcblxuICAgIC8vU2lnbmF0dXJlIFdva2luZVxuICAgIHdpbmRvdy5zY3JvbGxUbygwLDApXG4gICAgY29uc29sZS5sb2coXCIlY0NyZWF0ZWQgYnkgV29raW5lLCB3aXRoIOKdpFwiLFwiY29sb3I6ICMwMDA7IHBhZGRpbmc6IDVweCAwcHggMXB4OyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjNzFkMWMyO1wiKSxjb25zb2xlLmxvZyhcIiVjaHR0cDovL3dva2luZS5jb21cIixcImNvbG9yOiNjY2NcIilcblxuICAgIHRoaXMuaW5pdCgpO1xuICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgdGhpcy5pbnRybygpO1xuXG4gIH1cblxuICBpbml0KCkge1xuXG4gICAgLy9EZXZNb2RlICggaW5mb3MgbmF2aWdhdGV1ciApXG4gICAgaWYgKHRoaXMuZGV2TW9kZSkge1xuICBcdFx0Y29uc29sZS5sb2coJ0RFVk1PREUgQklBVENIJyk7XG4gICAgICBjb25zb2xlLmxvZyh3aW5kb3cuU25pZmYpO1xuICAgIH1cblxuICAgIC8vUmVzZXRzXG4gICAgRmFzdENsaWNrKHRoaXMuRE9NLmJvZHkpO1xuICAgIHRoaXMuRE9NLmJvZHkuc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9ICdtYW51YWwnO1xuXG4gICAgLy8gQ3JlYXRlIEhlYWRlclxuICBcdGNvbnN0IGhlYWRlciA9IG5ldyBIZWFkZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keSA+IGhlYWRlcicpKTtcblxuICAgIC8vQmFyYmFcbiAgICBCYXJiYS5EaXNwYXRjaGVyLm9uKCduZXdQYWdlUmVhZHknLCAoY3VycmVudFN0YXR1cywgb2xkU3RhdHVzLCBjb250YWluZXIpID0+IHtcblxuICAgICAgLy8gbmV3UGFnZVJlYWR5XG5cbiAgICAgIC8vIEFuaW1hdGlvbnNcbiAgICAgIGlmICghd2luZG93LlNuaWZmLmZlYXR1cmVzLm1vYmlsZSkge1xuICAgICAgICB0aGlzLmluaXRQcmxseChjb250YWluZXIpO1xuICAgICAgICB0aGlzLmluaXRJblZpZXcoY29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgQmFyYmEuRGlzcGF0Y2hlci5vbignbGlua0NsaWNrZWQnLCAoSFRNTEVsZW1lbnQsIE1vdXNlRXZlbnQpID0+IHtcblxuICAgICAgLy9saW5rQ2xpY2tlZFxuXG4gICAgfSlcblxuICAgIEJhcmJhLkRpc3BhdGNoZXIub24oJ2luaXRTdGF0ZUNoYW5nZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAvL2luaXRTdGF0ZUNoYW5nZVxuICBcdFx0aWYgKHR5cGVvZiBnYSA9PT0gJ2Z1bmN0aW9uJykge1xuICBcdFx0XHRnYSgnc2VuZCcsICdwYWdldmlldycsIGxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgXHRcdH1cblxuICBcdH0pO1xuXG4gICAgdmFyIHBhZ2VUcmFuc2l0aW9uID0gQmFyYmEuQmFzZVRyYW5zaXRpb24uZXh0ZW5kKHtcblxuICBcdFx0c3RhcnQ6IGZ1bmN0aW9uKCkge1xuXG4gIFx0XHQgIFByb21pc2UuYWxsKFt0aGlzLm5ld0NvbnRhaW5lckxvYWRpbmcsIHRoaXMudHJhbnNpdGlvbk91dCgpXSlcbiAgXHRcdCAgLnRoZW4odGhpcy50cmFuc2l0aW9uSW4uYmluZCh0aGlzKSk7XG5cbiAgXHRcdH0sXG5cbiAgXHRcdHRyYW5zaXRpb25PdXQ6IGZ1bmN0aW9uKCkge1xuXG4gIFx0XHRcdGxldCBkZWZlcnJlZCA9IEJhcmJhLlV0aWxzLmRlZmVycmVkKCk7XG4gIFx0XHRcdGxldCBvbGRDb250YWluZXIgPSB0aGlzLm9sZENvbnRhaW5lcjtcblxuXHRcdFx0ICBjb25zdCBwYWdlT3V0ID0gbmV3IFRpbWVsaW5lTWF4KHsgcGF1c2VkOnRydWUsIG9uQ29tcGxldGU6KCk9PntcblxuICAgICAgICAgIC8vQ2xvc2UgTWVudSBpZiBPcGVuXG4gICAgICAgICAgaWYoaGVhZGVyLm1lbnVPcGVuKXtcbiAgICAgICAgICAgIHZhciBjbGljayA9IG5ldyBFdmVudCgnY2xpY2snKTtcbiAgICAgICAgICAgIGhlYWRlci5ET00udG9nZ2xlQ2xvc2UuZGlzcGF0Y2hFdmVudChjbGljayk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsMCk7XG5cdFx0XHRcdCAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuXG5cdFx0XHQgIH19KTtcblxuICAgICAgICBwYWdlT3V0LnRvKG9sZENvbnRhaW5lciwgMC44LCB7b3BhY2l0eTowLCBlYXNlOlBvd2VyMy5lYXNlT3V0fSwgMCk7XG4gICAgICAgIHBhZ2VPdXQucGxheSgpO1xuXG4gIFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXG4gIFx0XHR9LFxuXG4gIFx0XHR0cmFuc2l0aW9uSW46IGZ1bmN0aW9uKCkge1xuXG4gIFx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgXHRcdFx0dGhpcy5vbGRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBcdFx0XHR0aGlzLm5ld0NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuXG5cdFx0ICAgIGNvbnN0IHBhZ2VJbiA9IG5ldyBUaW1lbGluZU1heCh7IHBhdXNlZDp0cnVlLCBvbkNvbXBsZXRlOigpPT57XG5cdFx0XHRcdFx0X3RoaXMuZG9uZSgpO1xuXHRcdFx0XHR9fSlcblxuICAgICAgICBwYWdlSW4uZnJvbSh0aGlzLm5ld0NvbnRhaW5lciwgMS4yLCB7b3BhY2l0eTowLCBlYXNlOlBvd2VyMy5lYXNlT3V0fSwgMCk7XG4gICAgICAgIHBhZ2VJbi5wbGF5KCk7XG5cbiAgXHRcdH1cblxuICBcdH0pO1xuXG4gIFx0QmFyYmEuUGpheC5nZXRUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gIFx0ICByZXR1cm4gcGFnZVRyYW5zaXRpb247XG4gIFx0fTtcblxuICBcdC8vcm91dGVzXG4gIFx0aW5pdEhvbWUoKTtcbiAgXHRpbml0UGFnZSgpO1xuXG4gICAgQmFyYmEuUGpheC5zdGFydCgpO1xuXG4gIH1cblxuICBhZGRFdmVudHMoKcKge1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIChlKSA9PiB7XG4gIFx0XHR0aGlzLnN5ID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gIFx0fSlcblxuICB9XG5cbiAgaW5pdFBybGx4KGNvbnRhaW5lcikge1xuXG5cdCAgY29uc3QgVExQcmxseHMgPSBbXVxuXHQgIGNvbnN0IHBybGx4cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcqW2RhdGEtcHJsbHhdJyk7XG5cdCAgcHJsbHhzLmZvckVhY2goKGl0ZW0pID0+IHtcblxuXHRcdCAgICBsZXQgcHJsbHhUTCA9IG5ldyBUaW1lbGluZU1heCh7IHBhdXNlZDogdHJ1ZX0pO1xuICAgICAgICBUd2Vlbk1heC5zZXQoaXRlbSwgeyB5OiAtMSAqIGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXBybGx4JykgfSk7XG4gIFx0ICAgIHBybGx4VEwudG8oaXRlbSwgMSwgeyB5Oml0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXBybGx4JyksIG92ZXJ3cml0ZTpcImFsbFwiLCBlYXNlOlBvd2VyMC5lYXNlTm9uZSB9KTtcblx0XHQgICAgVExQcmxseHMucHVzaChwcmxseFRMKTtcblxuXHQgIH0pO1xuXG5cdCAgdmFyIHBybGx4UmVuZGVyID0gZnVuY3Rpb24gKCl7XG5cblx0ICAgIHBybGx4cy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgZnJvbSA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgdGhpcy5zeSAtIHdpbmRvdy5pbm5lckhlaWdodCA7XG5cdCAgICAgIGxldCBub3JtID0gdXRpbHMuY2xhbXAodXRpbHMubm9ybWFsaXplKHN5LCAgZnJvbSAsICBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRoaXMuc3kgKyBpdGVtLm9mZnNldEhlaWdodCksIDAsIDEpO1xuXHRcdCAgICBUTFBybGx4c1tpbmRleF0ucHJvZ3Jlc3Mobm9ybSk7XG5cdCAgICB9KTtcblxuXHQgIH1cblxuXHQgIFR3ZWVuTWF4LnRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCBwcmxseFJlbmRlciwgdGhpcywgdHJ1ZSwgMSk7XG5cbiAgfVxuXG4gIGluaXRJblZpZXcoY29udGFpbmVyKSB7XG5cblxuICAgIC8vZmFkZUluXG4gICAgY29uc3QgZmFkZUluRWxlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZhZGVJblZpZXcnKTtcblxuICAgIGlmIChmYWRlSW5FbGVtcykge1xuICAgICAgZmFkZUluRWxlbXMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBlbGVtLmZhZGVJblRMID0gbmV3IFRpbWVsaW5lTWF4KHsgcGF1c2VkOiB0cnVlfSk7XG4gICAgICAgIGVsZW0uZmFkZUluVEwuZnJvbShlbGVtLCAxLCB7eTo4MCwgb3BhY2l0eTowLCBlYXNlOlBvd2VyMy5lYXNlT3V0fSwgMCk7XG4gICAgICB9KVxuXG4gICAgICBpblZpZXcoXCJtYWluIC5mYWRlSW5WaWV3XCIpLm9uKCdlbnRlcicsIGVsID0+IHtcbiAgICAgICAgaWYoIWVsLmRvbmUpICBlbC5mYWRlSW5UTC5kdXJhdGlvbihhbmltYXRpb25EdXJhdGlvbikucGxheSgpO1xuICAgICAgfSkub24oJ2V4aXQnLCBlbCA9PiB7XG4gICAgICAgIGVsLmRvbmUgPSB0cnVlO1xuICAgICAgICAvL2VsLmZhZGVJblRMLmR1cmF0aW9uKDAuMikucmV2ZXJzZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvL2xldHRlckluXG4gICAgY29uc3QgbGV0dGVyc0luRWxlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmxldHRlcnNJblZpZXcnKTtcbiAgICBpZiAobGV0dGVyc0luRWxlbXMpIHtcblxuICAgICAgbGV0dGVyc0luRWxlbXMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBlbGVtLnNwbGl0TGV0dGVycyA9IG5ldyBTcGxpdFRleHQoZWxlbSwge3R5cGU6XCJjaGFyc1wifSk7XG4gICAgICAgIGVsZW0ubGV0dGVyc0luVEwgPSBuZXcgVGltZWxpbmVNYXgoeyBwYXVzZWQ6IHRydWV9KTtcbiAgICAgICAgZWxlbS5sZXR0ZXJzSW5UTC5zdGFnZ2VyRnJvbShlbGVtLnNwbGl0TGV0dGVycy5jaGFycywgMSwge3k6MjAsIG9wYWNpdHk6MCwgZWFzZTpQb3dlcjMuZWFzZU91dH0sIDAuMDE1LCAwKTtcbiAgICAgIH0pXG5cbiAgICAgIGluVmlldyhcIm1haW4gLmxldHRlcnNJblZpZXdcIikub24oJ2VudGVyJywgZWwgPT4ge1xuICAgICAgICBpZighZWwuZG9uZSkgIGVsLmxldHRlcnNJblRMLmR1cmF0aW9uKGFuaW1hdGlvbkR1cmF0aW9uKS5wbGF5KCk7XG4gICAgICB9KS5vbignZXhpdCcsIGVsID0+IHtcbiAgICAgICAgZWwuZG9uZSA9IHRydWU7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGVsLnNwbGl0TGV0dGVycy5fb3JpZ2luYWxzO1xuICAgICAgICAvL2VsLmxldHRlcnNJblRMLmR1cmF0aW9uKDAuMikucmV2ZXJzZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvL2xpbmVzSW5cbiAgICBjb25zdCBsaW5lc0luRWxlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmxpbmVzSW5WaWV3Jyk7XG4gICAgaWYgKGxpbmVzSW5FbGVtcykge1xuXG4gICAgICBsaW5lc0luRWxlbXMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBlbGVtLnNwbGl0TGluZXMgPSBuZXcgU3BsaXRUZXh0KGVsZW0sIHt0eXBlOlwibGluZXNcIn0pO1xuICAgICAgICBlbGVtLmxpbmVzSW5UTCA9IG5ldyBUaW1lbGluZU1heCh7IHBhdXNlZDogdHJ1ZX0pO1xuICAgICAgICBlbGVtLmxpbmVzSW5UTC5zdGFnZ2VyRnJvbShlbGVtLnNwbGl0TGluZXMubGluZXMsIDEsIHt5OjIwLCBvcGFjaXR5OjAsIGVhc2U6UG93ZXIzLmVhc2VPdXR9LCAwLjA1LCAwLjIpO1xuICAgICAgfSlcblxuICAgICAgaW5WaWV3KFwibWFpbiAubGluZXNJblZpZXdcIikub24oJ2VudGVyJywgZWwgPT4ge1xuICAgICAgICBpZighZWwuZG9uZSkgIGVsLmxpbmVzSW5UTC5kdXJhdGlvbihhbmltYXRpb25EdXJhdGlvbiAqIDEuNSkucGxheSgpO1xuICAgICAgfSkub24oJ2V4aXQnLCBlbCA9PiB7XG4gICAgICAgIGVsLmRvbmUgPSB0cnVlO1xuICAgICAgICBlbC5pbm5lckhUTUwgPSBlbC5zcGxpdExpbmVzLl9vcmlnaW5hbHM7XG4gICAgICAgIC8vZWwubGluZXNJblRMLmR1cmF0aW9uKDAuMikucmV2ZXJzZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBpblZpZXcub2Zmc2V0KHtcbiAgICAgICAgdG9wOiAtMTIwLFxuICAgICAgICBsZWZ0Oi01MCxcbiAgICAgICAgcmlnaHQ6LTUwLFxuICAgICAgICBib3R0b206IDAsXG4gICAgfSk7XG5cbiAgfVxuXG4gIGludHJvKCkge1xuXG4gICAgY29uc3QgaW50cm8gPSBuZXcgVGltZWxpbmVNYXgoeyBwYXVzZWQ6dHJ1ZSwgb25TdGFydDooKT0+e1xuICAgICAgdGhpcy5ET00uYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG4gICAgfX0pXG5cbiAgICBpbnRyby5mcm9tKHRoaXMuRE9NLmJvZHksIDEuMiwge29wYWNpdHk6MCwgZWFzZTpQb3dlcjMuZWFzZU91dH0sIDAuMylcbiAgICBpbnRyby5wbGF5KCk7XG5cbiAgfVxuXG59XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbiJdLCJuYW1lcyI6WyJub3JtYWxpemUiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsImNsYW1wIiwiaW5pdEhvbWUiLCJCYXJiYSIsIkJhc2VWaWV3IiwiZXh0ZW5kIiwiaW5pdCIsImluaXRQYWdlIiwid2luZG93IiwiTm9kZUxpc3QiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwiaSIsInRoaXMiLCJsZW5ndGgiLCJjYWxsIiwiRmFzdENsaWNrIiwibGF5ZXIiLCJvcHRpb25zIiwib2xkT25DbGljayIsInRyYWNraW5nQ2xpY2siLCJ0cmFja2luZ0NsaWNrU3RhcnQiLCJ0YXJnZXRFbGVtZW50IiwidG91Y2hTdGFydFgiLCJ0b3VjaFN0YXJ0WSIsImxhc3RUb3VjaElkZW50aWZpZXIiLCJ0b3VjaEJvdW5kYXJ5IiwidGFwRGVsYXkiLCJ0YXBUaW1lb3V0Iiwibm90TmVlZGVkIiwibWV0aG9kcyIsImNvbnRleHQiLCJsIiwibWV0aG9kIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJiaW5kIiwiZGV2aWNlSXNBbmRyb2lkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uTW91c2UiLCJvbkNsaWNrIiwib25Ub3VjaFN0YXJ0Iiwib25Ub3VjaE1vdmUiLCJvblRvdWNoRW5kIiwib25Ub3VjaENhbmNlbCIsIkV2ZW50Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJjYXB0dXJlIiwicm12IiwiTm9kZSIsImhpamFja2VkIiwiYWR2IiwiZXZlbnQiLCJwcm9wYWdhdGlvblN0b3BwZWQiLCJvbmNsaWNrIiwiZGV2aWNlSXNXaW5kb3dzUGhvbmUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpbmRleE9mIiwiZGV2aWNlSXNJT1MiLCJ0ZXN0IiwiZGV2aWNlSXNJT1M0IiwiZGV2aWNlSXNJT1NXaXRoQmFkVGFyZ2V0IiwiZGV2aWNlSXNCbGFja0JlcnJ5MTAiLCJuZWVkc0NsaWNrIiwidGFyZ2V0Iiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImRpc2FibGVkIiwiY2xhc3NOYW1lIiwibmVlZHNGb2N1cyIsInJlYWRPbmx5Iiwic2VuZENsaWNrIiwiY2xpY2tFdmVudCIsInRvdWNoIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiYmx1ciIsImNoYW5nZWRUb3VjaGVzIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRldGVybWluZUV2ZW50VHlwZSIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJmb3J3YXJkZWRUb3VjaEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInRhZ05hbWUiLCJmb2N1cyIsInNldFNlbGVjdGlvblJhbmdlIiwidXBkYXRlU2Nyb2xsUGFyZW50Iiwic2Nyb2xsUGFyZW50IiwicGFyZW50RWxlbWVudCIsImZhc3RDbGlja1Njcm9sbFBhcmVudCIsImNvbnRhaW5zIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiZmFzdENsaWNrTGFzdFNjcm9sbFRvcCIsInNjcm9sbFRvcCIsImdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQiLCJldmVudFRhcmdldCIsIm5vZGVUeXBlIiwiVEVYVF9OT0RFIiwicGFyZW50Tm9kZSIsInNlbGVjdGlvbiIsInRhcmdldFRvdWNoZXMiLCJnZXRTZWxlY3Rpb24iLCJyYW5nZUNvdW50IiwiaXNDb2xsYXBzZWQiLCJpZGVudGlmaWVyIiwicHJldmVudERlZmF1bHQiLCJ0aW1lU3RhbXAiLCJwYWdlWCIsInBhZ2VZIiwibGFzdENsaWNrVGltZSIsInRvdWNoSGFzTW92ZWQiLCJib3VuZGFyeSIsIk1hdGgiLCJhYnMiLCJmaW5kQ29udHJvbCIsImxhYmVsRWxlbWVudCIsInVuZGVmaW5lZCIsImNvbnRyb2wiLCJodG1sRm9yIiwiZ2V0RWxlbWVudEJ5SWQiLCJxdWVyeVNlbGVjdG9yIiwiZm9yRWxlbWVudCIsInRhcmdldFRhZ05hbWUiLCJjYW5jZWxOZXh0Q2xpY2siLCJlbGVtZW50RnJvbVBvaW50IiwicGFnZVhPZmZzZXQiLCJwYWdlWU9mZnNldCIsInRvcCIsImNhbmNlbGFibGUiLCJzdG9wUHJvcGFnYXRpb24iLCJwZXJtaXR0ZWQiLCJkZXRhaWwiLCJkZXN0cm95IiwibWV0YVZpZXdwb3J0IiwiY2hyb21lVmVyc2lvbiIsImJsYWNrYmVycnlWZXJzaW9uIiwib250b3VjaHN0YXJ0IiwiZXhlYyIsImNvbnRlbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxXaWR0aCIsIm91dGVyV2lkdGgiLCJtYXRjaCIsInN0eWxlIiwibXNUb3VjaEFjdGlvbiIsInRvdWNoQWN0aW9uIiwiYXR0YWNoIiwibW9kdWxlIiwiZXhwb3J0cyIsIkhlYWRlciIsImVsIiwiRE9NIiwiYm9keSIsImJyYW5kIiwidG9nZ2xlT3BlbiIsInRvZ2dsZUNsb3NlIiwibWVudUNvbnRhaW5lciIsIm1lbnVPcGVuIiwibWVudU9wZW5UTCIsIlRpbWVsaW5lTWF4IiwicGF1c2VkIiwiZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl90aGlzIiwib3ZlcmZsb3ciLCJ2aXNpYmlsaXR5IiwidG90YWxEdXJhdGlvbiIsInJlc3RhcnQiLCJyZXZlcnNlIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW0iLCJyZW1vdmUiLCJjdXJyZW50VGFyZ2V0IiwiYWRkIiwic3kiLCJkZXZNb2RlIiwiZm9vdGVyIiwiYmFyYmFXcmFwcGVyIiwic2Nyb2xsVG8iLCJsb2ciLCJjb25zb2xlIiwiYWRkRXZlbnRzIiwiaW50cm8iLCJTbmlmZiIsInNjcm9sbFJlc3RvcmF0aW9uIiwiaGVhZGVyIiwiRGlzcGF0Y2hlciIsIm9uIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsImNvbnRhaW5lciIsImZlYXR1cmVzIiwibW9iaWxlIiwiaW5pdFBybGx4IiwiaW5pdEluVmlldyIsIkhUTUxFbGVtZW50IiwiTW91c2VFdmVudCIsImdhIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInBhZ2VUcmFuc2l0aW9uIiwiQmFzZVRyYW5zaXRpb24iLCJhbGwiLCJuZXdDb250YWluZXJMb2FkaW5nIiwidHJhbnNpdGlvbk91dCIsInRoZW4iLCJ0cmFuc2l0aW9uSW4iLCJkZWZlcnJlZCIsIlV0aWxzIiwib2xkQ29udGFpbmVyIiwicGFnZU91dCIsIm9uQ29tcGxldGUiLCJjbGljayIsInJlc29sdmUiLCJ0byIsIm9wYWNpdHkiLCJlYXNlIiwiUG93ZXIzIiwiZWFzZU91dCIsInBsYXkiLCJwcm9taXNlIiwiZGlzcGxheSIsIm5ld0NvbnRhaW5lciIsInBhZ2VJbiIsImRvbmUiLCJmcm9tIiwiUGpheCIsImdldFRyYW5zaXRpb24iLCJzdGFydCIsIlRMUHJsbHhzIiwicHJsbHhzIiwiaXRlbSIsInBybGx4VEwiLCJzZXQiLCJ5IiwiZ2V0QXR0cmlidXRlIiwib3ZlcndyaXRlIiwiUG93ZXIwIiwiZWFzZU5vbmUiLCJwdXNoIiwidGlja2VyIiwiaW5kZXgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJfdGhpczQiLCJpbm5lckhlaWdodCIsIm5vcm0iLCJ1dGlscyIsInByb2dyZXNzIiwiZmFkZUluRWxlbXMiLCJmYWRlSW5UTCIsImR1cmF0aW9uIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJsZXR0ZXJzSW5FbGVtcyIsInNwbGl0TGV0dGVycyIsIlNwbGl0VGV4dCIsImxldHRlcnNJblRMIiwic3RhZ2dlckZyb20iLCJjaGFycyIsImlubmVySFRNTCIsIl9vcmlnaW5hbHMiLCJsaW5lc0luRWxlbXMiLCJzcGxpdExpbmVzIiwibGluZXNJblRMIiwibGluZXMiLCJvZmZzZXQiLCJvblN0YXJ0Il0sIm1hcHBpbmdzIjoidUpBOENPLFNBQVNBLEVBQVVDLEVBQU9DLEVBQUtDLFVBQzVCRixFQUFRQyxJQUFRQyxFQUFNRCxHQUdoQyxTQUFnQkUsRUFBTUgsRUFBT0MsRUFBS0MsVUFDekJGLEVBQVFDLEVBQU1BLEVBQU9ELEVBQVFFLEVBQU1BLEVBQU1GLEVDbkQzQyxTQUFTSSxJQUVKQyxNQUFNQyxTQUFTQyxrQkFFZCxvQkFFRiw4QkFNUyxlQVFkQyxnQkNwQlVDLElBRUpKLE1BQU1DLFNBQVNDLGtCQUVkLGVBRUYsOEJBTVMsZUFRZEMsT0NwQkZFLE9BQU9DLFdBQWFBLFNBQVNDLFVBQVVDLG1CQUM5QkQsVUFBVUMsUUFBVSxTQUFVQyxFQUFVQyxLQUNuQ0EsR0FBV0wsV0FDaEIsSUFBSU0sRUFBSSxFQUFHQSxFQUFJQyxLQUFLQyxPQUFRRixNQUNwQkcsS0FBS0osRUFBU0UsS0FBS0QsR0FBSUEsRUFBR0MsczRDQ2tCckNHLEVBQVVDLEVBQU9DLE9BQ3JCQyxPQUVNRCxXQU9MRSxlQUFnQixPQVFoQkMsbUJBQXFCLE9BUXJCQyxjQUFnQixVQVFoQkMsWUFBYyxPQVFkQyxZQUFjLE9BUWRDLG9CQUFzQixPQVF0QkMsY0FBZ0JSLEVBQVFRLGVBQWlCLFFBUXpDVCxNQUFRQSxPQU9SVSxTQUFXVCxFQUFRUyxVQUFZLFNBTy9CQyxXQUFhVixFQUFRVSxZQUFjLEtBRXBDWixFQUFVYSxVQUFVWixRQVluQixJQUZEYSxHQUFXLFVBQVcsVUFBVyxlQUFnQixjQUFlLGFBQWMsaUJBQzlFQyxFQUFVbEIsS0FDTEQs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"}