{"version":3,"file":"app.min.js","sources":["assets/js/utils.js","assets/js/pages/home.js","assets/js/pages/page.js","../node_modules/fastclick/lib/fastclick.js","assets/js/modules/header.js","assets/js/app.js"],"sourcesContent":["export function onLoadedMetadata(e) {\n\n  const video = $(e.target);\n  let aspectRatio = video.data('aspectRatio');\n  if (aspectRatio == undefined) {\n      aspectRatio = video.width() / video.height();\n      video.data('aspectRatio', aspectRatio);\n  }\n  resizeVideo(video);\n\n}\n\nexport function resizeVideo(video) {\n\n  let newWidth;\n  let newHeight;\n  let videoRatio = video.data('aspectRatio');\n  if (videoRatio == undefined) videoRatio = 1.7777777;\n  let parentWidth  = video.parent().width();\n  let parentHeight = video.parent().height();\n  let parentRatio = parentWidth / parentHeight;\n\n  if (parentRatio > videoRatio && !video.hasClass('bgWidth')) {\n    video.removeClass(\"bgHeight\");\n    video.addClass(\"bgWidth\");\n  }\n  if (parentRatio <= videoRatio && !video.hasClass('bgHeight')) {\n    video.removeClass(\"bgWidth\");\n    video.addClass(\"bgHeight\");\n  }\n\n}\n\nexport function delay(ms){\n    var ctr, rej, p = new Promise(function (resolve, reject) {\n        ctr = setTimeout(resolve, ms);\n        rej = reject;\n    });\n    p.cancel = function(){ clearTimeout(ctr); rej(Error(\"Cancelled\"))};\n    return p;\n}\n\nexport function randomInt(min,max) {\n    return Math.floor(Math.random()*(max-min+1)+min);\n}\n\nexport function normalize(value, min, max) {\n  return (value - min) / (max - min);\n}\n\nexport function clamp(value, min, max) {\n  return value < min ? min : (value > max ? max : value);\n}\n\nexport function simulateClick(elem) {\n\n    var evt = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n    });\n\n    var canceled = !elem.dispatchEvent(evt);\n\n};\n\nexport function mouseMovefn(e) {\n\n  let xMouse = e.pageX - e.currentTarget.getBoundingClientRect().left - ( e.currentTarget.offsetWidth / 2 );\n  let yMouse = e.pageY - window.pageYOffset - e.currentTarget.getBoundingClientRect().top - ( e.currentTarget.offsetHeight / 2 );\n  const mouseElements = e.currentTarget.querySelectorAll('*[data-mouse-parallax]');\n  mouseElements.forEach(elem => {\n    var factor = elem.getAttribute('data-mouse-parallax');\n    let xFinal = xMouse * factor;\n    let yFinal = yMouse * factor;\n    TweenMax.to(elem, 1.2, {x:xFinal, y:yFinal});\n  });\n\n}\n","export function initHome() {\n\n\tvar Home = Barba.BaseView.extend({\n\n\t\tnamespace: 'page-home',\n\n\t\tonEnter: function() {\n\n\t\t\t//console.log('Init Home');\n\n\t\t},\n\n\t\tonLeaveCompleted: function() {\n\n\n\n\t\t}\n\n\t})\n\n\tHome.init();\n\n}\n","export function initPage() {\n\n\tvar Page = Barba.BaseView.extend({\n\n\t\tnamespace: 'page',\n\n\t\tonEnter: function() {\n\n\t\t\t//console.log('Init Page');\n\n\t\t},\n\n\t\tonLeaveCompleted: function() {\n\n\n\n\t\t}\n\n\t})\n\n\tPage.init();\n\n}\n",";(function () {\n\t'use strict';\n\n\t/**\n\t * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.\n\t *\n\t * @codingstandard ftlabs-jsv2\n\t * @copyright The Financial Times Limited [All Rights Reserved]\n\t * @license MIT License (see LICENSE.txt)\n\t */\n\n\t/*jslint browser:true, node:true*/\n\t/*global define, Event, Node*/\n\n\n\t/**\n\t * Instantiate fast-clicking listeners on the specified layer.\n\t *\n\t * @constructor\n\t * @param {Element} layer The layer to listen on\n\t * @param {Object} [options={}] The options to override the defaults\n\t */\n\tfunction FastClick(layer, options) {\n\t\tvar oldOnClick;\n\n\t\toptions = options || {};\n\n\t\t/**\n\t\t * Whether a click is currently being tracked.\n\t\t *\n\t\t * @type boolean\n\t\t */\n\t\tthis.trackingClick = false;\n\n\n\t\t/**\n\t\t * Timestamp for when click tracking started.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.trackingClickStart = 0;\n\n\n\t\t/**\n\t\t * The element being tracked for a click.\n\t\t *\n\t\t * @type EventTarget\n\t\t */\n\t\tthis.targetElement = null;\n\n\n\t\t/**\n\t\t * X-coordinate of touch start event.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchStartX = 0;\n\n\n\t\t/**\n\t\t * Y-coordinate of touch start event.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchStartY = 0;\n\n\n\t\t/**\n\t\t * ID of the last touch, retrieved from Touch.identifier.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.lastTouchIdentifier = 0;\n\n\n\t\t/**\n\t\t * Touchmove boundary, beyond which a click will be cancelled.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchBoundary = options.touchBoundary || 10;\n\n\n\t\t/**\n\t\t * The FastClick layer.\n\t\t *\n\t\t * @type Element\n\t\t */\n\t\tthis.layer = layer;\n\n\t\t/**\n\t\t * The minimum time between tap(touchstart and touchend) events\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.tapDelay = options.tapDelay || 200;\n\n\t\t/**\n\t\t * The maximum time for a tap\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.tapTimeout = options.tapTimeout || 700;\n\n\t\tif (FastClick.notNeeded(layer)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Some old versions of Android don't have Function.prototype.bind\n\t\tfunction bind(method, context) {\n\t\t\treturn function() { return method.apply(context, arguments); };\n\t\t}\n\n\n\t\tvar methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];\n\t\tvar context = this;\n\t\tfor (var i = 0, l = methods.length; i < l; i++) {\n\t\t\tcontext[methods[i]] = bind(context[methods[i]], context);\n\t\t}\n\n\t\t// Set up event handlers as required\n\t\tif (deviceIsAndroid) {\n\t\t\tlayer.addEventListener('mouseover', this.onMouse, true);\n\t\t\tlayer.addEventListener('mousedown', this.onMouse, true);\n\t\t\tlayer.addEventListener('mouseup', this.onMouse, true);\n\t\t}\n\n\t\tlayer.addEventListener('click', this.onClick, true);\n\t\tlayer.addEventListener('touchstart', this.onTouchStart, false);\n\t\tlayer.addEventListener('touchmove', this.onTouchMove, false);\n\t\tlayer.addEventListener('touchend', this.onTouchEnd, false);\n\t\tlayer.addEventListener('touchcancel', this.onTouchCancel, false);\n\n\t\t// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n\t\t// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick\n\t\t// layer when they are cancelled.\n\t\tif (!Event.prototype.stopImmediatePropagation) {\n\t\t\tlayer.removeEventListener = function(type, callback, capture) {\n\t\t\t\tvar rmv = Node.prototype.removeEventListener;\n\t\t\t\tif (type === 'click') {\n\t\t\t\t\trmv.call(layer, type, callback.hijacked || callback, capture);\n\t\t\t\t} else {\n\t\t\t\t\trmv.call(layer, type, callback, capture);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlayer.addEventListener = function(type, callback, capture) {\n\t\t\t\tvar adv = Node.prototype.addEventListener;\n\t\t\t\tif (type === 'click') {\n\t\t\t\t\tadv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {\n\t\t\t\t\t\tif (!event.propagationStopped) {\n\t\t\t\t\t\t\tcallback(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}), capture);\n\t\t\t\t} else {\n\t\t\t\t\tadv.call(layer, type, callback, capture);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// If a handler is already declared in the element's onclick attribute, it will be fired before\n\t\t// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and\n\t\t// adding it as listener.\n\t\tif (typeof layer.onclick === 'function') {\n\n\t\t\t// Android browser on at least 3.2 requires a new reference to the function in layer.onclick\n\t\t\t// - the old one won't work if passed to addEventListener directly.\n\t\t\toldOnClick = layer.onclick;\n\t\t\tlayer.addEventListener('click', function(event) {\n\t\t\t\toldOnClick(event);\n\t\t\t}, false);\n\t\t\tlayer.onclick = null;\n\t\t}\n\t}\n\n\t/**\n\t* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.\n\t*\n\t* @type boolean\n\t*/\n\tvar deviceIsWindowsPhone = navigator.userAgent.indexOf(\"Windows Phone\") >= 0;\n\n\t/**\n\t * Android requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;\n\n\n\t/**\n\t * iOS requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;\n\n\n\t/**\n\t * iOS 4 requires an exception for select elements.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOS4 = deviceIsIOS && (/OS 4_\\d(_\\d)?/).test(navigator.userAgent);\n\n\n\t/**\n\t * iOS 6.0-7.* requires the target element to be manually derived\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOSWithBadTarget = deviceIsIOS && (/OS [6-7]_\\d/).test(navigator.userAgent);\n\n\t/**\n\t * BlackBerry requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;\n\n\t/**\n\t * Determine whether a given element requires a native click.\n\t *\n\t * @param {EventTarget|Element} target Target DOM element\n\t * @returns {boolean} Returns true if the element needs a native click\n\t */\n\tFastClick.prototype.needsClick = function(target) {\n\t\tswitch (target.nodeName.toLowerCase()) {\n\n\t\t// Don't send a synthetic click to disabled inputs (issue #62)\n\t\tcase 'button':\n\t\tcase 'select':\n\t\tcase 'textarea':\n\t\t\tif (target.disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'input':\n\n\t\t\t// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)\n\t\t\tif ((deviceIsIOS && target.type === 'file') || target.disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'label':\n\t\tcase 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames\n\t\tcase 'video':\n\t\t\treturn true;\n\t\t}\n\n\t\treturn (/\\bneedsclick\\b/).test(target.className);\n\t};\n\n\n\t/**\n\t * Determine whether a given element requires a call to focus to simulate click into element.\n\t *\n\t * @param {EventTarget|Element} target Target DOM element\n\t * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.\n\t */\n\tFastClick.prototype.needsFocus = function(target) {\n\t\tswitch (target.nodeName.toLowerCase()) {\n\t\tcase 'textarea':\n\t\t\treturn true;\n\t\tcase 'select':\n\t\t\treturn !deviceIsAndroid;\n\t\tcase 'input':\n\t\t\tswitch (target.type) {\n\t\t\tcase 'button':\n\t\t\tcase 'checkbox':\n\t\t\tcase 'file':\n\t\t\tcase 'image':\n\t\t\tcase 'radio':\n\t\t\tcase 'submit':\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// No point in attempting to focus disabled inputs\n\t\t\treturn !target.disabled && !target.readOnly;\n\t\tdefault:\n\t\t\treturn (/\\bneedsfocus\\b/).test(target.className);\n\t\t}\n\t};\n\n\n\t/**\n\t * Send a click event to the specified element.\n\t *\n\t * @param {EventTarget|Element} targetElement\n\t * @param {Event} event\n\t */\n\tFastClick.prototype.sendClick = function(targetElement, event) {\n\t\tvar clickEvent, touch;\n\n\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)\n\t\tif (document.activeElement && document.activeElement !== targetElement) {\n\t\t\tdocument.activeElement.blur();\n\t\t}\n\n\t\ttouch = event.changedTouches[0];\n\n\t\t// Synthesise a click event, with an extra attribute so it can be tracked\n\t\tclickEvent = document.createEvent('MouseEvents');\n\t\tclickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n\t\tclickEvent.forwardedTouchEvent = true;\n\t\ttargetElement.dispatchEvent(clickEvent);\n\t};\n\n\tFastClick.prototype.determineEventType = function(targetElement) {\n\n\t\t//Issue #159: Android Chrome Select Box does not open with a synthetic click event\n\t\tif (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {\n\t\t\treturn 'mousedown';\n\t\t}\n\n\t\treturn 'click';\n\t};\n\n\n\t/**\n\t * @param {EventTarget|Element} targetElement\n\t */\n\tFastClick.prototype.focus = function(targetElement) {\n\t\tvar length;\n\n\t\t// Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.\n\t\tif (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {\n\t\t\tlength = targetElement.value.length;\n\t\t\ttargetElement.setSelectionRange(length, length);\n\t\t} else {\n\t\t\ttargetElement.focus();\n\t\t}\n\t};\n\n\n\t/**\n\t * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.\n\t *\n\t * @param {EventTarget|Element} targetElement\n\t */\n\tFastClick.prototype.updateScrollParent = function(targetElement) {\n\t\tvar scrollParent, parentElement;\n\n\t\tscrollParent = targetElement.fastClickScrollParent;\n\n\t\t// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the\n\t\t// target element was moved to another parent.\n\t\tif (!scrollParent || !scrollParent.contains(targetElement)) {\n\t\t\tparentElement = targetElement;\n\t\t\tdo {\n\t\t\t\tif (parentElement.scrollHeight > parentElement.offsetHeight) {\n\t\t\t\t\tscrollParent = parentElement;\n\t\t\t\t\ttargetElement.fastClickScrollParent = parentElement;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tparentElement = parentElement.parentElement;\n\t\t\t} while (parentElement);\n\t\t}\n\n\t\t// Always update the scroll top tracker if possible.\n\t\tif (scrollParent) {\n\t\t\tscrollParent.fastClickLastScrollTop = scrollParent.scrollTop;\n\t\t}\n\t};\n\n\n\t/**\n\t * @param {EventTarget} targetElement\n\t * @returns {Element|EventTarget}\n\t */\n\tFastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {\n\n\t\t// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.\n\t\tif (eventTarget.nodeType === Node.TEXT_NODE) {\n\t\t\treturn eventTarget.parentNode;\n\t\t}\n\n\t\treturn eventTarget;\n\t};\n\n\n\t/**\n\t * On touch start, record the position and scroll offset.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchStart = function(event) {\n\t\tvar targetElement, touch, selection;\n\n\t\t// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).\n\t\tif (event.targetTouches.length > 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\ttargetElement = this.getTargetElementFromEventTarget(event.target);\n\t\ttouch = event.targetTouches[0];\n\n\t\tif (deviceIsIOS) {\n\n\t\t\t// Only trusted events will deselect text on iOS (issue #49)\n\t\t\tselection = window.getSelection();\n\t\t\tif (selection.rangeCount && !selection.isCollapsed) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!deviceIsIOS4) {\n\n\t\t\t\t// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):\n\t\t\t\t// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched\n\t\t\t\t// with the same identifier as the touch event that previously triggered the click that triggered the alert.\n\t\t\t\t// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an\n\t\t\t\t// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.\n\t\t\t\t// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,\n\t\t\t\t// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,\n\t\t\t\t// random integers, it's safe to to continue if the identifier is 0 here.\n\t\t\t\tif (touch.identifier && touch.identifier === this.lastTouchIdentifier) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.lastTouchIdentifier = touch.identifier;\n\n\t\t\t\t// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:\n\t\t\t\t// 1) the user does a fling scroll on the scrollable layer\n\t\t\t\t// 2) the user stops the fling scroll with another tap\n\t\t\t\t// then the event.target of the last 'touchend' event will be the element that was under the user's finger\n\t\t\t\t// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check\n\t\t\t\t// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).\n\t\t\t\tthis.updateScrollParent(targetElement);\n\t\t\t}\n\t\t}\n\n\t\tthis.trackingClick = true;\n\t\tthis.trackingClickStart = event.timeStamp;\n\t\tthis.targetElement = targetElement;\n\n\t\tthis.touchStartX = touch.pageX;\n\t\tthis.touchStartY = touch.pageY;\n\n\t\t// Prevent phantom clicks on fast double-tap (issue #36)\n\t\tif ((event.timeStamp - this.lastClickTime) < this.tapDelay) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.touchHasMoved = function(event) {\n\t\tvar touch = event.changedTouches[0], boundary = this.touchBoundary;\n\n\t\tif (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * Update the last position.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchMove = function(event) {\n\t\tif (!this.trackingClick) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If the touch has moved, cancel the click tracking\n\t\tif (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {\n\t\t\tthis.trackingClick = false;\n\t\t\tthis.targetElement = null;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * Attempt to find the labelled control for the given label element.\n\t *\n\t * @param {EventTarget|HTMLLabelElement} labelElement\n\t * @returns {Element|null}\n\t */\n\tFastClick.prototype.findControl = function(labelElement) {\n\n\t\t// Fast path for newer browsers supporting the HTML5 control attribute\n\t\tif (labelElement.control !== undefined) {\n\t\t\treturn labelElement.control;\n\t\t}\n\n\t\t// All browsers under test that support touch events also support the HTML5 htmlFor attribute\n\t\tif (labelElement.htmlFor) {\n\t\t\treturn document.getElementById(labelElement.htmlFor);\n\t\t}\n\n\t\t// If no for attribute exists, attempt to retrieve the first labellable descendant element\n\t\t// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label\n\t\treturn labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');\n\t};\n\n\n\t/**\n\t * On touch end, determine whether to send a click event at once.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchEnd = function(event) {\n\t\tvar forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;\n\n\t\tif (!this.trackingClick) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Prevent phantom clicks on fast double-tap (issue #36)\n\t\tif ((event.timeStamp - this.lastClickTime) < this.tapDelay) {\n\t\t\tthis.cancelNextClick = true;\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Reset to prevent wrong click cancel on input (issue #156).\n\t\tthis.cancelNextClick = false;\n\n\t\tthis.lastClickTime = event.timeStamp;\n\n\t\ttrackingClickStart = this.trackingClickStart;\n\t\tthis.trackingClick = false;\n\t\tthis.trackingClickStart = 0;\n\n\t\t// On some iOS devices, the targetElement supplied with the event is invalid if the layer\n\t\t// is performing a transition or scroll, and has to be re-detected manually. Note that\n\t\t// for this to function correctly, it must be called *after* the event target is checked!\n\t\t// See issue #57; also filed as rdar://13048589 .\n\t\tif (deviceIsIOSWithBadTarget) {\n\t\t\ttouch = event.changedTouches[0];\n\n\t\t\t// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null\n\t\t\ttargetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;\n\t\t\ttargetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;\n\t\t}\n\n\t\ttargetTagName = targetElement.tagName.toLowerCase();\n\t\tif (targetTagName === 'label') {\n\t\t\tforElement = this.findControl(targetElement);\n\t\t\tif (forElement) {\n\t\t\t\tthis.focus(targetElement);\n\t\t\t\tif (deviceIsAndroid) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ttargetElement = forElement;\n\t\t\t}\n\t\t} else if (this.needsFocus(targetElement)) {\n\n\t\t\t// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.\n\t\t\t// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).\n\t\t\tif ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {\n\t\t\t\tthis.targetElement = null;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.focus(targetElement);\n\t\t\tthis.sendClick(targetElement, event);\n\n\t\t\t// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.\n\t\t\t// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)\n\t\t\tif (!deviceIsIOS || targetTagName !== 'select') {\n\t\t\t\tthis.targetElement = null;\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (deviceIsIOS && !deviceIsIOS4) {\n\n\t\t\t// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled\n\t\t\t// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).\n\t\t\tscrollParent = targetElement.fastClickScrollParent;\n\t\t\tif (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Prevent the actual click from going though - unless the target node is marked as requiring\n\t\t// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.\n\t\tif (!this.needsClick(targetElement)) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendClick(targetElement, event);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * On touch cancel, stop tracking the click.\n\t *\n\t * @returns {void}\n\t */\n\tFastClick.prototype.onTouchCancel = function() {\n\t\tthis.trackingClick = false;\n\t\tthis.targetElement = null;\n\t};\n\n\n\t/**\n\t * Determine mouse events which should be permitted.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onMouse = function(event) {\n\n\t\t// If a target element was never set (because a touch event was never fired) allow the event\n\t\tif (!this.targetElement) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (event.forwardedTouchEvent) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Programmatically generated events targeting a specific element should be permitted\n\t\tif (!event.cancelable) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Derive and check the target element to see whether the mouse event needs to be permitted;\n\t\t// unless explicitly enabled, prevent non-touch click events from triggering actions,\n\t\t// to prevent ghost/doubleclicks.\n\t\tif (!this.needsClick(this.targetElement) || this.cancelNextClick) {\n\n\t\t\t// Prevent any user-added listeners declared on FastClick element from being fired.\n\t\t\tif (event.stopImmediatePropagation) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t} else {\n\n\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n\t\t\t\tevent.propagationStopped = true;\n\t\t\t}\n\n\t\t\t// Cancel the event\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// If the mouse event is permitted, return true for the action to go through.\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * On actual clicks, determine whether this is a touch-generated click, a click action occurring\n\t * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or\n\t * an actual click which should be permitted.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onClick = function(event) {\n\t\tvar permitted;\n\n\t\t// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.\n\t\tif (this.trackingClick) {\n\t\t\tthis.targetElement = null;\n\t\t\tthis.trackingClick = false;\n\t\t\treturn true;\n\t\t}\n\n\t\t// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.\n\t\tif (event.target.type === 'submit' && event.detail === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tpermitted = this.onMouse(event);\n\n\t\t// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.\n\t\tif (!permitted) {\n\t\t\tthis.targetElement = null;\n\t\t}\n\n\t\t// If clicks are permitted, return true for the action to go through.\n\t\treturn permitted;\n\t};\n\n\n\t/**\n\t * Remove all FastClick's event listeners.\n\t *\n\t * @returns {void}\n\t */\n\tFastClick.prototype.destroy = function() {\n\t\tvar layer = this.layer;\n\n\t\tif (deviceIsAndroid) {\n\t\t\tlayer.removeEventListener('mouseover', this.onMouse, true);\n\t\t\tlayer.removeEventListener('mousedown', this.onMouse, true);\n\t\t\tlayer.removeEventListener('mouseup', this.onMouse, true);\n\t\t}\n\n\t\tlayer.removeEventListener('click', this.onClick, true);\n\t\tlayer.removeEventListener('touchstart', this.onTouchStart, false);\n\t\tlayer.removeEventListener('touchmove', this.onTouchMove, false);\n\t\tlayer.removeEventListener('touchend', this.onTouchEnd, false);\n\t\tlayer.removeEventListener('touchcancel', this.onTouchCancel, false);\n\t};\n\n\n\t/**\n\t * Check whether FastClick is needed.\n\t *\n\t * @param {Element} layer The layer to listen on\n\t */\n\tFastClick.notNeeded = function(layer) {\n\t\tvar metaViewport;\n\t\tvar chromeVersion;\n\t\tvar blackberryVersion;\n\t\tvar firefoxVersion;\n\n\t\t// Devices that don't support touch don't need FastClick\n\t\tif (typeof window.ontouchstart === 'undefined') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Chrome version - zero for other browsers\n\t\tchromeVersion = +(/Chrome\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\n\n\t\tif (chromeVersion) {\n\n\t\t\tif (deviceIsAndroid) {\n\t\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\n\t\t\t\tif (metaViewport) {\n\t\t\t\t\t// Chrome on Android with user-scalable=\"no\" doesn't need FastClick (issue #89)\n\t\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Chrome 32 and above with width=device-width or less don't need FastClick\n\t\t\t\t\tif (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Chrome desktop doesn't need FastClick (issue #15)\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (deviceIsBlackBerry10) {\n\t\t\tblackberryVersion = navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/);\n\n\t\t\t// BlackBerry 10.3+ does not require Fastclick library.\n\t\t\t// https://github.com/ftlabs/fastclick/issues/251\n\t\t\tif (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {\n\t\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\n\t\t\t\tif (metaViewport) {\n\t\t\t\t\t// user-scalable=no eliminates click delay.\n\t\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// width=device-width (or less than device-width) eliminates click delay.\n\t\t\t\t\tif (document.documentElement.scrollWidth <= window.outerWidth) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)\n\t\tif (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Firefox version - zero for other browsers\n\t\tfirefoxVersion = +(/Firefox\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\n\n\t\tif (firefoxVersion >= 27) {\n\t\t\t// Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896\n\n\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\t\t\tif (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version\n\t\t// http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx\n\t\tif (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * Factory method for creating a FastClick object\n\t *\n\t * @param {Element} layer The layer to listen on\n\t * @param {Object} [options={}] The options to override the defaults\n\t */\n\tFastClick.attach = function(layer, options) {\n\t\treturn new FastClick(layer, options);\n\t};\n\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(function() {\n\t\t\treturn FastClick;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = FastClick.attach;\n\t\tmodule.exports.FastClick = FastClick;\n\t} else {\n\t\twindow.FastClick = FastClick;\n\t}\n}());\n","import * as utils from '../utils.js';\n\nclass Header {\n\n  constructor(el) {\n\n    //console.log('initHeader');\n\n\t  this.DOM = {};\n\t  this.DOM.el = el;\n\t  this.DOM.body = document.body;\n\t  this.DOM.brand = this.DOM.el.querySelector('.brand');\n    this.DOM.toggleOpen = this.DOM.el.querySelector('.toggle__menu__open');\n\t  this.DOM.toggleClose = this.DOM.el.querySelector('.toggle__menu__close');\n    this.DOM.menuContainer = this.DOM.el.querySelector('nav');\n    this.menuOpen = false;\n\n\t  this.init();\n\n  }\n\n  init() {\n\n    //animation Open\n    const menuOpenTL = new TimelineMax({ paused: true});\n\n  \t//toggle\n  \tthis.DOM.toggleOpen.addEventListener('click',(e) => {\n\n  \t\te.preventDefault();\n  \t\tthis.DOM.body.classList.toggle('showMenu');\n\n      //if Openning\n  \t\tif ( this.DOM.body.classList.contains('showMenu') ) {\n\n        this.menuOpen = true;\n        this.DOM.body.style.overflow = \"hidden\";\n        this.DOM.menuContainer.style.visibility = \"visible\";\n\n        //Animation\n        menuOpenTL.totalDuration(2).restart();\n\n  \t\t} else {\n\n        this.menuOpen = false;\n\n        //Animation Reverse\n        menuOpenTL.totalDuration(1).reverse();\n\n        this.DOM.body.style.overflow = \"auto\";\n        this.DOM.menuContainer.style.visibility = \"hidden\";\n\n  \t\t}\n\n  \t});\n\n    //toggle\n    this.DOM.toggleClose.addEventListener('click',(e) => {\n\n      e.preventDefault();\n      this.DOM.body.classList.toggle('showMenu');\n\n      //if Openning\n      if ( this.DOM.body.classList.contains('showMenu') ) {\n\n        this.menuOpen = true;\n        this.DOM.body.style.overflow = \"hidden\";\n        this.DOM.menuContainer.style.visibility = \"visible\";\n\n        //Animation\n        menuOpenTL.totalDuration(2).restart();\n\n      } else {\n\n        this.menuOpen = false;\n\n        //Animation Reverse\n        menuOpenTL.totalDuration(1).reverse();\n\n        this.DOM.body.style.overflow = \"auto\";\n        this.DOM.menuContainer.style.visibility = \"hidden\";\n\n      }\n\n    });\n\n\n    // Links Click\n    const links = this.DOM.menuContainer.querySelectorAll('.nav__link')\n    links.forEach((elem) => {\n\n      elem.addEventListener('click',(e)=> {\n        if ( this.DOM.menuContainer.querySelector('.active') != null ) {\n           this.DOM.menuContainer.querySelector('.active').classList.remove('active');\n        }\n        e.currentTarget.parentNode.classList.add('active');\n      })\n\n    });\n\n    // Brand Click\n    this.DOM.brand.addEventListener('click',(e)=> {\n\n      if ( this.DOM.menuContainer.querySelector('.active') != null ) {\n         this.DOM.menuContainer.querySelector('.active').classList.remove('active');\n      }\n\n    })\n\n  }\n\n}\n\nexport default Header;\n","import 'nodelist-foreach-polyfill'\nimport FastClick from 'fastclick';\nimport * as utils from './utils.js';\n\nimport Header from './modules/header.js';\n\nimport {initHome} from './pages/home.js';\nimport {initPage} from './pages/page.js';\n\nclass App {\n\n  constructor(opt = {}) {\n\n    //Declarations\n    this.sy = 0;\n    this.devMode = true;\n    this.DOM = {};\n    this.DOM.body = document.body;\n    this.DOM.footer = document.querySelector('footer');\n    this.DOM.barbaWrapper = document.querySelector('#barba-wrapper');\n\n    //Signature Wokine\n    window.scrollTo(0,0)\n    console.log(\"%cCreated by Wokine, with ❤\",\"color: #000; padding: 5px 0px 1px; border-bottom:2px solid #71d1c2;\"),console.log(\"%chttp://wokine.com\",\"color:#ccc\")\n\n    this.init();\n    this.addEvents();\n    this.intro();\n\n  }\n\n  init() {\n\n    //DevMode ( infos navigateur )\n    if (this.devMode) {\n  \t\tconsole.log('DEVMODE BIATCH');\n      console.log(window.Sniff);\n    }\n\n    //Resets\n    FastClick(this.DOM.body);\n    this.DOM.body.scrollTop = document.documentElement.scrollTop = 0;\n    history.scrollRestoration = 'manual';\n\n    // Create Header\n  \tconst header = new Header(document.querySelector('body > header'));\n\n    //Barba\n    Barba.Dispatcher.on('newPageReady', (currentStatus, oldStatus, container) => {\n\n      // newPageReady\n\n      // Animations\n      if (!window.Sniff.features.mobile) {\n        this.initPrllx(container);\n        this.initInView(container);\n      }\n\n    });\n\n    Barba.Dispatcher.on('linkClicked', (HTMLElement, MouseEvent) => {\n\n      //linkClicked\n\n    })\n\n    Barba.Dispatcher.on('initStateChange', function() {\n\n      //initStateChange\n  \t\tif (typeof ga === 'function') {\n  \t\t\tga('send', 'pageview', location.pathname);\n  \t\t}\n\n  \t});\n\n    var pageTransition = Barba.BaseTransition.extend({\n\n  \t\tstart: function() {\n\n  \t\t  Promise.all([this.newContainerLoading, this.transitionOut()])\n  \t\t  .then(this.transitionIn.bind(this));\n\n  \t\t},\n\n  \t\ttransitionOut: function() {\n\n  \t\t\tlet deferred = Barba.Utils.deferred();\n  \t\t\tlet oldContainer = this.oldContainer;\n\n\t\t\t  const pageOut = new TimelineMax({ paused:true, onComplete:()=>{\n\n          //Close Menu if Open\n          if(header.menuOpen){\n            var click = new Event('click');\n            header.DOM.toggleClose.dispatchEvent(click);\n          }\n\n          window.scrollTo(0,0);\n\t\t\t\t  deferred.resolve();\n\n\t\t\t  }});\n\n        pageOut.to(oldContainer, 0.8, {opacity:0, ease:Power3.easeOut}, 0);\n        pageOut.play();\n\n  \t\t\treturn deferred.promise;\n\n  \t\t},\n\n  \t\ttransitionIn: function() {\n\n  \t\t\tvar _this = this;\n\n  \t\t\tthis.oldContainer.style.display = \"none\";\n  \t\t\tthis.newContainer.style.visibility = 'visible';\n\n\t\t    const pageIn = new TimelineMax({ paused:true, onComplete:()=>{\n\t\t\t\t\t_this.done();\n\t\t\t\t}})\n\n        pageIn.from(this.newContainer, 1.2, {opacity:0, ease:Power3.easeOut}, 0);\n        pageIn.play();\n\n  \t\t}\n\n  \t});\n\n  \tBarba.Pjax.getTransition = function() {\n  \t  return pageTransition;\n  \t};\n\n  \t//routes\n  \tinitHome();\n  \tinitPage();\n\n    Barba.Pjax.start();\n\n  }\n\n  addEvents() {\n\n    window.addEventListener('scroll', (e) => {\n  \t\tthis.sy = window.pageYOffset || document.documentElement.scrollTop;\n  \t})\n\n  }\n\n  initPrllx(container) {\n\n\t  const TLPrllxs = []\n\t  const prllxs = container.querySelectorAll('*[data-prllx]');\n\t  prllxs.forEach((item) => {\n\n\t\t    let prllxTL = new TimelineMax({ paused: true});\n        TweenMax.set(item, { y: -1 * item.getAttribute('data-prllx') });\n  \t    prllxTL.to(item, 1, { y:item.getAttribute('data-prllx'), overwrite:\"all\", ease:Power0.easeNone });\n\t\t    TLPrllxs.push(prllxTL);\n\n\t  });\n\n\t  var prllxRender = function (){\n\n\t    prllxs.forEach((item, index) => {\n        let from = item.getBoundingClientRect().top + this.sy - window.innerHeight ;\n\t      let norm = utils.clamp(utils.normalize(this.sy,  from ,  item.getBoundingClientRect().top + this.sy + item.offsetHeight), 0, 1);\n\t\t    TLPrllxs[index].progress(norm);\n\t    });\n\n\t  }\n\n\t  TweenMax.ticker.addEventListener(\"tick\", prllxRender, this, true, 1);\n\n  }\n\n  initInView(container) {\n\n\n    //fadeIn\n    const fadeInElems = container.querySelectorAll('.fadeInView');\n\n    if (fadeInElems) {\n      fadeInElems.forEach((elem) => {\n        elem.fadeInTL = new TimelineMax({ paused: true});\n        elem.fadeInTL.from(elem, 1, {y:80, opacity:0, ease:Power3.easeOut}, 0);\n      })\n\n      inView(\"main .fadeInView\").on('enter', el => {\n        if(!el.done)  el.fadeInTL.duration(animationDuration).play();\n      }).on('exit', el => {\n        el.done = true;\n        //el.fadeInTL.duration(0.2).reverse();\n      });\n\n    }\n\n    //letterIn\n    const lettersInElems = container.querySelectorAll('.lettersInView');\n    if (lettersInElems) {\n\n      lettersInElems.forEach((elem) => {\n        elem.splitLetters = new SplitText(elem, {type:\"chars\"});\n        elem.lettersInTL = new TimelineMax({ paused: true});\n        elem.lettersInTL.staggerFrom(elem.splitLetters.chars, 1, {y:20, opacity:0, ease:Power3.easeOut}, 0.015, 0);\n      })\n\n      inView(\"main .lettersInView\").on('enter', el => {\n        if(!el.done)  el.lettersInTL.duration(animationDuration).play();\n      }).on('exit', el => {\n        el.done = true;\n        el.innerHTML = el.splitLetters._originals;\n        //el.lettersInTL.duration(0.2).reverse();\n      });\n\n    }\n\n    //linesIn\n    const linesInElems = container.querySelectorAll('.linesInView');\n    if (linesInElems) {\n\n      linesInElems.forEach((elem) => {\n        elem.splitLines = new SplitText(elem, {type:\"lines\"});\n        elem.linesInTL = new TimelineMax({ paused: true});\n        elem.linesInTL.staggerFrom(elem.splitLines.lines, 1, {y:20, opacity:0, ease:Power3.easeOut}, 0.05, 0.2);\n      })\n\n      inView(\"main .linesInView\").on('enter', el => {\n        if(!el.done)  el.linesInTL.duration(animationDuration * 1.5).play();\n      }).on('exit', el => {\n        el.done = true;\n        el.innerHTML = el.splitLines._originals;\n        //el.linesInTL.duration(0.2).reverse();\n      });\n\n    }\n\n    inView.offset({\n        top: -120,\n        left:-50,\n        right:-50,\n        bottom: 0,\n    });\n\n  }\n\n  intro() {\n\n    const intro = new TimelineMax({ paused:true, onStart:()=>{\n      this.DOM.body.classList.remove('is-loading');\n    }})\n\n    intro.from(this.DOM.body, 1.2, {opacity:0, ease:Power3.easeOut}, 0.3)\n    intro.play();\n\n  }\n\n}\n\nconst app = new App();\n"],"names":["normalize","value","min","max","clamp","initHome","Barba","BaseView","extend","init","initPage","FastClick","layer","options","oldOnClick","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","tapDelay","tapTimeout","notNeeded","methods","context","this","i","l","length","method","apply","arguments","bind","deviceIsAndroid","addEventListener","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","Event","prototype","stopImmediatePropagation","removeEventListener","type","callback","capture","rmv","Node","call","hijacked","adv","event","propagationStopped","onclick","deviceIsWindowsPhone","navigator","userAgent","indexOf","deviceIsIOS","test","deviceIsIOS4","deviceIsIOSWithBadTarget","deviceIsBlackBerry10","needsClick","target","nodeName","toLowerCase","disabled","className","needsFocus","readOnly","sendClick","clickEvent","touch","document","activeElement","blur","changedTouches","createEvent","initMouseEvent","determineEventType","window","screenX","screenY","clientX","clientY","forwardedTouchEvent","dispatchEvent","tagName","focus","setSelectionRange","updateScrollParent","scrollParent","parentElement","fastClickScrollParent","contains","scrollHeight","offsetHeight","fastClickLastScrollTop","scrollTop","getTargetElementFromEventTarget","eventTarget","nodeType","TEXT_NODE","parentNode","selection","targetTouches","getSelection","rangeCount","isCollapsed","identifier","preventDefault","timeStamp","pageX","pageY","lastClickTime","touchHasMoved","boundary","Math","abs","findControl","labelElement","undefined","control","htmlFor","getElementById","querySelector","forElement","targetTagName","cancelNextClick","elementFromPoint","pageXOffset","pageYOffset","top","cancelable","stopPropagation","permitted","detail","destroy","metaViewport","chromeVersion","blackberryVersion","ontouchstart","exec","content","documentElement","scrollWidth","outerWidth","match","style","msTouchAction","touchAction","attach","module","exports","Header","el","DOM","body","brand","toggleOpen","toggleClose","menuContainer","menuOpen","menuOpenTL","TimelineMax","paused","e","classList","toggle","_this","overflow","visibility","totalDuration","restart","reverse","querySelectorAll","forEach","elem","remove","currentTarget","add","sy","devMode","footer","barbaWrapper","scrollTo","log","console","addEvents","intro","Sniff","scrollRestoration","header","Dispatcher","on","currentStatus","oldStatus","container","features","mobile","initPrllx","initInView","HTMLElement","MouseEvent","ga","location","pathname","pageTransition","BaseTransition","all","newContainerLoading","transitionOut","then","transitionIn","deferred","Utils","oldContainer","pageOut","onComplete","click","resolve","to","opacity","ease","Power3","easeOut","play","promise","display","newContainer","pageIn","done","from","Pjax","getTransition","start","TLPrllxs","prllxs","item","prllxTL","set","y","getAttribute","overwrite","Power0","easeNone","push","ticker","index","getBoundingClientRect","_this4","innerHeight","norm","utils","progress","fadeInElems","fadeInTL","duration","animationDuration","lettersInElems","splitLetters","SplitText","lettersInTL","staggerFrom","chars","innerHTML","_originals","linesInElems","splitLines","linesInTL","lines","offset","onStart"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL3N0YXJ0ZXItdGhlbWUtdGltYmVyL2Fzc2V0cy9qcy91dGlscy5qcyIsIi9Wb2x1bWVzL01hY2ludG9zaCBIRC9Ecm9wYm94L0RvY3VtZW50cy9EZXNpZ24vY29kZS9NQU1QL2h0ZG9jcy9kZXYtd29raW5lL3N0YXJ0ZXItdGhlbWUtdGltYmVyL2Fzc2V0cy9qcy9wYWdlcy9ob21lLmpzIiwiL1ZvbHVtZXMvTWFjaW50b3NoIEhEL0Ryb3Bib3gvRG9jdW1lbnRzL0Rlc2lnbi9jb2RlL01BTVAvaHRkb2NzL2Rldi13b2tpbmUvc3RhcnRlci10aGVtZS10aW1iZXIvYXNzZXRzL2pzL3BhZ2VzL3BhZ2UuanMiLCIvVm9sdW1lcy9NYWNpbnRvc2ggSEQvRHJvcGJveC9Eb2N1bWVudHMvRGVzaWduL2NvZGUvTUFNUC9odGRvY3MvZGV2LXdva2luZS9ub2RlX21vZHVsZXMvZmFzdGNsaWNrL2xpYi9mYXN0Y2xpY2suanMiLCIvVm9sdW1lcy9NYWNpbnRvc2ggSEQvRHJvcGJveC9Eb2N1bWVudHMvRGVzaWduL2NvZGUvTUFNUC9odGRvY3MvZGV2LXdva2luZS9zdGFydGVyLXRoZW1lLXRpbWJlci9hc3NldHMvanMvbW9kdWxlcy9oZWFkZXIuanMiLCIvVm9sdW1lcy9NYWNpbnRvc2ggSEQvRHJvcGJveC9Eb2N1bWVudHMvRGVzaWduL2NvZGUvTUFNUC9odGRvY3MvZGV2LXdva2luZS9zdGFydGVyLXRoZW1lLXRpbWJlci9hc3NldHMvanMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBvbkxvYWRlZE1ldGFkYXRhKGUpIHtcblxuICBjb25zdCB2aWRlbyA9ICQoZS50YXJnZXQpO1xuICBsZXQgYXNwZWN0UmF0aW8gPSB2aWRlby5kYXRhKCdhc3BlY3RSYXRpbycpO1xuICBpZiAoYXNwZWN0UmF0aW8gPT0gdW5kZWZpbmVkKSB7XG4gICAgICBhc3BlY3RSYXRpbyA9IHZpZGVvLndpZHRoKCkgLyB2aWRlby5oZWlnaHQoKTtcbiAgICAgIHZpZGVvLmRhdGEoJ2FzcGVjdFJhdGlvJywgYXNwZWN0UmF0aW8pO1xuICB9XG4gIHJlc2l6ZVZpZGVvKHZpZGVvKTtcblxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplVmlkZW8odmlkZW8pIHtcblxuICBsZXQgbmV3V2lkdGg7XG4gIGxldCBuZXdIZWlnaHQ7XG4gIGxldCB2aWRlb1JhdGlvID0gdmlkZW8uZGF0YSgnYXNwZWN0UmF0aW8nKTtcbiAgaWYgKHZpZGVvUmF0aW8gPT0gdW5kZWZpbmVkKSB2aWRlb1JhdGlvID0gMS43Nzc3Nzc3O1xuICBsZXQgcGFyZW50V2lkdGggID0gdmlkZW8ucGFyZW50KCkud2lkdGgoKTtcbiAgbGV0IHBhcmVudEhlaWdodCA9IHZpZGVvLnBhcmVudCgpLmhlaWdodCgpO1xuICBsZXQgcGFyZW50UmF0aW8gPSBwYXJlbnRXaWR0aCAvIHBhcmVudEhlaWdodDtcblxuICBpZiAocGFyZW50UmF0aW8gPiB2aWRlb1JhdGlvICYmICF2aWRlby5oYXNDbGFzcygnYmdXaWR0aCcpKSB7XG4gICAgdmlkZW8ucmVtb3ZlQ2xhc3MoXCJiZ0hlaWdodFwiKTtcbiAgICB2aWRlby5hZGRDbGFzcyhcImJnV2lkdGhcIik7XG4gIH1cbiAgaWYgKHBhcmVudFJhdGlvIDw9IHZpZGVvUmF0aW8gJiYgIXZpZGVvLmhhc0NsYXNzKCdiZ0hlaWdodCcpKSB7XG4gICAgdmlkZW8ucmVtb3ZlQ2xhc3MoXCJiZ1dpZHRoXCIpO1xuICAgIHZpZGVvLmFkZENsYXNzKFwiYmdIZWlnaHRcIik7XG4gIH1cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsYXkobXMpe1xuICAgIHZhciBjdHIsIHJlaiwgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgY3RyID0gc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XG4gICAgICAgIHJlaiA9IHJlamVjdDtcbiAgICB9KTtcbiAgICBwLmNhbmNlbCA9IGZ1bmN0aW9uKCl7IGNsZWFyVGltZW91dChjdHIpOyByZWooRXJyb3IoXCJDYW5jZWxsZWRcIikpfTtcbiAgICByZXR1cm4gcDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUludChtaW4sbWF4KcKge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKG1heC1taW4rMSkrbWluKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZSh2YWx1ZSwgbWluLCBtYXgpIHtcbiAgcmV0dXJuICh2YWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiAodmFsdWUgPiBtYXggPyBtYXggOiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaW11bGF0ZUNsaWNrKGVsZW0pIHtcblxuICAgIHZhciBldnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICAgIHZpZXc6IHdpbmRvd1xuICAgIH0pO1xuXG4gICAgdmFyIGNhbmNlbGVkID0gIWVsZW0uZGlzcGF0Y2hFdmVudChldnQpO1xuXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbW91c2VNb3ZlZm4oZSkge1xuXG4gIGxldCB4TW91c2UgPSBlLnBhZ2VYIC0gZS5jdXJyZW50VGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSAoIGUuY3VycmVudFRhcmdldC5vZmZzZXRXaWR0aCAvIDIgKTtcbiAgbGV0IHlNb3VzZSA9IGUucGFnZVkgLSB3aW5kb3cucGFnZVlPZmZzZXQgLSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gKCBlLmN1cnJlbnRUYXJnZXQub2Zmc2V0SGVpZ2h0IC8gMiApO1xuICBjb25zdCBtb3VzZUVsZW1lbnRzID0gZS5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJypbZGF0YS1tb3VzZS1wYXJhbGxheF0nKTtcbiAgbW91c2VFbGVtZW50cy5mb3JFYWNoKGVsZW0gPT4ge1xuICAgIHZhciBmYWN0b3IgPSBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tb3VzZS1wYXJhbGxheCcpO1xuICAgIGxldCB4RmluYWwgPSB4TW91c2UgKiBmYWN0b3I7XG4gICAgbGV0IHlGaW5hbCA9IHlNb3VzZSAqIGZhY3RvcjtcbiAgICBUd2Vlbk1heC50byhlbGVtLCAxLjIsIHt4OnhGaW5hbCwgeTp5RmluYWx9KTtcbiAgfSk7XG5cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBpbml0SG9tZSgpIHtcblxuXHR2YXIgSG9tZSA9IEJhcmJhLkJhc2VWaWV3LmV4dGVuZCh7XG5cblx0XHRuYW1lc3BhY2U6ICdwYWdlLWhvbWUnLFxuXG5cdFx0b25FbnRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ0luaXQgSG9tZScpO1xuXG5cdFx0fSxcblxuXHRcdG9uTGVhdmVDb21wbGV0ZWQ6IGZ1bmN0aW9uKCkge1xuXG5cblxuXHRcdH1cblxuXHR9KVxuXG5cdEhvbWUuaW5pdCgpO1xuXG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaW5pdFBhZ2UoKSB7XG5cblx0dmFyIFBhZ2UgPSBCYXJiYS5CYXNlVmlldy5leHRlbmQoe1xuXG5cdFx0bmFtZXNwYWNlOiAncGFnZScsXG5cblx0XHRvbkVudGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly9jb25zb2xlLmxvZygnSW5pdCBQYWdlJyk7XG5cblx0XHR9LFxuXG5cdFx0b25MZWF2ZUNvbXBsZXRlZDogZnVuY3Rpb24oKSB7XG5cblxuXG5cdFx0fVxuXG5cdH0pXG5cblx0UGFnZS5pbml0KCk7XG5cbn1cbiIsIjsoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0LyoqXG5cdCAqIEBwcmVzZXJ2ZSBGYXN0Q2xpY2s6IHBvbHlmaWxsIHRvIHJlbW92ZSBjbGljayBkZWxheXMgb24gYnJvd3NlcnMgd2l0aCB0b3VjaCBVSXMuXG5cdCAqXG5cdCAqIEBjb2RpbmdzdGFuZGFyZCBmdGxhYnMtanN2MlxuXHQgKiBAY29weXJpZ2h0IFRoZSBGaW5hbmNpYWwgVGltZXMgTGltaXRlZCBbQWxsIFJpZ2h0cyBSZXNlcnZlZF1cblx0ICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UgKHNlZSBMSUNFTlNFLnR4dClcblx0ICovXG5cblx0Lypqc2xpbnQgYnJvd3Nlcjp0cnVlLCBub2RlOnRydWUqL1xuXHQvKmdsb2JhbCBkZWZpbmUsIEV2ZW50LCBOb2RlKi9cblxuXG5cdC8qKlxuXHQgKiBJbnN0YW50aWF0ZSBmYXN0LWNsaWNraW5nIGxpc3RlbmVycyBvbiB0aGUgc3BlY2lmaWVkIGxheWVyLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtFbGVtZW50fSBsYXllciBUaGUgbGF5ZXIgdG8gbGlzdGVuIG9uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHRzXG5cdCAqL1xuXHRmdW5jdGlvbiBGYXN0Q2xpY2sobGF5ZXIsIG9wdGlvbnMpIHtcblx0XHR2YXIgb2xkT25DbGljaztcblxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0LyoqXG5cdFx0ICogV2hldGhlciBhIGNsaWNrIGlzIGN1cnJlbnRseSBiZWluZyB0cmFja2VkLlxuXHRcdCAqXG5cdFx0ICogQHR5cGUgYm9vbGVhblxuXHRcdCAqL1xuXHRcdHRoaXMudHJhY2tpbmdDbGljayA9IGZhbHNlO1xuXG5cblx0XHQvKipcblx0XHQgKiBUaW1lc3RhbXAgZm9yIHdoZW4gY2xpY2sgdHJhY2tpbmcgc3RhcnRlZC5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIG51bWJlclxuXHRcdCAqL1xuXHRcdHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0ID0gMDtcblxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGVsZW1lbnQgYmVpbmcgdHJhY2tlZCBmb3IgYSBjbGljay5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIEV2ZW50VGFyZ2V0XG5cdFx0ICovXG5cdFx0dGhpcy50YXJnZXRFbGVtZW50ID0gbnVsbDtcblxuXG5cdFx0LyoqXG5cdFx0ICogWC1jb29yZGluYXRlIG9mIHRvdWNoIHN0YXJ0IGV2ZW50LlxuXHRcdCAqXG5cdFx0ICogQHR5cGUgbnVtYmVyXG5cdFx0ICovXG5cdFx0dGhpcy50b3VjaFN0YXJ0WCA9IDA7XG5cblxuXHRcdC8qKlxuXHRcdCAqIFktY29vcmRpbmF0ZSBvZiB0b3VjaCBzdGFydCBldmVudC5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIG51bWJlclxuXHRcdCAqL1xuXHRcdHRoaXMudG91Y2hTdGFydFkgPSAwO1xuXG5cblx0XHQvKipcblx0XHQgKiBJRCBvZiB0aGUgbGFzdCB0b3VjaCwgcmV0cmlldmVkIGZyb20gVG91Y2guaWRlbnRpZmllci5cblx0XHQgKlxuXHRcdCAqIEB0eXBlIG51bWJlclxuXHRcdCAqL1xuXHRcdHRoaXMubGFzdFRvdWNoSWRlbnRpZmllciA9IDA7XG5cblxuXHRcdC8qKlxuXHRcdCAqIFRvdWNobW92ZSBib3VuZGFyeSwgYmV5b25kIHdoaWNoIGEgY2xpY2sgd2lsbCBiZSBjYW5jZWxsZWQuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSBudW1iZXJcblx0XHQgKi9cblx0XHR0aGlzLnRvdWNoQm91bmRhcnkgPSBvcHRpb25zLnRvdWNoQm91bmRhcnkgfHwgMTA7XG5cblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBGYXN0Q2xpY2sgbGF5ZXIuXG5cdFx0ICpcblx0XHQgKiBAdHlwZSBFbGVtZW50XG5cdFx0ICovXG5cdFx0dGhpcy5sYXllciA9IGxheWVyO1xuXG5cdFx0LyoqXG5cdFx0ICogVGhlIG1pbmltdW0gdGltZSBiZXR3ZWVuIHRhcCh0b3VjaHN0YXJ0IGFuZCB0b3VjaGVuZCkgZXZlbnRzXG5cdFx0ICpcblx0XHQgKiBAdHlwZSBudW1iZXJcblx0XHQgKi9cblx0XHR0aGlzLnRhcERlbGF5ID0gb3B0aW9ucy50YXBEZWxheSB8fCAyMDA7XG5cblx0XHQvKipcblx0XHQgKiBUaGUgbWF4aW11bSB0aW1lIGZvciBhIHRhcFxuXHRcdCAqXG5cdFx0ICogQHR5cGUgbnVtYmVyXG5cdFx0ICovXG5cdFx0dGhpcy50YXBUaW1lb3V0ID0gb3B0aW9ucy50YXBUaW1lb3V0IHx8IDcwMDtcblxuXHRcdGlmIChGYXN0Q2xpY2subm90TmVlZGVkKGxheWVyKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFNvbWUgb2xkIHZlcnNpb25zIG9mIEFuZHJvaWQgZG9uJ3QgaGF2ZSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZFxuXHRcdGZ1bmN0aW9uIGJpbmQobWV0aG9kLCBjb250ZXh0KSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7IHJldHVybiBtZXRob2QuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTsgfTtcblx0XHR9XG5cblxuXHRcdHZhciBtZXRob2RzID0gWydvbk1vdXNlJywgJ29uQ2xpY2snLCAnb25Ub3VjaFN0YXJ0JywgJ29uVG91Y2hNb3ZlJywgJ29uVG91Y2hFbmQnLCAnb25Ub3VjaENhbmNlbCddO1xuXHRcdHZhciBjb250ZXh0ID0gdGhpcztcblx0XHRmb3IgKHZhciBpID0gMCwgbCA9IG1ldGhvZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRjb250ZXh0W21ldGhvZHNbaV1dID0gYmluZChjb250ZXh0W21ldGhvZHNbaV1dLCBjb250ZXh0KTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnMgYXMgcmVxdWlyZWRcblx0XHRpZiAoZGV2aWNlSXNBbmRyb2lkKSB7XG5cdFx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLm9uTW91c2UsIHRydWUpO1xuXHRcdFx0bGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlLCB0cnVlKTtcblx0XHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2UsIHRydWUpO1xuXHRcdH1cblxuXHRcdGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcblx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQsIGZhbHNlKTtcblx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLCBmYWxzZSk7XG5cdFx0bGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQsIGZhbHNlKTtcblx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMub25Ub3VjaENhbmNlbCwgZmFsc2UpO1xuXG5cdFx0Ly8gSGFjayBpcyByZXF1aXJlZCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IEV2ZW50I3N0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiAoZS5nLiBBbmRyb2lkIDIpXG5cdFx0Ly8gd2hpY2ggaXMgaG93IEZhc3RDbGljayBub3JtYWxseSBzdG9wcyBjbGljayBldmVudHMgYnViYmxpbmcgdG8gY2FsbGJhY2tzIHJlZ2lzdGVyZWQgb24gdGhlIEZhc3RDbGlja1xuXHRcdC8vIGxheWVyIHdoZW4gdGhleSBhcmUgY2FuY2VsbGVkLlxuXHRcdGlmICghRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xuXHRcdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrLCBjYXB0dXJlKSB7XG5cdFx0XHRcdHZhciBybXYgPSBOb2RlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyO1xuXHRcdFx0XHRpZiAodHlwZSA9PT0gJ2NsaWNrJykge1xuXHRcdFx0XHRcdHJtdi5jYWxsKGxheWVyLCB0eXBlLCBjYWxsYmFjay5oaWphY2tlZCB8fCBjYWxsYmFjaywgY2FwdHVyZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cm12LmNhbGwobGF5ZXIsIHR5cGUsIGNhbGxiYWNrLCBjYXB0dXJlKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0bGF5ZXIuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrLCBjYXB0dXJlKSB7XG5cdFx0XHRcdHZhciBhZHYgPSBOb2RlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyO1xuXHRcdFx0XHRpZiAodHlwZSA9PT0gJ2NsaWNrJykge1xuXHRcdFx0XHRcdGFkdi5jYWxsKGxheWVyLCB0eXBlLCBjYWxsYmFjay5oaWphY2tlZCB8fCAoY2FsbGJhY2suaGlqYWNrZWQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0aWYgKCFldmVudC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soZXZlbnQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pLCBjYXB0dXJlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhZHYuY2FsbChsYXllciwgdHlwZSwgY2FsbGJhY2ssIGNhcHR1cmUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIElmIGEgaGFuZGxlciBpcyBhbHJlYWR5IGRlY2xhcmVkIGluIHRoZSBlbGVtZW50J3Mgb25jbGljayBhdHRyaWJ1dGUsIGl0IHdpbGwgYmUgZmlyZWQgYmVmb3JlXG5cdFx0Ly8gRmFzdENsaWNrJ3Mgb25DbGljayBoYW5kbGVyLiBGaXggdGhpcyBieSBwdWxsaW5nIG91dCB0aGUgdXNlci1kZWZpbmVkIGhhbmRsZXIgZnVuY3Rpb24gYW5kXG5cdFx0Ly8gYWRkaW5nIGl0IGFzIGxpc3RlbmVyLlxuXHRcdGlmICh0eXBlb2YgbGF5ZXIub25jbGljayA9PT0gJ2Z1bmN0aW9uJykge1xuXG5cdFx0XHQvLyBBbmRyb2lkIGJyb3dzZXIgb24gYXQgbGVhc3QgMy4yIHJlcXVpcmVzIGEgbmV3IHJlZmVyZW5jZSB0byB0aGUgZnVuY3Rpb24gaW4gbGF5ZXIub25jbGlja1xuXHRcdFx0Ly8gLSB0aGUgb2xkIG9uZSB3b24ndCB3b3JrIGlmIHBhc3NlZCB0byBhZGRFdmVudExpc3RlbmVyIGRpcmVjdGx5LlxuXHRcdFx0b2xkT25DbGljayA9IGxheWVyLm9uY2xpY2s7XG5cdFx0XHRsYXllci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdG9sZE9uQ2xpY2soZXZlbnQpO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0bGF5ZXIub25jbGljayA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogV2luZG93cyBQaG9uZSA4LjEgZmFrZXMgdXNlciBhZ2VudCBzdHJpbmcgdG8gbG9vayBsaWtlIEFuZHJvaWQgYW5kIGlQaG9uZS5cblx0KlxuXHQqIEB0eXBlIGJvb2xlYW5cblx0Ki9cblx0dmFyIGRldmljZUlzV2luZG93c1Bob25lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luZG93cyBQaG9uZVwiKSA+PSAwO1xuXG5cdC8qKlxuXHQgKiBBbmRyb2lkIHJlcXVpcmVzIGV4Y2VwdGlvbnMuXG5cdCAqXG5cdCAqIEB0eXBlIGJvb2xlYW5cblx0ICovXG5cdHZhciBkZXZpY2VJc0FuZHJvaWQgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0FuZHJvaWQnKSA+IDAgJiYgIWRldmljZUlzV2luZG93c1Bob25lO1xuXG5cblx0LyoqXG5cdCAqIGlPUyByZXF1aXJlcyBleGNlcHRpb25zLlxuXHQgKlxuXHQgKiBAdHlwZSBib29sZWFuXG5cdCAqL1xuXHR2YXIgZGV2aWNlSXNJT1MgPSAvaVAoYWR8aG9uZXxvZCkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIWRldmljZUlzV2luZG93c1Bob25lO1xuXG5cblx0LyoqXG5cdCAqIGlPUyA0IHJlcXVpcmVzIGFuIGV4Y2VwdGlvbiBmb3Igc2VsZWN0IGVsZW1lbnRzLlxuXHQgKlxuXHQgKiBAdHlwZSBib29sZWFuXG5cdCAqL1xuXHR2YXIgZGV2aWNlSXNJT1M0ID0gZGV2aWNlSXNJT1MgJiYgKC9PUyA0X1xcZChfXFxkKT8vKS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG5cblx0LyoqXG5cdCAqIGlPUyA2LjAtNy4qIHJlcXVpcmVzIHRoZSB0YXJnZXQgZWxlbWVudCB0byBiZSBtYW51YWxseSBkZXJpdmVkXG5cdCAqXG5cdCAqIEB0eXBlIGJvb2xlYW5cblx0ICovXG5cdHZhciBkZXZpY2VJc0lPU1dpdGhCYWRUYXJnZXQgPSBkZXZpY2VJc0lPUyAmJiAoL09TIFs2LTddX1xcZC8pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cblx0LyoqXG5cdCAqIEJsYWNrQmVycnkgcmVxdWlyZXMgZXhjZXB0aW9ucy5cblx0ICpcblx0ICogQHR5cGUgYm9vbGVhblxuXHQgKi9cblx0dmFyIGRldmljZUlzQmxhY2tCZXJyeTEwID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdCQjEwJykgPiAwO1xuXG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgd2hldGhlciBhIGdpdmVuIGVsZW1lbnQgcmVxdWlyZXMgYSBuYXRpdmUgY2xpY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR8RWxlbWVudH0gdGFyZ2V0IFRhcmdldCBET00gZWxlbWVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBlbGVtZW50IG5lZWRzIGEgbmF0aXZlIGNsaWNrXG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLm5lZWRzQ2xpY2sgPSBmdW5jdGlvbih0YXJnZXQpIHtcblx0XHRzd2l0Y2ggKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG5cblx0XHQvLyBEb24ndCBzZW5kIGEgc3ludGhldGljIGNsaWNrIHRvIGRpc2FibGVkIGlucHV0cyAoaXNzdWUgIzYyKVxuXHRcdGNhc2UgJ2J1dHRvbic6XG5cdFx0Y2FzZSAnc2VsZWN0Jzpcblx0XHRjYXNlICd0ZXh0YXJlYSc6XG5cdFx0XHRpZiAodGFyZ2V0LmRpc2FibGVkKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdpbnB1dCc6XG5cblx0XHRcdC8vIEZpbGUgaW5wdXRzIG5lZWQgcmVhbCBjbGlja3Mgb24gaU9TIDYgZHVlIHRvIGEgYnJvd3NlciBidWcgKGlzc3VlICM2OClcblx0XHRcdGlmICgoZGV2aWNlSXNJT1MgJiYgdGFyZ2V0LnR5cGUgPT09ICdmaWxlJykgfHwgdGFyZ2V0LmRpc2FibGVkKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdsYWJlbCc6XG5cdFx0Y2FzZSAnaWZyYW1lJzogLy8gaU9TOCBob21lc2NyZWVuIGFwcHMgY2FuIHByZXZlbnQgZXZlbnRzIGJ1YmJsaW5nIGludG8gZnJhbWVzXG5cdFx0Y2FzZSAndmlkZW8nOlxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICgvXFxibmVlZHNjbGlja1xcYi8pLnRlc3QodGFyZ2V0LmNsYXNzTmFtZSk7XG5cdH07XG5cblxuXHQvKipcblx0ICogRGV0ZXJtaW5lIHdoZXRoZXIgYSBnaXZlbiBlbGVtZW50IHJlcXVpcmVzIGEgY2FsbCB0byBmb2N1cyB0byBzaW11bGF0ZSBjbGljayBpbnRvIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR8RWxlbWVudH0gdGFyZ2V0IFRhcmdldCBET00gZWxlbWVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBlbGVtZW50IHJlcXVpcmVzIGEgY2FsbCB0byBmb2N1cyB0byBzaW11bGF0ZSBuYXRpdmUgY2xpY2suXG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLm5lZWRzRm9jdXMgPSBmdW5jdGlvbih0YXJnZXQpIHtcblx0XHRzd2l0Y2ggKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG5cdFx0Y2FzZSAndGV4dGFyZWEnOlxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0Y2FzZSAnc2VsZWN0Jzpcblx0XHRcdHJldHVybiAhZGV2aWNlSXNBbmRyb2lkO1xuXHRcdGNhc2UgJ2lucHV0Jzpcblx0XHRcdHN3aXRjaCAodGFyZ2V0LnR5cGUpIHtcblx0XHRcdGNhc2UgJ2J1dHRvbic6XG5cdFx0XHRjYXNlICdjaGVja2JveCc6XG5cdFx0XHRjYXNlICdmaWxlJzpcblx0XHRcdGNhc2UgJ2ltYWdlJzpcblx0XHRcdGNhc2UgJ3JhZGlvJzpcblx0XHRcdGNhc2UgJ3N1Ym1pdCc6XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTm8gcG9pbnQgaW4gYXR0ZW1wdGluZyB0byBmb2N1cyBkaXNhYmxlZCBpbnB1dHNcblx0XHRcdHJldHVybiAhdGFyZ2V0LmRpc2FibGVkICYmICF0YXJnZXQucmVhZE9ubHk7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiAoL1xcYm5lZWRzZm9jdXNcXGIvKS50ZXN0KHRhcmdldC5jbGFzc05hbWUpO1xuXHRcdH1cblx0fTtcblxuXG5cdC8qKlxuXHQgKiBTZW5kIGEgY2xpY2sgZXZlbnQgdG8gdGhlIHNwZWNpZmllZCBlbGVtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUuc2VuZENsaWNrID0gZnVuY3Rpb24odGFyZ2V0RWxlbWVudCwgZXZlbnQpIHtcblx0XHR2YXIgY2xpY2tFdmVudCwgdG91Y2g7XG5cblx0XHQvLyBPbiBzb21lIEFuZHJvaWQgZGV2aWNlcyBhY3RpdmVFbGVtZW50IG5lZWRzIHRvIGJlIGJsdXJyZWQgb3RoZXJ3aXNlIHRoZSBzeW50aGV0aWMgY2xpY2sgd2lsbCBoYXZlIG5vIGVmZmVjdCAoIzI0KVxuXHRcdGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRhcmdldEVsZW1lbnQpIHtcblx0XHRcdGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuXHRcdH1cblxuXHRcdHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XG5cblx0XHQvLyBTeW50aGVzaXNlIGEgY2xpY2sgZXZlbnQsIHdpdGggYW4gZXh0cmEgYXR0cmlidXRlIHNvIGl0IGNhbiBiZSB0cmFja2VkXG5cdFx0Y2xpY2tFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpO1xuXHRcdGNsaWNrRXZlbnQuaW5pdE1vdXNlRXZlbnQodGhpcy5kZXRlcm1pbmVFdmVudFR5cGUodGFyZ2V0RWxlbWVudCksIHRydWUsIHRydWUsIHdpbmRvdywgMSwgdG91Y2guc2NyZWVuWCwgdG91Y2guc2NyZWVuWSwgdG91Y2guY2xpZW50WCwgdG91Y2guY2xpZW50WSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xuXHRcdGNsaWNrRXZlbnQuZm9yd2FyZGVkVG91Y2hFdmVudCA9IHRydWU7XG5cdFx0dGFyZ2V0RWxlbWVudC5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpO1xuXHR9O1xuXG5cdEZhc3RDbGljay5wcm90b3R5cGUuZGV0ZXJtaW5lRXZlbnRUeXBlID0gZnVuY3Rpb24odGFyZ2V0RWxlbWVudCkge1xuXG5cdFx0Ly9Jc3N1ZSAjMTU5OiBBbmRyb2lkIENocm9tZSBTZWxlY3QgQm94IGRvZXMgbm90IG9wZW4gd2l0aCBhIHN5bnRoZXRpYyBjbGljayBldmVudFxuXHRcdGlmIChkZXZpY2VJc0FuZHJvaWQgJiYgdGFyZ2V0RWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzZWxlY3QnKSB7XG5cdFx0XHRyZXR1cm4gJ21vdXNlZG93bic7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICdjbGljayc7XG5cdH07XG5cblxuXHQvKipcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldHxFbGVtZW50fSB0YXJnZXRFbGVtZW50XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24odGFyZ2V0RWxlbWVudCkge1xuXHRcdHZhciBsZW5ndGg7XG5cblx0XHQvLyBJc3N1ZSAjMTYwOiBvbiBpT1MgNywgc29tZSBpbnB1dCBlbGVtZW50cyAoZS5nLiBkYXRlIGRhdGV0aW1lIG1vbnRoKSB0aHJvdyBhIHZhZ3VlIFR5cGVFcnJvciBvbiBzZXRTZWxlY3Rpb25SYW5nZS4gVGhlc2UgZWxlbWVudHMgZG9uJ3QgaGF2ZSBhbiBpbnRlZ2VyIHZhbHVlIGZvciB0aGUgc2VsZWN0aW9uU3RhcnQgYW5kIHNlbGVjdGlvbkVuZCBwcm9wZXJ0aWVzLCBidXQgdW5mb3J0dW5hdGVseSB0aGF0IGNhbid0IGJlIHVzZWQgZm9yIGRldGVjdGlvbiBiZWNhdXNlIGFjY2Vzc2luZyB0aGUgcHJvcGVydGllcyBhbHNvIHRocm93cyBhIFR5cGVFcnJvci4gSnVzdCBjaGVjayB0aGUgdHlwZSBpbnN0ZWFkLiBGaWxlZCBhcyBBcHBsZSBidWcgIzE1MTIyNzI0LlxuXHRcdGlmIChkZXZpY2VJc0lPUyAmJiB0YXJnZXRFbGVtZW50LnNldFNlbGVjdGlvblJhbmdlICYmIHRhcmdldEVsZW1lbnQudHlwZS5pbmRleE9mKCdkYXRlJykgIT09IDAgJiYgdGFyZ2V0RWxlbWVudC50eXBlICE9PSAndGltZScgJiYgdGFyZ2V0RWxlbWVudC50eXBlICE9PSAnbW9udGgnKSB7XG5cdFx0XHRsZW5ndGggPSB0YXJnZXRFbGVtZW50LnZhbHVlLmxlbmd0aDtcblx0XHRcdHRhcmdldEVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UobGVuZ3RoLCBsZW5ndGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXRFbGVtZW50LmZvY3VzKCk7XG5cdFx0fVxuXHR9O1xuXG5cblx0LyoqXG5cdCAqIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIHRhcmdldCBlbGVtZW50IGlzIGEgY2hpbGQgb2YgYSBzY3JvbGxhYmxlIGxheWVyIGFuZCBpZiBzbywgc2V0IGEgZmxhZyBvbiBpdC5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldHxFbGVtZW50fSB0YXJnZXRFbGVtZW50XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFBhcmVudCA9IGZ1bmN0aW9uKHRhcmdldEVsZW1lbnQpIHtcblx0XHR2YXIgc2Nyb2xsUGFyZW50LCBwYXJlbnRFbGVtZW50O1xuXG5cdFx0c2Nyb2xsUGFyZW50ID0gdGFyZ2V0RWxlbWVudC5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQ7XG5cblx0XHQvLyBBdHRlbXB0IHRvIGRpc2NvdmVyIHdoZXRoZXIgdGhlIHRhcmdldCBlbGVtZW50IGlzIGNvbnRhaW5lZCB3aXRoaW4gYSBzY3JvbGxhYmxlIGxheWVyLiBSZS1jaGVjayBpZiB0aGVcblx0XHQvLyB0YXJnZXQgZWxlbWVudCB3YXMgbW92ZWQgdG8gYW5vdGhlciBwYXJlbnQuXG5cdFx0aWYgKCFzY3JvbGxQYXJlbnQgfHwgIXNjcm9sbFBhcmVudC5jb250YWlucyh0YXJnZXRFbGVtZW50KSkge1xuXHRcdFx0cGFyZW50RWxlbWVudCA9IHRhcmdldEVsZW1lbnQ7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdGlmIChwYXJlbnRFbGVtZW50LnNjcm9sbEhlaWdodCA+IHBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0KSB7XG5cdFx0XHRcdFx0c2Nyb2xsUGFyZW50ID0gcGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHR0YXJnZXRFbGVtZW50LmZhc3RDbGlja1Njcm9sbFBhcmVudCA9IHBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0fSB3aGlsZSAocGFyZW50RWxlbWVudCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWx3YXlzIHVwZGF0ZSB0aGUgc2Nyb2xsIHRvcCB0cmFja2VyIGlmIHBvc3NpYmxlLlxuXHRcdGlmIChzY3JvbGxQYXJlbnQpIHtcblx0XHRcdHNjcm9sbFBhcmVudC5mYXN0Q2xpY2tMYXN0U2Nyb2xsVG9wID0gc2Nyb2xsUGFyZW50LnNjcm9sbFRvcDtcblx0XHR9XG5cdH07XG5cblxuXHQvKipcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0RWxlbWVudFxuXHQgKiBAcmV0dXJucyB7RWxlbWVudHxFdmVudFRhcmdldH1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldCA9IGZ1bmN0aW9uKGV2ZW50VGFyZ2V0KSB7XG5cblx0XHQvLyBPbiBzb21lIG9sZGVyIGJyb3dzZXJzIChub3RhYmx5IFNhZmFyaSBvbiBpT1MgNC4xIC0gc2VlIGlzc3VlICM1NikgdGhlIGV2ZW50IHRhcmdldCBtYXkgYmUgYSB0ZXh0IG5vZGUuXG5cdFx0aWYgKGV2ZW50VGFyZ2V0Lm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuXHRcdFx0cmV0dXJuIGV2ZW50VGFyZ2V0LnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50VGFyZ2V0O1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIE9uIHRvdWNoIHN0YXJ0LCByZWNvcmQgdGhlIHBvc2l0aW9uIGFuZCBzY3JvbGwgb2Zmc2V0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUub25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgdGFyZ2V0RWxlbWVudCwgdG91Y2gsIHNlbGVjdGlvbjtcblxuXHRcdC8vIElnbm9yZSBtdWx0aXBsZSB0b3VjaGVzLCBvdGhlcndpc2UgcGluY2gtdG8tem9vbSBpcyBwcmV2ZW50ZWQgaWYgYm90aCBmaW5nZXJzIGFyZSBvbiB0aGUgRmFzdENsaWNrIGVsZW1lbnQgKGlzc3VlICMxMTEpLlxuXHRcdGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQoZXZlbnQudGFyZ2V0KTtcblx0XHR0b3VjaCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF07XG5cblx0XHRpZiAoZGV2aWNlSXNJT1MpIHtcblxuXHRcdFx0Ly8gT25seSB0cnVzdGVkIGV2ZW50cyB3aWxsIGRlc2VsZWN0IHRleHQgb24gaU9TIChpc3N1ZSAjNDkpXG5cdFx0XHRzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRpZiAoc2VsZWN0aW9uLnJhbmdlQ291bnQgJiYgIXNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFkZXZpY2VJc0lPUzQpIHtcblxuXHRcdFx0XHQvLyBXZWlyZCB0aGluZ3MgaGFwcGVuIG9uIGlPUyB3aGVuIGFuIGFsZXJ0IG9yIGNvbmZpcm0gZGlhbG9nIGlzIG9wZW5lZCBmcm9tIGEgY2xpY2sgZXZlbnQgY2FsbGJhY2sgKGlzc3VlICMyMyk6XG5cdFx0XHRcdC8vIHdoZW4gdGhlIHVzZXIgbmV4dCB0YXBzIGFueXdoZXJlIGVsc2Ugb24gdGhlIHBhZ2UsIG5ldyB0b3VjaHN0YXJ0IGFuZCB0b3VjaGVuZCBldmVudHMgYXJlIGRpc3BhdGNoZWRcblx0XHRcdFx0Ly8gd2l0aCB0aGUgc2FtZSBpZGVudGlmaWVyIGFzIHRoZSB0b3VjaCBldmVudCB0aGF0IHByZXZpb3VzbHkgdHJpZ2dlcmVkIHRoZSBjbGljayB0aGF0IHRyaWdnZXJlZCB0aGUgYWxlcnQuXG5cdFx0XHRcdC8vIFNhZGx5LCB0aGVyZSBpcyBhbiBpc3N1ZSBvbiBpT1MgNCB0aGF0IGNhdXNlcyBzb21lIG5vcm1hbCB0b3VjaCBldmVudHMgdG8gaGF2ZSB0aGUgc2FtZSBpZGVudGlmaWVyIGFzIGFuXG5cdFx0XHRcdC8vIGltbWVkaWF0ZWx5IHByZWNlZWRpbmcgdG91Y2ggZXZlbnQgKGlzc3VlICM1MiksIHNvIHRoaXMgZml4IGlzIHVuYXZhaWxhYmxlIG9uIHRoYXQgcGxhdGZvcm0uXG5cdFx0XHRcdC8vIElzc3VlIDEyMDogdG91Y2guaWRlbnRpZmllciBpcyAwIHdoZW4gQ2hyb21lIGRldiB0b29scyAnRW11bGF0ZSB0b3VjaCBldmVudHMnIGlzIHNldCB3aXRoIGFuIGlPUyBkZXZpY2UgVUEgc3RyaW5nLFxuXHRcdFx0XHQvLyB3aGljaCBjYXVzZXMgYWxsIHRvdWNoIGV2ZW50cyB0byBiZSBpZ25vcmVkLiBBcyB0aGlzIGJsb2NrIG9ubHkgYXBwbGllcyB0byBpT1MsIGFuZCBpT1MgaWRlbnRpZmllcnMgYXJlIGFsd2F5cyBsb25nLFxuXHRcdFx0XHQvLyByYW5kb20gaW50ZWdlcnMsIGl0J3Mgc2FmZSB0byB0byBjb250aW51ZSBpZiB0aGUgaWRlbnRpZmllciBpcyAwIGhlcmUuXG5cdFx0XHRcdGlmICh0b3VjaC5pZGVudGlmaWVyICYmIHRvdWNoLmlkZW50aWZpZXIgPT09IHRoaXMubGFzdFRvdWNoSWRlbnRpZmllcikge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyID0gdG91Y2guaWRlbnRpZmllcjtcblxuXHRcdFx0XHQvLyBJZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgYSBjaGlsZCBvZiBhIHNjcm9sbGFibGUgbGF5ZXIgKHVzaW5nIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaCkgYW5kOlxuXHRcdFx0XHQvLyAxKSB0aGUgdXNlciBkb2VzIGEgZmxpbmcgc2Nyb2xsIG9uIHRoZSBzY3JvbGxhYmxlIGxheWVyXG5cdFx0XHRcdC8vIDIpIHRoZSB1c2VyIHN0b3BzIHRoZSBmbGluZyBzY3JvbGwgd2l0aCBhbm90aGVyIHRhcFxuXHRcdFx0XHQvLyB0aGVuIHRoZSBldmVudC50YXJnZXQgb2YgdGhlIGxhc3QgJ3RvdWNoZW5kJyBldmVudCB3aWxsIGJlIHRoZSBlbGVtZW50IHRoYXQgd2FzIHVuZGVyIHRoZSB1c2VyJ3MgZmluZ2VyXG5cdFx0XHRcdC8vIHdoZW4gdGhlIGZsaW5nIHNjcm9sbCB3YXMgc3RhcnRlZCwgY2F1c2luZyBGYXN0Q2xpY2sgdG8gc2VuZCBhIGNsaWNrIGV2ZW50IHRvIHRoYXQgbGF5ZXIgLSB1bmxlc3MgYSBjaGVja1xuXHRcdFx0XHQvLyBpcyBtYWRlIHRvIGVuc3VyZSB0aGF0IGEgcGFyZW50IGxheWVyIHdhcyBub3Qgc2Nyb2xsZWQgYmVmb3JlIHNlbmRpbmcgYSBzeW50aGV0aWMgY2xpY2sgKGlzc3VlICM0MikuXG5cdFx0XHRcdHRoaXMudXBkYXRlU2Nyb2xsUGFyZW50KHRhcmdldEVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMudHJhY2tpbmdDbGljayA9IHRydWU7XG5cdFx0dGhpcy50cmFja2luZ0NsaWNrU3RhcnQgPSBldmVudC50aW1lU3RhbXA7XG5cdFx0dGhpcy50YXJnZXRFbGVtZW50ID0gdGFyZ2V0RWxlbWVudDtcblxuXHRcdHRoaXMudG91Y2hTdGFydFggPSB0b3VjaC5wYWdlWDtcblx0XHR0aGlzLnRvdWNoU3RhcnRZID0gdG91Y2gucGFnZVk7XG5cblx0XHQvLyBQcmV2ZW50IHBoYW50b20gY2xpY2tzIG9uIGZhc3QgZG91YmxlLXRhcCAoaXNzdWUgIzM2KVxuXHRcdGlmICgoZXZlbnQudGltZVN0YW1wIC0gdGhpcy5sYXN0Q2xpY2tUaW1lKSA8IHRoaXMudGFwRGVsYXkpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH07XG5cblxuXHQvKipcblx0ICogQmFzZWQgb24gYSB0b3VjaG1vdmUgZXZlbnQgb2JqZWN0LCBjaGVjayB3aGV0aGVyIHRoZSB0b3VjaCBoYXMgbW92ZWQgcGFzdCBhIGJvdW5kYXJ5IHNpbmNlIGl0IHN0YXJ0ZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0RmFzdENsaWNrLnByb3RvdHlwZS50b3VjaEhhc01vdmVkID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSwgYm91bmRhcnkgPSB0aGlzLnRvdWNoQm91bmRhcnk7XG5cblx0XHRpZiAoTWF0aC5hYnModG91Y2gucGFnZVggLSB0aGlzLnRvdWNoU3RhcnRYKSA+IGJvdW5kYXJ5IHx8IE1hdGguYWJzKHRvdWNoLnBhZ2VZIC0gdGhpcy50b3VjaFN0YXJ0WSkgPiBib3VuZGFyeSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgbGFzdCBwb3NpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRpZiAoIXRoaXMudHJhY2tpbmdDbGljaykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIHRvdWNoIGhhcyBtb3ZlZCwgY2FuY2VsIHRoZSBjbGljayB0cmFja2luZ1xuXHRcdGlmICh0aGlzLnRhcmdldEVsZW1lbnQgIT09IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldChldmVudC50YXJnZXQpIHx8IHRoaXMudG91Y2hIYXNNb3ZlZChldmVudCkpIHtcblx0XHRcdHRoaXMudHJhY2tpbmdDbGljayA9IGZhbHNlO1xuXHRcdFx0dGhpcy50YXJnZXRFbGVtZW50ID0gbnVsbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBBdHRlbXB0IHRvIGZpbmQgdGhlIGxhYmVsbGVkIGNvbnRyb2wgZm9yIHRoZSBnaXZlbiBsYWJlbCBlbGVtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fEhUTUxMYWJlbEVsZW1lbnR9IGxhYmVsRWxlbWVudFxuXHQgKiBAcmV0dXJucyB7RWxlbWVudHxudWxsfVxuXHQgKi9cblx0RmFzdENsaWNrLnByb3RvdHlwZS5maW5kQ29udHJvbCA9IGZ1bmN0aW9uKGxhYmVsRWxlbWVudCkge1xuXG5cdFx0Ly8gRmFzdCBwYXRoIGZvciBuZXdlciBicm93c2VycyBzdXBwb3J0aW5nIHRoZSBIVE1MNSBjb250cm9sIGF0dHJpYnV0ZVxuXHRcdGlmIChsYWJlbEVsZW1lbnQuY29udHJvbCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gbGFiZWxFbGVtZW50LmNvbnRyb2w7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGJyb3dzZXJzIHVuZGVyIHRlc3QgdGhhdCBzdXBwb3J0IHRvdWNoIGV2ZW50cyBhbHNvIHN1cHBvcnQgdGhlIEhUTUw1IGh0bWxGb3IgYXR0cmlidXRlXG5cdFx0aWYgKGxhYmVsRWxlbWVudC5odG1sRm9yKSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGFiZWxFbGVtZW50Lmh0bWxGb3IpO1xuXHRcdH1cblxuXHRcdC8vIElmIG5vIGZvciBhdHRyaWJ1dGUgZXhpc3RzLCBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBmaXJzdCBsYWJlbGxhYmxlIGRlc2NlbmRhbnQgZWxlbWVudFxuXHRcdC8vIHRoZSBsaXN0IG9mIHdoaWNoIGlzIGRlZmluZWQgaGVyZTogaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNjYXRlZ29yeS1sYWJlbFxuXHRcdHJldHVybiBsYWJlbEVsZW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uLCBpbnB1dDpub3QoW3R5cGU9aGlkZGVuXSksIGtleWdlbiwgbWV0ZXIsIG91dHB1dCwgcHJvZ3Jlc3MsIHNlbGVjdCwgdGV4dGFyZWEnKTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBPbiB0b3VjaCBlbmQsIGRldGVybWluZSB3aGV0aGVyIHRvIHNlbmQgYSBjbGljayBldmVudCBhdCBvbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdEZhc3RDbGljay5wcm90b3R5cGUub25Ub3VjaEVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyIGZvckVsZW1lbnQsIHRyYWNraW5nQ2xpY2tTdGFydCwgdGFyZ2V0VGFnTmFtZSwgc2Nyb2xsUGFyZW50LCB0b3VjaCwgdGFyZ2V0RWxlbWVudCA9IHRoaXMudGFyZ2V0RWxlbWVudDtcblxuXHRcdGlmICghdGhpcy50cmFja2luZ0NsaWNrKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBQcmV2ZW50IHBoYW50b20gY2xpY2tzIG9uIGZhc3QgZG91YmxlLXRhcCAoaXNzdWUgIzM2KVxuXHRcdGlmICgoZXZlbnQudGltZVN0YW1wIC0gdGhpcy5sYXN0Q2xpY2tUaW1lKSA8IHRoaXMudGFwRGVsYXkpIHtcblx0XHRcdHRoaXMuY2FuY2VsTmV4dENsaWNrID0gdHJ1ZTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGlmICgoZXZlbnQudGltZVN0YW1wIC0gdGhpcy50cmFja2luZ0NsaWNrU3RhcnQpID4gdGhpcy50YXBUaW1lb3V0KSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBSZXNldCB0byBwcmV2ZW50IHdyb25nIGNsaWNrIGNhbmNlbCBvbiBpbnB1dCAoaXNzdWUgIzE1NikuXG5cdFx0dGhpcy5jYW5jZWxOZXh0Q2xpY2sgPSBmYWxzZTtcblxuXHRcdHRoaXMubGFzdENsaWNrVGltZSA9IGV2ZW50LnRpbWVTdGFtcDtcblxuXHRcdHRyYWNraW5nQ2xpY2tTdGFydCA9IHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0O1xuXHRcdHRoaXMudHJhY2tpbmdDbGljayA9IGZhbHNlO1xuXHRcdHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0ID0gMDtcblxuXHRcdC8vIE9uIHNvbWUgaU9TIGRldmljZXMsIHRoZSB0YXJnZXRFbGVtZW50IHN1cHBsaWVkIHdpdGggdGhlIGV2ZW50IGlzIGludmFsaWQgaWYgdGhlIGxheWVyXG5cdFx0Ly8gaXMgcGVyZm9ybWluZyBhIHRyYW5zaXRpb24gb3Igc2Nyb2xsLCBhbmQgaGFzIHRvIGJlIHJlLWRldGVjdGVkIG1hbnVhbGx5LiBOb3RlIHRoYXRcblx0XHQvLyBmb3IgdGhpcyB0byBmdW5jdGlvbiBjb3JyZWN0bHksIGl0IG11c3QgYmUgY2FsbGVkICphZnRlciogdGhlIGV2ZW50IHRhcmdldCBpcyBjaGVja2VkIVxuXHRcdC8vIFNlZSBpc3N1ZSAjNTc7IGFsc28gZmlsZWQgYXMgcmRhcjovLzEzMDQ4NTg5IC5cblx0XHRpZiAoZGV2aWNlSXNJT1NXaXRoQmFkVGFyZ2V0KSB7XG5cdFx0XHR0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuXG5cdFx0XHQvLyBJbiBjZXJ0YWluIGNhc2VzIGFyZ3VtZW50cyBvZiBlbGVtZW50RnJvbVBvaW50IGNhbiBiZSBuZWdhdGl2ZSwgc28gcHJldmVudCBzZXR0aW5nIHRhcmdldEVsZW1lbnQgdG8gbnVsbFxuXHRcdFx0dGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodG91Y2gucGFnZVggLSB3aW5kb3cucGFnZVhPZmZzZXQsIHRvdWNoLnBhZ2VZIC0gd2luZG93LnBhZ2VZT2Zmc2V0KSB8fCB0YXJnZXRFbGVtZW50O1xuXHRcdFx0dGFyZ2V0RWxlbWVudC5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQgPSB0aGlzLnRhcmdldEVsZW1lbnQuZmFzdENsaWNrU2Nyb2xsUGFyZW50O1xuXHRcdH1cblxuXHRcdHRhcmdldFRhZ05hbWUgPSB0YXJnZXRFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRpZiAodGFyZ2V0VGFnTmFtZSA9PT0gJ2xhYmVsJykge1xuXHRcdFx0Zm9yRWxlbWVudCA9IHRoaXMuZmluZENvbnRyb2wodGFyZ2V0RWxlbWVudCk7XG5cdFx0XHRpZiAoZm9yRWxlbWVudCkge1xuXHRcdFx0XHR0aGlzLmZvY3VzKHRhcmdldEVsZW1lbnQpO1xuXHRcdFx0XHRpZiAoZGV2aWNlSXNBbmRyb2lkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGFyZ2V0RWxlbWVudCA9IGZvckVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0aGlzLm5lZWRzRm9jdXModGFyZ2V0RWxlbWVudCkpIHtcblxuXHRcdFx0Ly8gQ2FzZSAxOiBJZiB0aGUgdG91Y2ggc3RhcnRlZCBhIHdoaWxlIGFnbyAoYmVzdCBndWVzcyBpcyAxMDBtcyBiYXNlZCBvbiB0ZXN0cyBmb3IgaXNzdWUgIzM2KSB0aGVuIGZvY3VzIHdpbGwgYmUgdHJpZ2dlcmVkIGFueXdheS4gUmV0dXJuIGVhcmx5IGFuZCB1bnNldCB0aGUgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlIHNvIHRoYXQgdGhlIHN1YnNlcXVlbnQgY2xpY2sgd2lsbCBiZSBhbGxvd2VkIHRocm91Z2guXG5cdFx0XHQvLyBDYXNlIDI6IFdpdGhvdXQgdGhpcyBleGNlcHRpb24gZm9yIGlucHV0IGVsZW1lbnRzIHRhcHBlZCB3aGVuIHRoZSBkb2N1bWVudCBpcyBjb250YWluZWQgaW4gYW4gaWZyYW1lLCB0aGVuIGFueSBpbnB1dHRlZCB0ZXh0IHdvbid0IGJlIHZpc2libGUgZXZlbiB0aG91Z2ggdGhlIHZhbHVlIGF0dHJpYnV0ZSBpcyB1cGRhdGVkIGFzIHRoZSB1c2VyIHR5cGVzIChpc3N1ZSAjMzcpLlxuXHRcdFx0aWYgKChldmVudC50aW1lU3RhbXAgLSB0cmFja2luZ0NsaWNrU3RhcnQpID4gMTAwIHx8IChkZXZpY2VJc0lPUyAmJiB3aW5kb3cudG9wICE9PSB3aW5kb3cgJiYgdGFyZ2V0VGFnTmFtZSA9PT0gJ2lucHV0JykpIHtcblx0XHRcdFx0dGhpcy50YXJnZXRFbGVtZW50ID0gbnVsbDtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmZvY3VzKHRhcmdldEVsZW1lbnQpO1xuXHRcdFx0dGhpcy5zZW5kQ2xpY2sodGFyZ2V0RWxlbWVudCwgZXZlbnQpO1xuXG5cdFx0XHQvLyBTZWxlY3QgZWxlbWVudHMgbmVlZCB0aGUgZXZlbnQgdG8gZ28gdGhyb3VnaCBvbiBpT1MgNCwgb3RoZXJ3aXNlIHRoZSBzZWxlY3RvciBtZW51IHdvbid0IG9wZW4uXG5cdFx0XHQvLyBBbHNvIHRoaXMgYnJlYWtzIG9wZW5pbmcgc2VsZWN0cyB3aGVuIFZvaWNlT3ZlciBpcyBhY3RpdmUgb24gaU9TNiwgaU9TNyAoYW5kIHBvc3NpYmx5IG90aGVycylcblx0XHRcdGlmICghZGV2aWNlSXNJT1MgfHwgdGFyZ2V0VGFnTmFtZSAhPT0gJ3NlbGVjdCcpIHtcblx0XHRcdFx0dGhpcy50YXJnZXRFbGVtZW50ID0gbnVsbDtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmIChkZXZpY2VJc0lPUyAmJiAhZGV2aWNlSXNJT1M0KSB7XG5cblx0XHRcdC8vIERvbid0IHNlbmQgYSBzeW50aGV0aWMgY2xpY2sgZXZlbnQgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGNvbnRhaW5lZCB3aXRoaW4gYSBwYXJlbnQgbGF5ZXIgdGhhdCB3YXMgc2Nyb2xsZWRcblx0XHRcdC8vIGFuZCB0aGlzIHRhcCBpcyBiZWluZyB1c2VkIHRvIHN0b3AgdGhlIHNjcm9sbGluZyAodXN1YWxseSBpbml0aWF0ZWQgYnkgYSBmbGluZyAtIGlzc3VlICM0MikuXG5cdFx0XHRzY3JvbGxQYXJlbnQgPSB0YXJnZXRFbGVtZW50LmZhc3RDbGlja1Njcm9sbFBhcmVudDtcblx0XHRcdGlmIChzY3JvbGxQYXJlbnQgJiYgc2Nyb2xsUGFyZW50LmZhc3RDbGlja0xhc3RTY3JvbGxUb3AgIT09IHNjcm9sbFBhcmVudC5zY3JvbGxUb3ApIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJldmVudCB0aGUgYWN0dWFsIGNsaWNrIGZyb20gZ29pbmcgdGhvdWdoIC0gdW5sZXNzIHRoZSB0YXJnZXQgbm9kZSBpcyBtYXJrZWQgYXMgcmVxdWlyaW5nXG5cdFx0Ly8gcmVhbCBjbGlja3Mgb3IgaWYgaXQgaXMgaW4gdGhlIHdoaXRlbGlzdCBpbiB3aGljaCBjYXNlIG9ubHkgbm9uLXByb2dyYW1tYXRpYyBjbGlja3MgYXJlIHBlcm1pdHRlZC5cblx0XHRpZiAoIXRoaXMubmVlZHNDbGljayh0YXJnZXRFbGVtZW50KSkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuc2VuZENsaWNrKHRhcmdldEVsZW1lbnQsIGV2ZW50KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG5cblxuXHQvKipcblx0ICogT24gdG91Y2ggY2FuY2VsLCBzdG9wIHRyYWNraW5nIHRoZSBjbGljay5cblx0ICpcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLm9uVG91Y2hDYW5jZWwgPSBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnRyYWNraW5nQ2xpY2sgPSBmYWxzZTtcblx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSBudWxsO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIERldGVybWluZSBtb3VzZSBldmVudHMgd2hpY2ggc2hvdWxkIGJlIHBlcm1pdHRlZC5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLm9uTW91c2UgPSBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0Ly8gSWYgYSB0YXJnZXQgZWxlbWVudCB3YXMgbmV2ZXIgc2V0IChiZWNhdXNlIGEgdG91Y2ggZXZlbnQgd2FzIG5ldmVyIGZpcmVkKSBhbGxvdyB0aGUgZXZlbnRcblx0XHRpZiAoIXRoaXMudGFyZ2V0RWxlbWVudCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKGV2ZW50LmZvcndhcmRlZFRvdWNoRXZlbnQpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFByb2dyYW1tYXRpY2FsbHkgZ2VuZXJhdGVkIGV2ZW50cyB0YXJnZXRpbmcgYSBzcGVjaWZpYyBlbGVtZW50IHNob3VsZCBiZSBwZXJtaXR0ZWRcblx0XHRpZiAoIWV2ZW50LmNhbmNlbGFibGUpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIERlcml2ZSBhbmQgY2hlY2sgdGhlIHRhcmdldCBlbGVtZW50IHRvIHNlZSB3aGV0aGVyIHRoZSBtb3VzZSBldmVudCBuZWVkcyB0byBiZSBwZXJtaXR0ZWQ7XG5cdFx0Ly8gdW5sZXNzIGV4cGxpY2l0bHkgZW5hYmxlZCwgcHJldmVudCBub24tdG91Y2ggY2xpY2sgZXZlbnRzIGZyb20gdHJpZ2dlcmluZyBhY3Rpb25zLFxuXHRcdC8vIHRvIHByZXZlbnQgZ2hvc3QvZG91YmxlY2xpY2tzLlxuXHRcdGlmICghdGhpcy5uZWVkc0NsaWNrKHRoaXMudGFyZ2V0RWxlbWVudCkgfHwgdGhpcy5jYW5jZWxOZXh0Q2xpY2spIHtcblxuXHRcdFx0Ly8gUHJldmVudCBhbnkgdXNlci1hZGRlZCBsaXN0ZW5lcnMgZGVjbGFyZWQgb24gRmFzdENsaWNrIGVsZW1lbnQgZnJvbSBiZWluZyBmaXJlZC5cblx0XHRcdGlmIChldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFBhcnQgb2YgdGhlIGhhY2sgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBFdmVudCNzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gKGUuZy4gQW5kcm9pZCAyKVxuXHRcdFx0XHRldmVudC5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYW5jZWwgdGhlIGV2ZW50XG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGUgbW91c2UgZXZlbnQgaXMgcGVybWl0dGVkLCByZXR1cm4gdHJ1ZSBmb3IgdGhlIGFjdGlvbiB0byBnbyB0aHJvdWdoLlxuXHRcdHJldHVybiB0cnVlO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIE9uIGFjdHVhbCBjbGlja3MsIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSB0b3VjaC1nZW5lcmF0ZWQgY2xpY2ssIGEgY2xpY2sgYWN0aW9uIG9jY3VycmluZ1xuXHQgKiBuYXR1cmFsbHkgYWZ0ZXIgYSBkZWxheSBhZnRlciBhIHRvdWNoICh3aGljaCBuZWVkcyB0byBiZSBjYW5jZWxsZWQgdG8gYXZvaWQgZHVwbGljYXRpb24pLCBvclxuXHQgKiBhbiBhY3R1YWwgY2xpY2sgd2hpY2ggc2hvdWxkIGJlIHBlcm1pdHRlZC5cblx0ICpcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnRcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciBwZXJtaXR0ZWQ7XG5cblx0XHQvLyBJdCdzIHBvc3NpYmxlIGZvciBhbm90aGVyIEZhc3RDbGljay1saWtlIGxpYnJhcnkgZGVsaXZlcmVkIHdpdGggdGhpcmQtcGFydHkgY29kZSB0byBmaXJlIGEgY2xpY2sgZXZlbnQgYmVmb3JlIEZhc3RDbGljayBkb2VzIChpc3N1ZSAjNDQpLiBJbiB0aGF0IGNhc2UsIHNldCB0aGUgY2xpY2stdHJhY2tpbmcgZmxhZyBiYWNrIHRvIGZhbHNlIGFuZCByZXR1cm4gZWFybHkuIFRoaXMgd2lsbCBjYXVzZSBvblRvdWNoRW5kIHRvIHJldHVybiBlYXJseS5cblx0XHRpZiAodGhpcy50cmFja2luZ0NsaWNrKSB7XG5cdFx0XHR0aGlzLnRhcmdldEVsZW1lbnQgPSBudWxsO1xuXHRcdFx0dGhpcy50cmFja2luZ0NsaWNrID0gZmFsc2U7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBWZXJ5IG9kZCBiZWhhdmlvdXIgb24gaU9TIChpc3N1ZSAjMTgpOiBpZiBhIHN1Ym1pdCBlbGVtZW50IGlzIHByZXNlbnQgaW5zaWRlIGEgZm9ybSBhbmQgdGhlIHVzZXIgaGl0cyBlbnRlciBpbiB0aGUgaU9TIHNpbXVsYXRvciBvciBjbGlja3MgdGhlIEdvIGJ1dHRvbiBvbiB0aGUgcG9wLXVwIE9TIGtleWJvYXJkIHRoZSBhIGtpbmQgb2YgJ2Zha2UnIGNsaWNrIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIHdpdGggdGhlIHN1Ym1pdC10eXBlIGlucHV0IGVsZW1lbnQgYXMgdGhlIHRhcmdldC5cblx0XHRpZiAoZXZlbnQudGFyZ2V0LnR5cGUgPT09ICdzdWJtaXQnICYmIGV2ZW50LmRldGFpbCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cGVybWl0dGVkID0gdGhpcy5vbk1vdXNlKGV2ZW50KTtcblxuXHRcdC8vIE9ubHkgdW5zZXQgdGFyZ2V0RWxlbWVudCBpZiB0aGUgY2xpY2sgaXMgbm90IHBlcm1pdHRlZC4gVGhpcyB3aWxsIGVuc3VyZSB0aGF0IHRoZSBjaGVjayBmb3IgIXRhcmdldEVsZW1lbnQgaW4gb25Nb3VzZSBmYWlscyBhbmQgdGhlIGJyb3dzZXIncyBjbGljayBkb2Vzbid0IGdvIHRocm91Z2guXG5cdFx0aWYgKCFwZXJtaXR0ZWQpIHtcblx0XHRcdHRoaXMudGFyZ2V0RWxlbWVudCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgY2xpY2tzIGFyZSBwZXJtaXR0ZWQsIHJldHVybiB0cnVlIGZvciB0aGUgYWN0aW9uIHRvIGdvIHRocm91Z2guXG5cdFx0cmV0dXJuIHBlcm1pdHRlZDtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYWxsIEZhc3RDbGljaydzIGV2ZW50IGxpc3RlbmVycy5cblx0ICpcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRGYXN0Q2xpY2sucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbGF5ZXIgPSB0aGlzLmxheWVyO1xuXG5cdFx0aWYgKGRldmljZUlzQW5kcm9pZCkge1xuXHRcdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vbk1vdXNlLCB0cnVlKTtcblx0XHRcdGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZSwgdHJ1ZSk7XG5cdFx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlLCB0cnVlKTtcblx0XHR9XG5cblx0XHRsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG5cdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0LCBmYWxzZSk7XG5cdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSwgZmFsc2UpO1xuXHRcdGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLCBmYWxzZSk7XG5cdFx0bGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCB0aGlzLm9uVG91Y2hDYW5jZWwsIGZhbHNlKTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBDaGVjayB3aGV0aGVyIEZhc3RDbGljayBpcyBuZWVkZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gbGF5ZXIgVGhlIGxheWVyIHRvIGxpc3RlbiBvblxuXHQgKi9cblx0RmFzdENsaWNrLm5vdE5lZWRlZCA9IGZ1bmN0aW9uKGxheWVyKSB7XG5cdFx0dmFyIG1ldGFWaWV3cG9ydDtcblx0XHR2YXIgY2hyb21lVmVyc2lvbjtcblx0XHR2YXIgYmxhY2tiZXJyeVZlcnNpb247XG5cdFx0dmFyIGZpcmVmb3hWZXJzaW9uO1xuXG5cdFx0Ly8gRGV2aWNlcyB0aGF0IGRvbid0IHN1cHBvcnQgdG91Y2ggZG9uJ3QgbmVlZCBGYXN0Q2xpY2tcblx0XHRpZiAodHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBDaHJvbWUgdmVyc2lvbiAtIHplcm8gZm9yIG90aGVyIGJyb3dzZXJzXG5cdFx0Y2hyb21lVmVyc2lvbiA9ICsoL0Nocm9tZVxcLyhbMC05XSspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IFssMF0pWzFdO1xuXG5cdFx0aWYgKGNocm9tZVZlcnNpb24pIHtcblxuXHRcdFx0aWYgKGRldmljZUlzQW5kcm9pZCkge1xuXHRcdFx0XHRtZXRhVmlld3BvcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9dmlld3BvcnRdJyk7XG5cblx0XHRcdFx0aWYgKG1ldGFWaWV3cG9ydCkge1xuXHRcdFx0XHRcdC8vIENocm9tZSBvbiBBbmRyb2lkIHdpdGggdXNlci1zY2FsYWJsZT1cIm5vXCIgZG9lc24ndCBuZWVkIEZhc3RDbGljayAoaXNzdWUgIzg5KVxuXHRcdFx0XHRcdGlmIChtZXRhVmlld3BvcnQuY29udGVudC5pbmRleE9mKCd1c2VyLXNjYWxhYmxlPW5vJykgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gQ2hyb21lIDMyIGFuZCBhYm92ZSB3aXRoIHdpZHRoPWRldmljZS13aWR0aCBvciBsZXNzIGRvbid0IG5lZWQgRmFzdENsaWNrXG5cdFx0XHRcdFx0aWYgKGNocm9tZVZlcnNpb24gPiAzMSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGggPD0gd2luZG93Lm91dGVyV2lkdGgpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBDaHJvbWUgZGVza3RvcCBkb2Vzbid0IG5lZWQgRmFzdENsaWNrIChpc3N1ZSAjMTUpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZGV2aWNlSXNCbGFja0JlcnJ5MTApIHtcblx0XHRcdGJsYWNrYmVycnlWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhbMC05XSopXFwuKFswLTldKikvKTtcblxuXHRcdFx0Ly8gQmxhY2tCZXJyeSAxMC4zKyBkb2VzIG5vdCByZXF1aXJlIEZhc3RjbGljayBsaWJyYXJ5LlxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2Z0bGFicy9mYXN0Y2xpY2svaXNzdWVzLzI1MVxuXHRcdFx0aWYgKGJsYWNrYmVycnlWZXJzaW9uWzFdID49IDEwICYmIGJsYWNrYmVycnlWZXJzaW9uWzJdID49IDMpIHtcblx0XHRcdFx0bWV0YVZpZXdwb3J0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPXZpZXdwb3J0XScpO1xuXG5cdFx0XHRcdGlmIChtZXRhVmlld3BvcnQpIHtcblx0XHRcdFx0XHQvLyB1c2VyLXNjYWxhYmxlPW5vIGVsaW1pbmF0ZXMgY2xpY2sgZGVsYXkuXG5cdFx0XHRcdFx0aWYgKG1ldGFWaWV3cG9ydC5jb250ZW50LmluZGV4T2YoJ3VzZXItc2NhbGFibGU9bm8nKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyB3aWR0aD1kZXZpY2Utd2lkdGggKG9yIGxlc3MgdGhhbiBkZXZpY2Utd2lkdGgpIGVsaW1pbmF0ZXMgY2xpY2sgZGVsYXkuXG5cdFx0XHRcdFx0aWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCA8PSB3aW5kb3cub3V0ZXJXaWR0aCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSUUxMCB3aXRoIC1tcy10b3VjaC1hY3Rpb246IG5vbmUgb3IgbWFuaXB1bGF0aW9uLCB3aGljaCBkaXNhYmxlcyBkb3VibGUtdGFwLXRvLXpvb20gKGlzc3VlICM5Nylcblx0XHRpZiAobGF5ZXIuc3R5bGUubXNUb3VjaEFjdGlvbiA9PT0gJ25vbmUnIHx8IGxheWVyLnN0eWxlLnRvdWNoQWN0aW9uID09PSAnbWFuaXB1bGF0aW9uJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZWZveCB2ZXJzaW9uIC0gemVybyBmb3Igb3RoZXIgYnJvd3NlcnNcblx0XHRmaXJlZm94VmVyc2lvbiA9ICsoL0ZpcmVmb3hcXC8oWzAtOV0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSB8fCBbLDBdKVsxXTtcblxuXHRcdGlmIChmaXJlZm94VmVyc2lvbiA+PSAyNykge1xuXHRcdFx0Ly8gRmlyZWZveCAyNysgZG9lcyBub3QgaGF2ZSB0YXAgZGVsYXkgaWYgdGhlIGNvbnRlbnQgaXMgbm90IHpvb21hYmxlIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9OTIyODk2XG5cblx0XHRcdG1ldGFWaWV3cG9ydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT12aWV3cG9ydF0nKTtcblx0XHRcdGlmIChtZXRhVmlld3BvcnQgJiYgKG1ldGFWaWV3cG9ydC5jb250ZW50LmluZGV4T2YoJ3VzZXItc2NhbGFibGU9bm8nKSAhPT0gLTEgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoIDw9IHdpbmRvdy5vdXRlcldpZHRoKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJRTExOiBwcmVmaXhlZCAtbXMtdG91Y2gtYWN0aW9uIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYW5kIGl0J3MgcmVjb21lbmRlZCB0byB1c2Ugbm9uLXByZWZpeGVkIHZlcnNpb25cblx0XHQvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvd2luZG93cy9hcHBzL0hoNzY3MzEzLmFzcHhcblx0XHRpZiAobGF5ZXIuc3R5bGUudG91Y2hBY3Rpb24gPT09ICdub25lJyB8fCBsYXllci5zdHlsZS50b3VjaEFjdGlvbiA9PT0gJ21hbmlwdWxhdGlvbicpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBGYWN0b3J5IG1ldGhvZCBmb3IgY3JlYXRpbmcgYSBGYXN0Q2xpY2sgb2JqZWN0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gbGF5ZXIgVGhlIGxheWVyIHRvIGxpc3RlbiBvblxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0c1xuXHQgKi9cblx0RmFzdENsaWNrLmF0dGFjaCA9IGZ1bmN0aW9uKGxheWVyLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIG5ldyBGYXN0Q2xpY2sobGF5ZXIsIG9wdGlvbnMpO1xuXHR9O1xuXG5cblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gRmFzdENsaWNrO1xuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBGYXN0Q2xpY2suYXR0YWNoO1xuXHRcdG1vZHVsZS5leHBvcnRzLkZhc3RDbGljayA9IEZhc3RDbGljaztcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuRmFzdENsaWNrID0gRmFzdENsaWNrO1xuXHR9XG59KCkpO1xuIiwiaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG5jbGFzcyBIZWFkZXIge1xuXG4gIGNvbnN0cnVjdG9yKGVsKSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCdpbml0SGVhZGVyJyk7XG5cblx0ICB0aGlzLkRPTSA9IHt9O1xuXHQgIHRoaXMuRE9NLmVsID0gZWw7XG5cdCAgdGhpcy5ET00uYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdCAgdGhpcy5ET00uYnJhbmQgPSB0aGlzLkRPTS5lbC5xdWVyeVNlbGVjdG9yKCcuYnJhbmQnKTtcbiAgICB0aGlzLkRPTS50b2dnbGVPcGVuID0gdGhpcy5ET00uZWwucXVlcnlTZWxlY3RvcignLnRvZ2dsZV9fbWVudV9fb3BlbicpO1xuXHQgIHRoaXMuRE9NLnRvZ2dsZUNsb3NlID0gdGhpcy5ET00uZWwucXVlcnlTZWxlY3RvcignLnRvZ2dsZV9fbWVudV9fY2xvc2UnKTtcbiAgICB0aGlzLkRPTS5tZW51Q29udGFpbmVyID0gdGhpcy5ET00uZWwucXVlcnlTZWxlY3RvcignbmF2Jyk7XG4gICAgdGhpcy5tZW51T3BlbiA9IGZhbHNlO1xuXG5cdCAgdGhpcy5pbml0KCk7XG5cbiAgfVxuXG4gIGluaXQoKSB7XG5cbiAgICAvL2FuaW1hdGlvbiBPcGVuXG4gICAgY29uc3QgbWVudU9wZW5UTCA9IG5ldyBUaW1lbGluZU1heCh7IHBhdXNlZDogdHJ1ZX0pO1xuXG4gIFx0Ly90b2dnbGVcbiAgXHR0aGlzLkRPTS50b2dnbGVPcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge1xuXG4gIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4gIFx0XHR0aGlzLkRPTS5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3dNZW51Jyk7XG5cbiAgICAgIC8vaWYgT3Blbm5pbmdcbiAgXHRcdGlmICggdGhpcy5ET00uYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3dNZW51JykgKSB7XG5cbiAgICAgICAgdGhpcy5tZW51T3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuRE9NLmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgICAvL0FuaW1hdGlvblxuICAgICAgICBtZW51T3BlblRMLnRvdGFsRHVyYXRpb24oMikucmVzdGFydCgpO1xuXG4gIFx0XHR9IGVsc2Uge1xuXG4gICAgICAgIHRoaXMubWVudU9wZW4gPSBmYWxzZTtcblxuICAgICAgICAvL0FuaW1hdGlvbiBSZXZlcnNlXG4gICAgICAgIG1lbnVPcGVuVEwudG90YWxEdXJhdGlvbigxKS5yZXZlcnNlKCk7XG5cbiAgICAgICAgdGhpcy5ET00uYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xuICAgICAgICB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXG4gIFx0XHR9XG5cbiAgXHR9KTtcblxuICAgIC8vdG9nZ2xlXG4gICAgdGhpcy5ET00udG9nZ2xlQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7XG5cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuRE9NLmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvd01lbnUnKTtcblxuICAgICAgLy9pZiBPcGVubmluZ1xuICAgICAgaWYgKCB0aGlzLkRPTS5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2hvd01lbnUnKSApIHtcblxuICAgICAgICB0aGlzLm1lbnVPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ET00uYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRoaXMuRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICAgIC8vQW5pbWF0aW9uXG4gICAgICAgIG1lbnVPcGVuVEwudG90YWxEdXJhdGlvbigyKS5yZXN0YXJ0KCk7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgdGhpcy5tZW51T3BlbiA9IGZhbHNlO1xuXG4gICAgICAgIC8vQW5pbWF0aW9uIFJldmVyc2VcbiAgICAgICAgbWVudU9wZW5UTC50b3RhbER1cmF0aW9uKDEpLnJldmVyc2UoKTtcblxuICAgICAgICB0aGlzLkRPTS5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG4gICAgICAgIHRoaXMuRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIH1cblxuICAgIH0pO1xuXG5cbiAgICAvLyBMaW5rcyBDbGlja1xuICAgIGNvbnN0IGxpbmtzID0gdGhpcy5ET00ubWVudUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubmF2X19saW5rJylcbiAgICBsaW5rcy5mb3JFYWNoKChlbGVtKSA9PiB7XG5cbiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+IHtcbiAgICAgICAgaWYgKCB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKSAhPSBudWxsICkge1xuICAgICAgICAgICB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIH0pXG5cbiAgICB9KTtcblxuICAgIC8vIEJyYW5kIENsaWNrXG4gICAgdGhpcy5ET00uYnJhbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+IHtcblxuICAgICAgaWYgKCB0aGlzLkRPTS5tZW51Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKSAhPSBudWxsICkge1xuICAgICAgICAgdGhpcy5ET00ubWVudUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICB9XG5cbiAgICB9KVxuXG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7XG4iLCJpbXBvcnQgJ25vZGVsaXN0LWZvcmVhY2gtcG9seWZpbGwnXG5pbXBvcnQgRmFzdENsaWNrIGZyb20gJ2Zhc3RjbGljayc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL3V0aWxzLmpzJztcblxuaW1wb3J0IEhlYWRlciBmcm9tICcuL21vZHVsZXMvaGVhZGVyLmpzJztcblxuaW1wb3J0IHtpbml0SG9tZX0gZnJvbSAnLi9wYWdlcy9ob21lLmpzJztcbmltcG9ydCB7aW5pdFBhZ2V9IGZyb20gJy4vcGFnZXMvcGFnZS5qcyc7XG5cbmNsYXNzIEFwcCB7XG5cbiAgY29uc3RydWN0b3Iob3B0ID0ge30pIHtcblxuICAgIC8vRGVjbGFyYXRpb25zXG4gICAgdGhpcy5zeSA9IDA7XG4gICAgdGhpcy5kZXZNb2RlID0gdHJ1ZTtcbiAgICB0aGlzLkRPTSA9IHt9O1xuICAgIHRoaXMuRE9NLmJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIHRoaXMuRE9NLmZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvb3RlcicpO1xuICAgIHRoaXMuRE9NLmJhcmJhV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiYXJiYS13cmFwcGVyJyk7XG5cbiAgICAvL1NpZ25hdHVyZSBXb2tpbmVcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwwKVxuICAgIGNvbnNvbGUubG9nKFwiJWNDcmVhdGVkIGJ5IFdva2luZSwgd2l0aCDinaRcIixcImNvbG9yOiAjMDAwOyBwYWRkaW5nOiA1cHggMHB4IDFweDsgYm9yZGVyLWJvdHRvbToycHggc29saWQgIzcxZDFjMjtcIiksY29uc29sZS5sb2coXCIlY2h0dHA6Ly93b2tpbmUuY29tXCIsXCJjb2xvcjojY2NjXCIpXG5cbiAgICB0aGlzLmluaXQoKTtcbiAgICB0aGlzLmFkZEV2ZW50cygpO1xuICAgIHRoaXMuaW50cm8oKTtcblxuICB9XG5cbiAgaW5pdCgpIHtcblxuICAgIC8vRGV2TW9kZSAoIGluZm9zIG5hdmlnYXRldXIgKVxuICAgIGlmICh0aGlzLmRldk1vZGUpIHtcbiAgXHRcdGNvbnNvbGUubG9nKCdERVZNT0RFIEJJQVRDSCcpO1xuICAgICAgY29uc29sZS5sb2cod2luZG93LlNuaWZmKTtcbiAgICB9XG5cbiAgICAvL1Jlc2V0c1xuICAgIEZhc3RDbGljayh0aGlzLkRPTS5ib2R5KTtcbiAgICB0aGlzLkRPTS5ib2R5LnNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwO1xuICAgIGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcblxuICAgIC8vIENyZWF0ZSBIZWFkZXJcbiAgXHRjb25zdCBoZWFkZXIgPSBuZXcgSGVhZGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHkgPiBoZWFkZXInKSk7XG5cbiAgICAvL0JhcmJhXG4gICAgQmFyYmEuRGlzcGF0Y2hlci5vbignbmV3UGFnZVJlYWR5JywgKGN1cnJlbnRTdGF0dXMsIG9sZFN0YXR1cywgY29udGFpbmVyKSA9PiB7XG5cbiAgICAgIC8vIG5ld1BhZ2VSZWFkeVxuXG4gICAgICAvLyBBbmltYXRpb25zXG4gICAgICBpZiAoIXdpbmRvdy5TbmlmZi5mZWF0dXJlcy5tb2JpbGUpIHtcbiAgICAgICAgdGhpcy5pbml0UHJsbHgoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5pbml0SW5WaWV3KGNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICB9KTtcblxuICAgIEJhcmJhLkRpc3BhdGNoZXIub24oJ2xpbmtDbGlja2VkJywgKEhUTUxFbGVtZW50LCBNb3VzZUV2ZW50KSA9PiB7XG5cbiAgICAgIC8vbGlua0NsaWNrZWRcblxuICAgIH0pXG5cbiAgICBCYXJiYS5EaXNwYXRjaGVyLm9uKCdpbml0U3RhdGVDaGFuZ2UnLCBmdW5jdGlvbigpIHtcblxuICAgICAgLy9pbml0U3RhdGVDaGFuZ2VcbiAgXHRcdGlmICh0eXBlb2YgZ2EgPT09ICdmdW5jdGlvbicpIHtcbiAgXHRcdFx0Z2EoJ3NlbmQnLCAncGFnZXZpZXcnLCBsb2NhdGlvbi5wYXRobmFtZSk7XG4gIFx0XHR9XG5cbiAgXHR9KTtcblxuICAgIHZhciBwYWdlVHJhbnNpdGlvbiA9IEJhcmJhLkJhc2VUcmFuc2l0aW9uLmV4dGVuZCh7XG5cbiAgXHRcdHN0YXJ0OiBmdW5jdGlvbigpIHtcblxuICBcdFx0ICBQcm9taXNlLmFsbChbdGhpcy5uZXdDb250YWluZXJMb2FkaW5nLCB0aGlzLnRyYW5zaXRpb25PdXQoKV0pXG4gIFx0XHQgIC50aGVuKHRoaXMudHJhbnNpdGlvbkluLmJpbmQodGhpcykpO1xuXG4gIFx0XHR9LFxuXG4gIFx0XHR0cmFuc2l0aW9uT3V0OiBmdW5jdGlvbigpIHtcblxuICBcdFx0XHRsZXQgZGVmZXJyZWQgPSBCYXJiYS5VdGlscy5kZWZlcnJlZCgpO1xuICBcdFx0XHRsZXQgb2xkQ29udGFpbmVyID0gdGhpcy5vbGRDb250YWluZXI7XG5cblx0XHRcdCAgY29uc3QgcGFnZU91dCA9IG5ldyBUaW1lbGluZU1heCh7IHBhdXNlZDp0cnVlLCBvbkNvbXBsZXRlOigpPT57XG5cbiAgICAgICAgICAvL0Nsb3NlIE1lbnUgaWYgT3BlblxuICAgICAgICAgIGlmKGhlYWRlci5tZW51T3Blbil7XG4gICAgICAgICAgICB2YXIgY2xpY2sgPSBuZXcgRXZlbnQoJ2NsaWNrJyk7XG4gICAgICAgICAgICBoZWFkZXIuRE9NLnRvZ2dsZUNsb3NlLmRpc3BhdGNoRXZlbnQoY2xpY2spO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLDApO1xuXHRcdFx0XHQgIGRlZmVycmVkLnJlc29sdmUoKTtcblxuXHRcdFx0ICB9fSk7XG5cbiAgICAgICAgcGFnZU91dC50byhvbGRDb250YWluZXIsIDAuOCwge29wYWNpdHk6MCwgZWFzZTpQb3dlcjMuZWFzZU91dH0sIDApO1xuICAgICAgICBwYWdlT3V0LnBsYXkoKTtcblxuICBcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblxuICBcdFx0fSxcblxuICBcdFx0dHJhbnNpdGlvbkluOiBmdW5jdGlvbigpIHtcblxuICBcdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIFx0XHRcdHRoaXMub2xkQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgXHRcdFx0dGhpcy5uZXdDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcblxuXHRcdCAgICBjb25zdCBwYWdlSW4gPSBuZXcgVGltZWxpbmVNYXgoeyBwYXVzZWQ6dHJ1ZSwgb25Db21wbGV0ZTooKT0+e1xuXHRcdFx0XHRcdF90aGlzLmRvbmUoKTtcblx0XHRcdFx0fX0pXG5cbiAgICAgICAgcGFnZUluLmZyb20odGhpcy5uZXdDb250YWluZXIsIDEuMiwge29wYWNpdHk6MCwgZWFzZTpQb3dlcjMuZWFzZU91dH0sIDApO1xuICAgICAgICBwYWdlSW4ucGxheSgpO1xuXG4gIFx0XHR9XG5cbiAgXHR9KTtcblxuICBcdEJhcmJhLlBqYXguZ2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICBcdCAgcmV0dXJuIHBhZ2VUcmFuc2l0aW9uO1xuICBcdH07XG5cbiAgXHQvL3JvdXRlc1xuICBcdGluaXRIb21lKCk7XG4gIFx0aW5pdFBhZ2UoKTtcblxuICAgIEJhcmJhLlBqYXguc3RhcnQoKTtcblxuICB9XG5cbiAgYWRkRXZlbnRzKCnCoHtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoZSkgPT4ge1xuICBcdFx0dGhpcy5zeSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICBcdH0pXG5cbiAgfVxuXG4gIGluaXRQcmxseChjb250YWluZXIpIHtcblxuXHQgIGNvbnN0IFRMUHJsbHhzID0gW11cblx0ICBjb25zdCBwcmxseHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnKltkYXRhLXBybGx4XScpO1xuXHQgIHBybGx4cy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cblx0XHQgICAgbGV0IHBybGx4VEwgPSBuZXcgVGltZWxpbmVNYXgoeyBwYXVzZWQ6IHRydWV9KTtcbiAgICAgICAgVHdlZW5NYXguc2V0KGl0ZW0sIHsgeTogLTEgKiBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1wcmxseCcpIH0pO1xuICBcdCAgICBwcmxseFRMLnRvKGl0ZW0sIDEsIHsgeTppdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1wcmxseCcpLCBvdmVyd3JpdGU6XCJhbGxcIiwgZWFzZTpQb3dlcjAuZWFzZU5vbmUgfSk7XG5cdFx0ICAgIFRMUHJsbHhzLnB1c2gocHJsbHhUTCk7XG5cblx0ICB9KTtcblxuXHQgIHZhciBwcmxseFJlbmRlciA9IGZ1bmN0aW9uICgpe1xuXG5cdCAgICBwcmxseHMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IGZyb20gPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRoaXMuc3kgLSB3aW5kb3cuaW5uZXJIZWlnaHQgO1xuXHQgICAgICBsZXQgbm9ybSA9IHV0aWxzLmNsYW1wKHV0aWxzLm5vcm1hbGl6ZSh0aGlzLnN5LCAgZnJvbSAsICBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRoaXMuc3kgKyBpdGVtLm9mZnNldEhlaWdodCksIDAsIDEpO1xuXHRcdCAgICBUTFBybGx4c1tpbmRleF0ucHJvZ3Jlc3Mobm9ybSk7XG5cdCAgICB9KTtcblxuXHQgIH1cblxuXHQgIFR3ZWVuTWF4LnRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCBwcmxseFJlbmRlciwgdGhpcywgdHJ1ZSwgMSk7XG5cbiAgfVxuXG4gIGluaXRJblZpZXcoY29udGFpbmVyKSB7XG5cblxuICAgIC8vZmFkZUluXG4gICAgY29uc3QgZmFkZUluRWxlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZhZGVJblZpZXcnKTtcblxuICAgIGlmIChmYWRlSW5FbGVtcykge1xuICAgICAgZmFkZUluRWxlbXMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBlbGVtLmZhZGVJblRMID0gbmV3IFRpbWVsaW5lTWF4KHsgcGF1c2VkOiB0cnVlfSk7XG4gICAgICAgIGVsZW0uZmFkZUluVEwuZnJvbShlbGVtLCAxLCB7eTo4MCwgb3BhY2l0eTowLCBlYXNlOlBvd2VyMy5lYXNlT3V0fSwgMCk7XG4gICAgICB9KVxuXG4gICAgICBpblZpZXcoXCJtYWluIC5mYWRlSW5WaWV3XCIpLm9uKCdlbnRlcicsIGVsID0+IHtcbiAgICAgICAgaWYoIWVsLmRvbmUpICBlbC5mYWRlSW5UTC5kdXJhdGlvbihhbmltYXRpb25EdXJhdGlvbikucGxheSgpO1xuICAgICAgfSkub24oJ2V4aXQnLCBlbCA9PiB7XG4gICAgICAgIGVsLmRvbmUgPSB0cnVlO1xuICAgICAgICAvL2VsLmZhZGVJblRMLmR1cmF0aW9uKDAuMikucmV2ZXJzZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvL2xldHRlckluXG4gICAgY29uc3QgbGV0dGVyc0luRWxlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmxldHRlcnNJblZpZXcnKTtcbiAgICBpZiAobGV0dGVyc0luRWxlbXMpIHtcblxuICAgICAgbGV0dGVyc0luRWxlbXMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBlbGVtLnNwbGl0TGV0dGVycyA9IG5ldyBTcGxpdFRleHQoZWxlbSwge3R5cGU6XCJjaGFyc1wifSk7XG4gICAgICAgIGVsZW0ubGV0dGVyc0luVEwgPSBuZXcgVGltZWxpbmVNYXgoeyBwYXVzZWQ6IHRydWV9KTtcbiAgICAgICAgZWxlbS5sZXR0ZXJzSW5UTC5zdGFnZ2VyRnJvbShlbGVtLnNwbGl0TGV0dGVycy5jaGFycywgMSwge3k6MjAsIG9wYWNpdHk6MCwgZWFzZTpQb3dlcjMuZWFzZU91dH0sIDAuMDE1LCAwKTtcbiAgICAgIH0pXG5cbiAgICAgIGluVmlldyhcIm1haW4gLmxldHRlcnNJblZpZXdcIikub24oJ2VudGVyJywgZWwgPT4ge1xuICAgICAgICBpZighZWwuZG9uZSkgIGVsLmxldHRlcnNJblRMLmR1cmF0aW9uKGFuaW1hdGlvbkR1cmF0aW9uKS5wbGF5KCk7XG4gICAgICB9KS5vbignZXhpdCcsIGVsID0+IHtcbiAgICAgICAgZWwuZG9uZSA9IHRydWU7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGVsLnNwbGl0TGV0dGVycy5fb3JpZ2luYWxzO1xuICAgICAgICAvL2VsLmxldHRlcnNJblRMLmR1cmF0aW9uKDAuMikucmV2ZXJzZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvL2xpbmVzSW5cbiAgICBjb25zdCBsaW5lc0luRWxlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmxpbmVzSW5WaWV3Jyk7XG4gICAgaWYgKGxpbmVzSW5FbGVtcykge1xuXG4gICAgICBsaW5lc0luRWxlbXMuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBlbGVtLnNwbGl0TGluZXMgPSBuZXcgU3BsaXRUZXh0KGVsZW0sIHt0eXBlOlwibGluZXNcIn0pO1xuICAgICAgICBlbGVtLmxpbmVzSW5UTCA9IG5ldyBUaW1lbGluZU1heCh7IHBhdXNlZDogdHJ1ZX0pO1xuICAgICAgICBlbGVtLmxpbmVzSW5UTC5zdGFnZ2VyRnJvbShlbGVtLnNwbGl0TGluZXMubGluZXMsIDEsIHt5OjIwLCBvcGFjaXR5OjAsIGVhc2U6UG93ZXIzLmVhc2VPdXR9LCAwLjA1LCAwLjIpO1xuICAgICAgfSlcblxuICAgICAgaW5WaWV3KFwibWFpbiAubGluZXNJblZpZXdcIikub24oJ2VudGVyJywgZWwgPT4ge1xuICAgICAgICBpZighZWwuZG9uZSkgIGVsLmxpbmVzSW5UTC5kdXJhdGlvbihhbmltYXRpb25EdXJhdGlvbiAqIDEuNSkucGxheSgpO1xuICAgICAgfSkub24oJ2V4aXQnLCBlbCA9PiB7XG4gICAgICAgIGVsLmRvbmUgPSB0cnVlO1xuICAgICAgICBlbC5pbm5lckhUTUwgPSBlbC5zcGxpdExpbmVzLl9vcmlnaW5hbHM7XG4gICAgICAgIC8vZWwubGluZXNJblRMLmR1cmF0aW9uKDAuMikucmV2ZXJzZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBpblZpZXcub2Zmc2V0KHtcbiAgICAgICAgdG9wOiAtMTIwLFxuICAgICAgICBsZWZ0Oi01MCxcbiAgICAgICAgcmlnaHQ6LTUwLFxuICAgICAgICBib3R0b206IDAsXG4gICAgfSk7XG5cbiAgfVxuXG4gIGludHJvKCkge1xuXG4gICAgY29uc3QgaW50cm8gPSBuZXcgVGltZWxpbmVNYXgoeyBwYXVzZWQ6dHJ1ZSwgb25TdGFydDooKT0+e1xuICAgICAgdGhpcy5ET00uYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG4gICAgfX0pXG5cbiAgICBpbnRyby5mcm9tKHRoaXMuRE9NLmJvZHksIDEuMiwge29wYWNpdHk6MCwgZWFzZTpQb3dlcjMuZWFzZU91dH0sIDAuMylcbiAgICBpbnRyby5wbGF5KCk7XG5cbiAgfVxuXG59XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbiJdLCJuYW1lcyI6WyJub3JtYWxpemUiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsImNsYW1wIiwiaW5pdEhvbWUiLCJCYXJiYSIsIkJhc2VWaWV3IiwiZXh0ZW5kIiwiaW5pdCIsImluaXRQYWdlIiwiRmFzdENsaWNrIiwibGF5ZXIiLCJvcHRpb25zIiwib2xkT25DbGljayIsInRyYWNraW5nQ2xpY2siLCJ0cmFja2luZ0NsaWNrU3RhcnQiLCJ0YXJnZXRFbGVtZW50IiwidG91Y2hTdGFydFgiLCJ0b3VjaFN0YXJ0WSIsImxhc3RUb3VjaElkZW50aWZpZXIiLCJ0b3VjaEJvdW5kYXJ5IiwidGFwRGVsYXkiLCJ0YXBUaW1lb3V0Iiwibm90TmVlZGVkIiwibWV0aG9kcyIsImNvbnRleHQiLCJ0aGlzIiwiaSIsImwiLCJsZW5ndGgiLCJtZXRob2QiLCJhcHBseSIsImFyZ3VtZW50cyIsImJpbmQiLCJkZXZpY2VJc0FuZHJvaWQiLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZSIsIm9uQ2xpY2siLCJvblRvdWNoU3RhcnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJvblRvdWNoQ2FuY2VsIiwiRXZlbnQiLCJwcm90b3R5cGUiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidHlwZSIsImNhbGxiYWNrIiwiY2FwdHVyZSIsInJtdiIsIk5vZGUiLCJjYWxsIiwiaGlqYWNrZWQiLCJhZHYiLCJldmVudCIsInByb3BhZ2F0aW9uU3RvcHBlZCIsIm9uY2xpY2siLCJkZXZpY2VJc1dpbmRvd3NQaG9uZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJkZXZpY2VJc0lPUyIsInRlc3QiLCJkZXZpY2VJc0lPUzQiLCJkZXZpY2VJc0lPU1dpdGhCYWRUYXJnZXQiLCJkZXZpY2VJc0JsYWNrQmVycnkxMCIsIm5lZWRzQ2xpY2siLCJ0YXJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwiZGlzYWJsZWQiLCJjbGFzc05hbWUiLCJuZWVkc0ZvY3VzIiwicmVhZE9ubHkiLCJzZW5kQ2xpY2siLCJjbGlja0V2ZW50IiwidG91Y2giLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJibHVyIiwiY2hhbmdlZFRvdWNoZXMiLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGV0ZXJtaW5lRXZlbnRUeXBlIiwid2luZG93Iiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImZvcndhcmRlZFRvdWNoRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwidGFnTmFtZSIsImZvY3VzIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJ1cGRhdGVTY3JvbGxQYXJlbnQiLCJzY3JvbGxQYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwiZmFzdENsaWNrU2Nyb2xsUGFyZW50IiwiY29udGFpbnMiLCJzY3JvbGxIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJmYXN0Q2xpY2tMYXN0U2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwiZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldCIsImV2ZW50VGFyZ2V0Iiwibm9kZVR5cGUiLCJURVhUX05PREUiLCJwYXJlbnROb2RlIiwic2VsZWN0aW9uIiwidGFyZ2V0VG91Y2hlcyIsImdldFNlbGVjdGlvbiIsInJhbmdlQ291bnQiLCJpc0NvbGxhcHNlZCIsImlkZW50aWZpZXIiLCJwcmV2ZW50RGVmYXVsdCIsInRpbWVTdGFtcCIsInBhZ2VYIiwicGFnZVkiLCJsYXN0Q2xpY2tUaW1lIiwidG91Y2hIYXNNb3ZlZCIsImJvdW5kYXJ5IiwiTWF0aCIsImFicyIsImZpbmRDb250cm9sIiwibGFiZWxFbGVtZW50IiwidW5kZWZpbmVkIiwiY29udHJvbCIsImh0bWxGb3IiLCJnZXRFbGVtZW50QnlJZCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JFbGVtZW50IiwidGFyZ2V0VGFnTmFtZSIsImNhbmNlbE5leHRDbGljayIsImVsZW1lbnRGcm9tUG9pbnQiLCJwYWdlWE9mZnNldCIsInBhZ2VZT2Zmc2V0IiwidG9wIiwiY2FuY2VsYWJsZSIsInN0b3BQcm9wYWdhdGlvbiIsInBlcm1pdHRlZCIsImRldGFpbCIsImRlc3Ryb3kiLCJtZXRhVmlld3BvcnQiLCJjaHJvbWVWZXJzaW9uIiwiYmxhY2tiZXJyeVZlcnNpb24iLCJvbnRvdWNoc3RhcnQiLCJleGVjIiwiY29udGVudCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFdpZHRoIiwib3V0ZXJXaWR0aCIsIm1hdGNoIiwic3R5bGUiLCJtc1RvdWNoQWN0aW9uIiwidG91Y2hBY3Rpb24iLCJhdHRhY2giLCJtb2R1bGUiLCJleHBvcnRzIiwiSGVhZGVyIiwiZWwiLCJET00iLCJib2R5IiwiYnJhbmQiLCJ0b2dnbGVPcGVuIiwidG9nZ2xlQ2xvc2UiLCJtZW51Q29udGFpbmVyIiwibWVudU9wZW4iLCJtZW51T3BlblRMIiwiVGltZWxpbmVNYXgiLCJwYXVzZWQiLCJlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX3RoaXMiLCJvdmVyZmxvdyIsInZpc2liaWxpdHkiLCJ0b3RhbER1cmF0aW9uIiwicmVzdGFydCIsInJldmVyc2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW0iLCJyZW1vdmUiLCJjdXJyZW50VGFyZ2V0IiwiYWRkIiwic3kiLCJkZXZNb2RlIiwiZm9vdGVyIiwiYmFyYmFXcmFwcGVyIiwic2Nyb2xsVG8iLCJsb2ciLCJjb25zb2xlIiwiYWRkRXZlbnRzIiwiaW50cm8iLCJTbmlmZiIsInNjcm9sbFJlc3RvcmF0aW9uIiwiaGVhZGVyIiwiRGlzcGF0Y2hlciIsIm9uIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsImNvbnRhaW5lciIsImZlYXR1cmVzIiwibW9iaWxlIiwiaW5pdFBybGx4IiwiaW5pdEluVmlldyIsIkhUTUxFbGVtZW50IiwiTW91c2VFdmVudCIsImdhIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInBhZ2VUcmFuc2l0aW9uIiwiQmFzZVRyYW5zaXRpb24iLCJhbGwiLCJuZXdDb250YWluZXJMb2FkaW5nIiwidHJhbnNpdGlvbk91dCIsInRoZW4iLCJ0cmFuc2l0aW9uSW4iLCJkZWZlcnJlZCIsIlV0aWxzIiwib2xkQ29udGFpbmVyIiwicGFnZU91dCIsIm9uQ29tcGxldGUiLCJjbGljayIsInJlc29sdmUiLCJ0byIsIm9wYWNpdHkiLCJlYXNlIiwiUG93ZXIzIiwiZWFzZU91dCIsInBsYXkiLCJwcm9taXNlIiwiZGlzcGxheSIsIm5ld0NvbnRhaW5lciIsInBhZ2VJbiIsImRvbmUiLCJmcm9tIiwiUGpheCIsImdldFRyYW5zaXRpb24iLCJzdGFydCIsIlRMUHJsbHhzIiwicHJsbHhzIiwiaXRlbSIsInBybGx4VEwiLCJzZXQiLCJ5IiwiZ2V0QXR0cmlidXRlIiwib3ZlcndyaXRlIiwiUG93ZXIwIiwiZWFzZU5vbmUiLCJwdXNoIiwidGlja2VyIiwiaW5kZXgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJfdGhpczQiLCJpbm5lckhlaWdodCIsIm5vcm0iLCJ1dGlscyIsInByb2dyZXNzIiwiZmFkZUluRWxlbXMiLCJmYWRlSW5UTCIsImR1cmF0aW9uIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJsZXR0ZXJzSW5FbGVtcyIsInNwbGl0TGV0dGVycyIsIlNwbGl0VGV4dCIsImxldHRlcnNJblRMIiwic3RhZ2dlckZyb20iLCJjaGFycyIsImlubmVySFRNTCIsIl9vcmlnaW5hbHMiLCJsaW5lc0luRWxlbXMiLCJzcGxpdExpbmVzIiwibGluZXNJblRMIiwibGluZXMiLCJvZmZzZXQiLCJvblN0YXJ0Il0sIm1hcHBpbmdzIjoieU5BOENPLFNBQVNBLEVBQVVDLEVBQU9DLEVBQUtDLFVBQzVCRixFQUFRQyxJQUFRQyxFQUFNRCxHQUdoQyxTQUFnQkUsRUFBTUgsRUFBT0MsRUFBS0MsVUFDekJGLEVBQVFDLEVBQU1BLEVBQU9ELEVBQVFFLEVBQU1BLEVBQU1GLEVDbkQzQyxTQUFTSSxJQUVKQyxNQUFNQyxTQUFTQyxrQkFFZCxvQkFFRiw4QkFNUyxlQVFkQyxnQkNwQlVDLElBRUpKLE1BQU1DLFNBQVND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"}